(window.webpackJsonp=window.webpackJsonp||[]).push([["ezplatform-admin-ui-bookmark-list-js","ezplatform-admin-ui-content-draft-list-js"],{1:function(e,t,n){n("rvQw"),n("s7Kb"),n("Axjq"),e.exports=n("cKz5")},Axjq:function(e,t){var n,r,o,a,i,c,s;n=window,r=window.document,o=window.jQuery,a=window.eZ,i=window.Translator,c=window.Routing,s=function(e){var t=a.helpers.notification.showErrorNotification,s=e.currentTarget.dataset.contentDraftEditUrl,d=e.currentTarget.dataset.versionHasConflictUrl,l=e.currentTarget.dataset.contentId,u=e.currentTarget.dataset.languageCode,f=c.generate("ezplatform.content.check_edit_permission",{contentId:l,languageCode:u}),m=i.trans("content.edit.permission.error",{},"content");e.preventDefault(),fetch(f,{mode:"same-origin",credentials:"same-origin"}).then(a.helpers.request.getJsonFromResponse).then((function(e){if(e.canEdit)return fetch(d,{mode:"same-origin",credentials:"same-origin"});throw new Error(m)})).then((function(e){409===e.status&&(r.querySelector("#edit-conflicted-draft").href=s,o("#version-conflict-modal").modal("show")),403===e.status&&e.text().then(t),200===e.status&&(n.location.href=s)})).catch(t)},r.querySelectorAll(".ez-btn--content-draft-edit").forEach((function(e){return e.addEventListener("click",s,!1)}))},cKz5:function(e,t){var n,r,o,a,i,c,s,d,l,u,f,m,w,p,g,h,v,y;window,n=window.document,r=window.React,o=window.ReactDOM,a=window.eZ,i=window.localStorage,c=n.querySelector('meta[name="CSRF-Token"]').content,s=n.querySelector('meta[name="SiteAccess"]').content,d=n.querySelector(".ez-content-tree-container"),l=n.querySelector(".ez-content-tree-container__wrapper"),u=n.querySelector(".ez-btn--toggle-content-tree"),f=d.dataset,m=f.currentLocationPath,w=f.treeRootLocationId,p=window.eZ.helpers.user.getId(),g=null,h=function(){var e=Math.min(window.innerHeight-d.getBoundingClientRect().top,window.innerHeight);l.style.height="".concat(e,"px")},v=function(){g&&cancelAnimationFrame(g),g=requestAnimationFrame(h)},y=function(e,t){var n=JSON.parse(i.getItem("ez-content-tree-expanded"));n instanceof Object||(n={}),n[e]=t,i.setItem("ez-content-tree-expanded",JSON.stringify(n))},o.render(r.createElement(a.modules.ContentTree,{userId:p,currentLocationPath:m,rootLocationId:parseInt(w,10),restInfo:{token:c,siteaccess:s}}),l),u.addEventListener("click",(function(){n.activeElement.blur(),d.classList.toggle("ez-content-tree-container--expanded"),d.classList.add("ez-content-tree-container--animate"),u.classList.toggle("ez-btn--content-tree-expanded"),h();var e=d.classList.contains("ez-content-tree-container--expanded");y(p,e),a.helpers.tooltips.hideAll()}),!1),function(e){var t=JSON.parse(i.getItem("ez-content-tree-expanded"));return t&&t[e]}(p)&&(d.classList.add("ez-content-tree-container--expanded"),u.classList.add("ez-btn--content-tree-expanded")),h(),n.addEventListener("scroll",v,{capture:!1,passive:!0}),window.addEventListener("resize",v,{capture:!1,passive:!0})},rvQw:function(e,t){function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o;window,(o=window.document).querySelectorAll(".ez-toggle-btn-state").forEach((function(e){var t=n(e.querySelectorAll('.ez-table__cell.ez-table__cell--has-checkbox input[type="checkbox"]')),r=o.querySelector(e.dataset.toggleButtonId);if(r){var a=function(){var e=t.some((function(e){return e.checked}));r.disabled=!e};a(),t.forEach((function(e){return e.addEventListener("change",a,!1)}))}}))},s7Kb:function(e,t){var n,r,o,a,i,c,s;window,n=window.document,r=window.jQuery,o=window.eZ,a=window.Translator,i=window.Routing,c=o.helpers.notification.showErrorNotification,s=function(e){var t=n.querySelector("form.ez-edit-content-form"),s=t.name,d=e.currentTarget.dataset,l=d.contentId,u=d.versionNo,f=d.languageCode,m=t.querySelector('input[name="'.concat(s,'[content_info]"]')),w=t.querySelector('input[name="'.concat(s,'[version_info][content_info]"]')),p=t.querySelector('input[name="'.concat(s,'[version_info][version_no]"]')),g=t.querySelector("#".concat(s,"_language_").concat(f)),h=i.generate("ezplatform.version_draft.has_no_conflict",{contentId:l,languageCode:f}),v=i.generate("ezplatform.content.check_edit_permission",{contentId:l,languageCode:f}),y=a.trans("content.edit.permission.error",{},"content"),b=function(){m.value=l,w.value=l,p.value=void 0!==u?u:null,g.checked=!0,t.submit()},S=function(){b(),r("#version-draft-conflict-modal").modal("hide")},z=function(e){var t=n.querySelector(".ez-modal-wrapper");t.innerHTML=e;var o=t.querySelector(".ez-btn--add-draft");o&&o.addEventListener("click",S,!1),t.querySelectorAll(".ez-btn--prevented").forEach((function(e){return e.addEventListener("click",(function(e){return e.preventDefault()}),!1)})),r("#version-draft-conflict-modal").modal("show")};e.preventDefault(),fetch(v,{mode:"same-origin",credentials:"same-origin"}).then(o.helpers.request.getJsonFromResponse).then((function(e){if(e.canEdit)return fetch(h,{mode:"same-origin",credentials:"same-origin"});throw new Error(y)})).then((function(e){409===e.status?e.text().then(z):403===e.status?e.text().then(c):200===e.status&&b()})).catch(c)},n.querySelectorAll(".ez-btn--content-edit").forEach((function(e){return e.addEventListener("click",s,!1)}))}},[[1,"runtime"]]]);