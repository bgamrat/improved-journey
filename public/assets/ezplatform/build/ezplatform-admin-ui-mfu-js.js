(window.webpackJsonp=window.webpackJsonp||[]).push([["ezplatform-admin-ui-mfu-js"],{34:function(e,t,n){e.exports=n("kfMk")},cDcd:function(e,t){e.exports=React},kfMk:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Te}));var o=n("cDcd"),r=n.n(o),i=n("rf6O"),a=n.n(i),l=n("uHg5");function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(e){l=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var c=function(e){var t=Object(o.useRef)(),n=s(Object(o.useState)("initial"),2),i=n[0],a=n[1];Object(o.useLayoutEffect)((function(){var e=t.current.getBoundingClientRect(),n=e.top,o=e.height,r=Math.round(n);r<35?a(o+r-35):r>35&&a("initial")}));var u={className:"c-tooltip-popup",hidden:!e.visible},c="initial"===i?{}:{maxHeight:i,overflowY:"scroll"},d=Translator.trans("tooltip.close_label",{},"content");return r.a.createElement("div",u,r.a.createElement("div",{className:"c-tooltip-popup__header"},r.a.createElement("div",{className:"c-tooltip-popup__title"},e.title),r.a.createElement("div",{className:"c-tooltip-popup__close",title:d,onClick:e.onClose,tabIndex:"-1","data-tooltip-container-selector":".c-tooltip-popup__header"},r.a.createElement(l.a,{name:"discard",extraClasses:"ez-icon--small"}))),r.a.createElement("div",{className:"c-tooltip-popup__content",ref:t,style:c},e.children),r.a.createElement("div",{className:"c-tooltip-popup__footer"},r.a.createElement("button",{class:"btn btn-secondary",onClick:e.onClose},d)))};c.propTypes={title:a.a.string.isRequired,children:a.a.node.isRequired,visible:a.a.bool.isRequired,onClose:a.a.func},c.defaultProps={onClose:function(){}};var d=c,p=function(e){for(var t,n=parseInt(e,10)||0,o=0;n>=1024;)n/=1024,o++;return t=o<1?0:1,n.toFixed(n>=10||t)+" "+["bytes","KB","MB","GB"][o]};function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=g(e);if(t){var r=g(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,n,o,i=y(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._refFileInput=null,t.openFileSelector=t.openFileSelector.bind(v(t)),t.handleUpload=t.handleUpload.bind(v(t)),t}return t=a,(n=[{key:"openFileSelector",value:function(e){e.preventDefault(),this._refFileInput.click()}},{key:"handleUpload",value:function(e){this.props.preventDefaultAction(e),this.props.onDrop(this.props.processUploadedFiles(e))}},{key:"componentDidMount",value:function(){window.addEventListener("drop",this.props.preventDefaultAction,!1),window.addEventListener("dragover",this.props.preventDefaultAction,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("drop",this.props.preventDefaultAction,!1),window.removeEventListener("dragover",this.props.preventDefaultAction,!1)}},{key:"render",value:function(){var e=this,t=Translator.trans("max_file_size.message",{},"multi_file_upload"),n=Translator.trans("drop_action.message",{},"multi_file_upload"),o=Translator.trans("upload_btn.label",{},"multi_file_upload");return r.a.createElement("form",{className:"c-drop-area",multiple:!0,onDrop:this.handleUpload},r.a.createElement("div",{className:"c-drop-area__message c-drop-area__message--main"},n),r.a.createElement("button",{type:"button",class:"btn btn-primary c-drop-area__btn-select",onClick:this.openFileSelector,tabIndex:"-1"},o),r.a.createElement("div",{className:"c-drop-area__message c-drop-area__message--filesize"},"(",t," ",p(this.props.maxFileSize),")"),r.a.createElement("input",{className:"c-drop-area__input--hidden",ref:function(t){return e._refFileInput=t},id:"mfu-files",type:"file",name:"files[]",hidden:!0,multiple:!0,onChange:this.handleUpload}))}}])&&h(t.prototype,n),o&&h(t,o),a}(o.Component);w.propTypes={onDrop:a.a.func.isRequired,maxFileSize:a.a.number.isRequired,processUploadedFiles:a.a.func.isRequired,preventDefaultAction:a.a.func.isRequired};var _=function(e){return r.a.createElement("div",{className:"c-progress-bar"},r.a.createElement("div",{className:"c-progress-bar__value",style:{width:"".concat(e.progress,"%")}}),r.a.createElement("div",{className:"c-progress-bar__label"},"".concat(e.progress,"%")),r.a.createElement("div",{className:"c-progress-bar__uploaded"},e.uploaded," of ",e.total))};_.propTypes={progress:a.a.number.isRequired,uploaded:a.a.string.isRequired,total:a.a.string.isRequired};var T=_;function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=q(e);if(t){var r=q(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(a,e);var t,n,o,i=k(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).handleFileSizeNotAllowed=t.handleFileSizeNotAllowed.bind(P(t)),t.handleFileTypeNotAllowed=t.handleFileTypeNotAllowed.bind(P(t)),t.handleContentTypeNotAllowed=t.handleContentTypeNotAllowed.bind(P(t)),t.handleEditBtnClick=t.handleEditBtnClick.bind(P(t)),t.handleUploadAbort=t.handleUploadAbort.bind(P(t)),t.handleUploadError=t.handleUploadError.bind(P(t)),t.handleUploadLoad=t.handleUploadLoad.bind(P(t)),t.handleUploadProgress=t.handleUploadProgress.bind(P(t)),t.handleUploadEnd=t.handleUploadEnd.bind(P(t)),t.handleLoadStart=t.handleLoadStart.bind(P(t)),t.handleFileDeleted=t.handleFileDeleted.bind(P(t)),t.abortUploading=t.abortUploading.bind(P(t)),t.deleteFile=t.deleteFile.bind(P(t)),t.contentInfoInput=null,t.contentVersionInfoInput=null,t.contentVersionNoInput=null,t.contentEditBtn=null,t.state={uploading:!1,uploaded:e.isUploaded,disallowed:!1,disallowedType:!1,disallowedSize:!1,disallowedContentType:!1,aborted:!1,failed:!1,deleted:!1,progress:0,xhr:null,struct:e.data.struct||null,totalSize:p(e.data.file.size),uploadedSize:"0"},t}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=e.adminUiConfig,o=e.parentInfo,r=e.createFileStruct,i=e.isUploaded,a=e.checkCanUpload,l=e.contentCreatePermissionsConfig,s=e.currentLanguage;if(this.contentInfoInput=window.document.querySelector("#form_subitems_content_edit_content_info"),this.contentVersionInfoInput=window.document.querySelector("#form_subitems_content_edit_version_info_content_info"),this.contentVersionNoInput=window.document.querySelector("#form_subitems_content_edit_version_info_version_no"),this.contentEditBtn=window.document.querySelector("#form_subitems_content_edit_create"),!i){var u=U(U({},n.multiFileUpload),{},{contentCreatePermissionsConfig:l}),c={fileTypeNotAllowedCallback:this.handleFileTypeNotAllowed,fileSizeNotAllowedCallback:this.handleFileSizeNotAllowed,contentTypeNotAllowedCallback:this.handleContentTypeNotAllowed};a(t.file,o,u,c)?r(t.file,{parentInfo:o,config:n,languageCode:s}).then(this.initPublishFile.bind(this,n)):this.setState((function(){return{uploading:!1,disallowed:!0,uploaded:!1,aborted:!1,failed:!0}}))}}},{key:"initPublishFile",value:function(e,t){var n=e.token,o=e.siteaccess;this.props.publishFile({struct:t,token:n,siteaccess:o},{upload:{onabort:this.handleUploadAbort,onerror:this.handleUploadError,onload:this.handleUploadLoad,onprogress:this.handleUploadProgress},onloadstart:this.handleLoadStart,onerror:this.handleUploadError},this.handleUploadEnd)}},{key:"handleFileTypeNotAllowed",value:function(){this.setState((function(){return{uploading:!1,disallowed:!0,disallowedType:!0,disallowedSize:!1,disallowedContentType:!1,uploaded:!1,aborted:!1,failed:!0}}))}},{key:"handleFileSizeNotAllowed",value:function(){this.setState((function(){return{uploading:!1,disallowed:!0,disallowedType:!1,disallowedSize:!0,disallowedContentType:!1,uploaded:!1,aborted:!1,failed:!0}}))}},{key:"handleContentTypeNotAllowed",value:function(){this.setState((function(){return{uploading:!1,disallowed:!0,disallowedType:!1,disallowedSize:!1,disallowedContentType:!0,uploaded:!1,aborted:!1,failed:!0}}))}},{key:"handleLoadStart",value:function(e){this.setState((function(){return{uploading:!0,disallowed:!1,disallowedType:!1,disallowedSize:!1,disallowedContentType:!1,uploaded:!1,aborted:!1,failed:!1,xhr:e.target}}))}},{key:"handleUploadAbort",value:function(){this.setState((function(){return{uploading:!1,disallowed:!1,disallowedType:!1,disallowedSize:!1,disallowedContentType:!1,uploaded:!1,aborted:!0,failed:!1}}))}},{key:"handleUploadError",value:function(){this.setState((function(e){return{uploading:!1,disallowed:e.disallowed,disallowedSize:e.disallowedSize,disallowedType:e.disallowedType,disallowedContentType:e.disallowedContentType,uploaded:!1,aborted:e.aborted,failed:!0}}))}},{key:"handleUploadLoad",value:function(){this.setState((function(){return{uploading:!1,disallowed:!1,disallowedType:!1,disallowedSize:!1,disallowedContentType:!1,uploaded:!0,aborted:!1,failed:!1}}))}},{key:"handleUploadProgress",value:function(e){var t=this,n=e.loaded/e.total,o=parseInt(100*n,10);this.setState((function(){return{uploadedSize:p(n*parseInt(t.props.data.file.size,10)),uploading:!0,disallowed:!1,disallowedType:!1,disallowedSize:!1,disallowedContentType:!1,uploaded:!1,aborted:!1,failed:!1,progress:o}}))}},{key:"handleUploadEnd",value:function(){var e=this;this.setState((function(e){return{struct:JSON.parse(e.xhr.response),uploading:!1,disallowed:!1,disallowedType:!1,disallowedSize:!1,disallowedContentType:!1,uploaded:!0,aborted:!1,failed:!1}}),(function(){var t=e.props.data;e.props.onAfterUpload(U(U({},t),{},{struct:e.state.struct}))}))}},{key:"abortUploading",value:function(){this.state.xhr.abort(),this.props.onAfterAbort(this.props.data)}},{key:"deleteFile",value:function(){var e=this;this.setState((function(){return{deleted:!0}}),(function(){return e.props.deleteFile(e.props.adminUiConfig,e.state.struct,e.handleFileDeleted)}))}},{key:"handleFileDeleted",value:function(){this.props.onAfterDelete(this.props.data)}},{key:"getContentTypeIdentifier",value:function(){var e=this.props,t=e.contentTypesMap,n=e.data;if(!n.struct||!n.struct.Content)return null;var o=n.struct.Content.ContentType._href,r=t?t[o]:null;return r?r.identifier:null}},{key:"renderIcon",value:function(){var e=this.getContentTypeIdentifier();if(!e)return null;var t=eZ.helpers.contentType.getContentTypeIconUrl(e);return r.a.createElement(l.a,{customPath:t,extraClasses:"ez-icon--small-medium ez-icon--base-dark"})}},{key:"renderProgressBar",value:function(){var e=this.state,t=e.uploaded,n=e.aborted,o=e.progress,i=e.totalSize,a=e.uploadedSize,l=e.disallowed;return this.props.isUploaded||t||n||l?null:r.a.createElement(T,{progress:o,uploaded:a,total:i})}},{key:"renderErrorMessage",value:function(){var e=this.state,t=e.uploaded,n=e.aborted,o=e.disallowedType,i=e.disallowedSize,a=e.failed,l=e.uploading,s=e.disallowedContentType,u=!t&&!n&&(i||o||s)&&a&&!l,c=Translator.trans("cannot_upload.message",{},"multi_file_upload"),d=Translator.trans("disallowed_type.message",{},"multi_file_upload"),p=Translator.trans("disallowed_size.message",{},"multi_file_upload"),f=Translator.trans("disallowed_content_type.message",{},"multi_file_upload"),h=c;return o&&(h=d),i&&(h=p),s&&(h=f),u?r.a.createElement("div",{className:"c-upload-list-item__message c-upload-list-item__message--error"},h):null}},{key:"renderSuccessMessage",value:function(){var e=this.state,t=e.uploaded,n=e.aborted,o=e.disallowedSize,i=e.disallowedType,a=e.failed,l=e.uploading,s=t&&!n&&!(o||i)&&!a&&!l,u=Translator.trans("upload.success.message",{},"multi_file_upload");return s?r.a.createElement("div",{className:"c-upload-list-item__message c-upload-list-item__message--success"},u):null}},{key:"renderAbortBtn",value:function(){var e=this.state,t=e.uploaded,n=e.aborted,o=e.disallowedSize,i=e.disallowedType,a=e.failed,s=e.uploading;if(t||n||o||i||a||!s)return null;var u=Translator.trans("abort.label",{},"multi_file_upload");return r.a.createElement("div",{className:"c-upload-list-item__action c-upload-list-item__action--abort",onClick:this.abortUploading,title:u,tabIndex:"-1"},r.a.createElement(l.a,{name:"circle-close",extraClasses:"ez-icon--small-medium"}))}},{key:"handleEditBtnClick",value:function(e){e.preventDefault();var t=this.state.struct.Content,n=t._id,o=t.CurrentVersion.Version.VersionInfo.VersionTranslationInfo.Language[0].languageCode,r=t.CurrentVersion.Version.VersionInfo.versionNo;this.contentInfoInput.value=n,this.contentVersionInfoInput.value=n,this.contentVersionNoInput.value=r,window.document.querySelector("#form_subitems_content_edit_language_".concat(o)).checked=!0,this.contentEditBtn.click()}},{key:"renderEditBtn",value:function(){var e=this.state,t=e.uploaded,n=e.aborted,o=e.disallowedSize,i=e.disallowedType,a=e.failed,s=e.uploading;if(!this.props.isUploaded&&(!t||n||o||i||a||s))return null;var u=Translator.trans("edit.label",{},"multi_file_upload");return r.a.createElement("div",{className:"c-upload-list-item__action c-upload-list-item__action--edit",title:u,onClick:this.handleEditBtnClick,tabIndex:"-1"},r.a.createElement(l.a,{name:"edit",extraClasses:"ez-icon--small-medium"}))}},{key:"renderDeleteBtn",value:function(){var e=this.state,t=e.uploaded,n=e.aborted,o=e.disallowedSize,i=e.disallowedType,a=e.failed,s=e.uploading;if(!this.props.isUploaded&&(!t||n||o||i||a||s))return null;var u=Translator.trans("delete.label",{},"multi_file_upload");return r.a.createElement("div",{className:"c-upload-list-item__action c-upload-list-item__action--delete",onClick:this.deleteFile,title:u,tabIndex:"-1"},r.a.createElement(l.a,{name:"trash",extraClasses:"ez-icon--small-medium"}))}},{key:"render",value:function(){return this.state.deleted?null:r.a.createElement("div",{className:"c-upload-list-item"},r.a.createElement("div",{className:"c-upload-list-item__icon-wrapper"},this.renderIcon()),r.a.createElement("div",{className:"c-upload-list-item__meta"},r.a.createElement("div",{className:"c-upload-list-item__name"},this.props.data.file.name),r.a.createElement("div",{className:"c-upload-list-item__size"},this.state.uploaded?this.state.totalSize:"")),r.a.createElement("div",{className:"c-upload-list-item__info"},this.renderErrorMessage(),this.renderSuccessMessage(),this.renderProgressBar()),r.a.createElement("div",{className:"c-upload-list-item__actions"},this.renderAbortBtn(),this.renderEditBtn(),this.renderDeleteBtn()))}}])&&R(t.prototype,n),o&&R(t,o),a}(o.Component);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=M(e);if(t){var r=M(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return L(this,n)}}function L(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}A.propTypes={data:a.a.object.isRequired,onAfterUpload:a.a.func.isRequired,onAfterAbort:a.a.func.isRequired,onAfterDelete:a.a.func.isRequired,isUploaded:a.a.bool.isRequired,createFileStruct:a.a.func.isRequired,publishFile:a.a.func.isRequired,deleteFile:a.a.func.isRequired,checkCanUpload:a.a.func.isRequired,adminUiConfig:a.a.shape({multiFileUpload:a.a.shape({defaultMappings:a.a.arrayOf(a.a.object).isRequired,fallbackContentType:a.a.object.isRequired,locationMappings:a.a.arrayOf(a.a.object).isRequired,maxFileSize:a.a.number.isRequired}).isRequired,token:a.a.string.isRequired,siteaccess:a.a.string.isRequired}).isRequired,parentInfo:a.a.shape({contentTypeIdentifier:a.a.string.isRequired,contentTypeId:a.a.number.isRequired,locationPath:a.a.string.isRequired,language:a.a.string.isRequired}).isRequired,contentCreatePermissionsConfig:a.a.object,contentTypesMap:a.a.object.isRequired,currentLanguage:a.a.string},A.defaultProps={isUploaded:!1,currentLanguage:""};var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(a,e);var t,n,o,i=x(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={itemsToUpload:e.itemsToUpload,items:[]},t}return t=a,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t){var n=t.itemsToUpload.filter((function(t){return!e.itemsToUpload.find((function(e){return e.id===t.id}))}));return{itemsToUpload:[].concat(I(n),I(e.itemsToUpload))}}))}},{key:"componentDidUpdate",value:function(){this.props.onAfterUpload(this.state.items)}},{key:"handleAfterUpload",value:function(e){this.setState((function(t){return{itemsToUpload:t.itemsToUpload.filter((function(t){return t.id!==e.id})),items:[].concat(I(t.items),[e])}}))}},{key:"handleAfterAbort",value:function(e){this.setState((function(t){var n=t.items.filter((function(t){return t.id!==e.id})),o=t.itemsToUpload.filter((function(t){return t.id!==e.id}));return Object.assign({},t,{uploaded:n.length,total:n.length+o.length,itemsToUpload:o,items:n})}))}},{key:"handleAfterDelete",value:function(e){this.setState((function(t){var n=t.items.filter((function(t){return t.id!==e.id})),o=t.itemsToUpload.filter((function(t){return t.id!==e.id}));return Object.assign({},t,{uploaded:n.length,total:n.length+o.length,itemsToUpload:o,items:n})}))}},{key:"renderItemToUpload",value:function(e){return this.renderItem(e,{isUploaded:!1,createFileStruct:this.props.createFileStruct,publishFile:this.props.publishFile,onAfterAbort:this.handleAfterAbort.bind(this),onAfterUpload:this.handleAfterUpload.bind(this),checkCanUpload:this.props.checkCanUpload})}},{key:"renderUploadedItem",value:function(e){return this.renderItem(e,{isUploaded:!0,deleteFile:this.props.deleteFile,onAfterDelete:this.handleAfterDelete.bind(this)})}},{key:"renderItem",value:function(e,t){var n=this.props,o=n.adminUiConfig,i=n.parentInfo,a=n.contentCreatePermissionsConfig,l=n.contentTypesMap,s=n.currentLanguage,u=Object.assign({key:e.id,data:e,adminUiConfig:o,parentInfo:i,contentCreatePermissionsConfig:a,contentTypesMap:l,currentLanguage:s},t);return r.a.createElement(A,u)}},{key:"render",value:function(){var e=this.state,t=e.items,n=e.itemsToUpload,o=t.length,i=o+n.length;return r.a.createElement("div",{className:"c-upload-list"},r.a.createElement("div",{className:"c-upload-list__title"},this.props.uploadedItemsListTitle," (",o,"/",i,")"),r.a.createElement("div",{className:"c-upload-list__items"},n.map(this.renderItemToUpload.bind(this)),t.map(this.renderUploadedItem.bind(this))))}}])&&z(t.prototype,n),o&&z(t,o),a}(o.Component);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function G(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=te(e);if(t){var r=te(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Q(this,n)}}function Q(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ee(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}B.propTypes={itemsToUpload:a.a.arrayOf(a.a.object),onAfterUpload:a.a.func.isRequired,createFileStruct:a.a.func.isRequired,publishFile:a.a.func.isRequired,deleteFile:a.a.func.isRequired,checkCanUpload:a.a.func.isRequired,adminUiConfig:a.a.shape({multiFileUpload:a.a.shape({defaultMappings:a.a.arrayOf(a.a.object).isRequired,fallbackContentType:a.a.object.isRequired,locationMappings:a.a.arrayOf(a.a.object).isRequired,maxFileSize:a.a.number.isRequired}).isRequired,token:a.a.string.isRequired,siteaccess:a.a.string.isRequired}).isRequired,parentInfo:a.a.shape({contentTypeIdentifier:a.a.string.isRequired,contentTypeId:a.a.number.isRequired,locationPath:a.a.string.isRequired,language:a.a.string.isRequired}).isRequired,uploadedItemsListTitle:a.a.string.isRequired,contentCreatePermissionsConfig:a.a.object.isRequired,contentTypesMap:a.a.object.isRequired,currentLanguage:a.a.string},B.defaultProps={itemsToUpload:[],currentLanguage:""};var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(a,e);var t,n,o,i=Y(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).uploadFiles=t.uploadFiles.bind(ee(t)),t.refTooltip=r.a.createRef(),t.state={itemsToUpload:e.itemsToUpload},t}return t=a,(n=[{key:"componentDidMount",value:function(){window.document.body.classList.add("ez-scroll-disabled"),window.eZ.helpers.tooltips.parse(this.refTooltip.current)}},{key:"componentWillUnmount",value:function(){window.document.body.classList.remove("ez-scroll-disabled")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t){var n=t.itemsToUpload.filter((function(t){return!e.itemsToUpload.find((function(e){return e.id===t.id}))}));return{itemsToUpload:[].concat(J(n),J(e.itemsToUpload))}}))}},{key:"uploadFiles",value:function(e){this.setState((function(){return{itemsToUpload:e}}))}},{key:"render",value:function(){var e=this.props,t=H(H({},e),{},{itemsToUpload:this.state.itemsToUpload}),n=Translator.trans("upload_popup.close",{},"multi_file_upload");return r.a.createElement("div",{className:"c-upload-popup",ref:this.refTooltip},r.a.createElement(d,W({title:n},e),r.a.createElement(w,{onDrop:this.uploadFiles,maxFileSize:this.props.adminUiConfig.multiFileUpload.maxFileSize,preventDefaultAction:this.props.preventDefaultAction,processUploadedFiles:this.props.processUploadedFiles}),r.a.createElement(B,t)))}}])&&G(t.prototype,n),o&&G(t,o),a}(o.Component);ne.propTypes={popupTitle:a.a.string.isRequired,visible:a.a.bool,onUpload:a.a.func,onUploadEnd:a.a.func,onUploadFail:a.a.func,onItemEdit:a.a.func,onItemRemove:a.a.func,onClose:a.a.func,itemsToUpload:a.a.array,onAfterUpload:a.a.func.isRequired,createFileStruct:a.a.func.isRequired,publishFile:a.a.func.isRequired,deleteFile:a.a.func.isRequired,checkCanUpload:a.a.func.isRequired,adminUiConfig:a.a.shape({multiFileUpload:a.a.shape({defaultMappings:a.a.arrayOf(a.a.object).isRequired,fallbackContentType:a.a.object.isRequired,locationMappings:a.a.arrayOf(a.a.object).isRequired,maxFileSize:a.a.number.isRequired}).isRequired,token:a.a.string.isRequired,siteaccess:a.a.string.isRequired}).isRequired,parentInfo:a.a.shape({contentTypeIdentifier:a.a.string.isRequired,contentTypeId:a.a.number.isRequired,locationPath:a.a.string.isRequired,language:a.a.string.isRequired}).isRequired,preventDefaultAction:a.a.func.isRequired,processUploadedFiles:a.a.func.isRequired,contentTypesMap:a.a.object.isRequired,currentLanguage:a.a.string},ne.defaultProps={visible:!0,itemsToUpload:[],currentLanguage:""};var oe=function(e,t,n){4===e.readyState&&(0===e.status&&""===e.statusText||(e.status>=400||!e.status?n(e):t(JSON.parse(e.response))))},re=function(e){if(!e.ok)throw Error(e.text());return e},ie=function(e,t,n){var o=this;this.addEventListener("load",(function(){return t({fileReader:o,file:e})}),!1),this.addEventListener("error",(function(){return n()}),!1),this.readAsDataURL(e)},ae=function(e,t){return e.find((function(e){return e.mimeTypes.find((function(e){return e===t.type}))}))},le=function(e,t){return!t||function(e,t){return!!ae(e,t)}(t.mappings,e)},se=function(e,t,n){var o=n.locationMappings.find((function(e){return e.contentTypeIdentifier===t.contentTypeIdentifier})),r=o?o.mappings:n.defaultMappings;return ae(r,e)||n.fallbackContentType},ue=function(e,t){var n=e.parentInfo,o=e.config,r=e.languageCode,i="/api/ezp/v2/content/locations".concat(n.locationPath);i=i.endsWith("/")?i.slice(0,-1):i;var a,l,s,u,c,d=se(t.file,n,o.multiFileUpload);return(a=o,l=d.contentTypeIdentifier,s=a.token,u=a.siteaccess,c=new Request("/api/ezp/v2/content/types?identifier=".concat(l),{method:"GET",headers:{Accept:"application/vnd.ez.api.ContentTypeInfoList+json","X-Siteaccess":u,"X-CSRF-Token":s},credentials:"same-origin",mode:"cors"}),fetch(c).then(re)).then((function(e){return e.json()})).catch((function(){return window.eZ.helpers.notification.showErrorNotification("Cannot get content type by identifier")})).then((function(e){var o={fileName:t.file.name,data:t.fileReader.result.replace(/^.*;base64,/,"")};t.file.type.startsWith("image/")&&(o.alternativeText=t.file.name);var a=[{fieldDefinitionIdentifier:d.nameFieldIdentifier,fieldValue:t.file.name},{fieldDefinitionIdentifier:d.contentFieldIdentifier,fieldValue:o}];return{ContentCreate:{ContentType:{_href:e.ContentTypeInfoList.ContentType[0]._href},mainLanguageCode:r||n.language,LocationCreate:{ParentLocation:{_href:i},sortField:"PATH",sortOrder:"ASC"},Section:null,alwaysAvailable:!0,remoteId:null,modificationDate:(new Date).toISOString(),fields:{field:a}}}})).catch((function(){return window.eZ.helpers.notification.showErrorNotification("Cannot create content structure")}))},ce=function(e,t){var n=e.struct,o=e.token,r=e.siteaccess,i=new XMLHttpRequest,a=JSON.stringify(n),l={Accept:"application/vnd.ez.api.Content+json","Content-Type":"application/vnd.ez.api.ContentCreate+json","X-CSRF-Token":o,"X-Siteaccess":r};return new Promise((function(e,n){if(i.open("POST","/api/ezp/v2/content/objects",!0),i.onreadystatechange=oe.bind(null,i,e,n),t&&Object.keys(t).length){var o=t.upload;o&&Object.keys(o).length&&(i.upload.onabort=o.onabort,i.upload.onerror=n,i.upload.onload=o.onload,i.upload.onprogress=o.onprogress,i.upload.ontimeout=o.ontimeout),i.onerror=n,i.onloadstart=t.onloadstart}for(var r in l)l.hasOwnProperty(r)&&i.setRequestHeader(r,l[r]);i.send(a)}))},de=function(e,t){var n=e.token,o=e.siteaccess;if(!t||!t.hasOwnProperty("Content"))return Promise.reject("Cannot publish content based on an uploaded file");var r=new Request(t.Content.CurrentVersion.Version._href,{method:"POST",headers:{"X-Siteaccess":o,"X-CSRF-Token":n,"X-HTTP-Method-Override":"PUBLISH"},mode:"cors",credentials:"same-origin"});return fetch(r).then(re)};function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ye(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=_e(e);if(t){var r=_e(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ge(this,n)}}function ge(e,t){if(t&&("object"===pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return we(e)}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(a,e);var t,n,o,i=ve(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=!0;return(t=i.call(this,e))._itemsUploaded=[],e.itemsToUpload&&e.itemsToUpload.length||(n=!1),t.handleDropOnWindow=t.handleDropOnWindow.bind(we(t)),t.handleAfterUpload=t.handleAfterUpload.bind(we(t)),t.showUploadPopup=t.showUploadPopup.bind(we(t)),t.hidePopup=t.hidePopup.bind(we(t)),t.processUploadedFiles=t.processUploadedFiles.bind(we(t)),t.setUdwStateOpened=t.setUdwStateOpened.bind(we(t)),t.setUdwStateClosed=t.setUdwStateClosed.bind(we(t)),t.state={udwOpened:!1,popupVisible:n,itemsToUpload:e.itemsToUpload,allowDropOnWindow:!0,uploadDisabled:Object.values(e.contentCreatePermissionsConfig).every((function(e){return!e}))},t}return t=a,(n=[{key:"componentDidMount",value:function(){this.manageDropEvent(),window.document.body.addEventListener("ez-udw-opened",this.setUdwStateOpened,!1),window.document.body.addEventListener("ez-udw-closed",this.setUdwStateClosed,!1)}},{key:"componentDidUpdate",value:function(){this.manageDropEvent()}},{key:"componentWillUnmount",value:function(){window.document.body.removeEventListener("ez-udw-opened",this.setUdwStateOpened,!1),window.document.body.removeEventListener("ez-udw-closed",this.setUdwStateClosed,!1)}},{key:"setUdwStateOpened",value:function(){this.setState({udwOpened:!0})}},{key:"setUdwStateClosed",value:function(){this.setState({udwOpened:!1})}},{key:"manageDropEvent",value:function(){var e=this.state,t=e.uploadDisabled,n=e.popupVisible,o=e.itemsToUpload;t||n||o.length||(window.addEventListener("drop",this.handleDropOnWindow,!1),window.addEventListener("dragover",this.preventDefaultAction,!1))}},{key:"hidePopup",value:function(){this.setState((function(e){return Object.assign({},e,{popupVisible:!1})})),this.props.onPopupClose(this._itemsUploaded)}},{key:"showUploadPopup",value:function(){this.setState((function(e){return Object.assign({},e,{popupVisible:!0,itemsToUpload:[]})}))}},{key:"handleAfterUpload",value:function(e){this._itemsUploaded=e}},{key:"handleDropOnWindow",value:function(e){this.preventDefaultAction(e);var t=this.processUploadedFiles(e);this.state.allowDropOnWindow&&t.length&&!this.state.udwOpened&&(window.removeEventListener("drop",this.handleDropOnWindow,!1),window.removeEventListener("dragover",this.preventDefaultAction,!1),this.setState((function(e){return Object.assign({},e,{itemsToUpload:t,popupVisible:!0,allowDropOnWindow:!1})})))}},{key:"extractDroppedFilesList",value:function(e){return e.nativeEvent?e.nativeEvent.dataTransfer||e.nativeEvent.target:e.dataTransfer}},{key:"processUploadedFiles",value:function(e){var t=this.extractDroppedFilesList(e);return Array.from(t.files).map((function(e){return{id:Math.floor(Math.random()*Date.now()),file:e}}))}},{key:"preventDefaultAction",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"renderBtn",value:function(){if(!this.props.withUploadButton)return null;var e=this.state.uploadDisabled,t={className:"m-mfu__btn--upload",title:Translator.trans("multi_file_upload_open_btn.label",{},"multi_file_upload"),onClick:this.showUploadPopup,type:"button"};return e&&(delete t.onClick,t.disabled=!0),r.a.createElement("button",t,r.a.createElement(l.a,{name:"upload",extraClasses:"ez-icon--base-dark ez-icon--small-medium"}))}},{key:"renderPopup",value:function(){if(!this.state.popupVisible)return null;var e=he(he({},this.props),{},{visible:!0,onClose:this.hidePopup,itemsToUpload:this.state.itemsToUpload,onAfterUpload:this.handleAfterUpload,preventDefaultAction:this.preventDefaultAction,processUploadedFiles:this.processUploadedFiles});return r.a.createElement(ne,e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"m-mfu"},this.renderBtn(),this.renderPopup())}}])&&ye(t.prototype,n),o&&ye(t,o),a}(o.Component);eZ.addConfig("modules.MultiFileUpload",Te),Te.propTypes={adminUiConfig:a.a.shape({multiFileUpload:a.a.shape({defaultMappings:a.a.arrayOf(a.a.object).isRequired,fallbackContentType:a.a.object.isRequired,locationMappings:a.a.arrayOf(a.a.object).isRequired,maxFileSize:a.a.number.isRequired}).isRequired,token:a.a.string.isRequired,siteaccess:a.a.string.isRequired}).isRequired,parentInfo:a.a.shape({contentTypeIdentifier:a.a.string.isRequired,contentTypeId:a.a.number.isRequired,locationPath:a.a.string.isRequired,language:a.a.string.isRequired}).isRequired,checkCanUpload:a.a.func,createFileStruct:a.a.func,deleteFile:a.a.func,onPopupClose:a.a.func,publishFile:a.a.func,itemsToUpload:a.a.array,withUploadButton:a.a.bool,contentCreatePermissionsConfig:a.a.object,contentTypesMap:a.a.object.isRequired,currentLanguage:a.a.string},Te.defaultProps={checkCanUpload:function(e,t,n,o){var r=n.locationMappings.find((function(e){return e.contentTypeIdentifier===t.contentTypeIdentifier}));return function(e,t,n){if(!n.hasOwnProperty("contentCreatePermissionsConfig")||!n.contentCreatePermissionsConfig)return!0;var o=se(e,t,n);return n.contentCreatePermissionsConfig[o.contentTypeIdentifier]}(e,t,n)?le(e,r)?!(e.size>n.maxFileSize)||(o.fileSizeNotAllowedCallback(),!1):(o.fileTypeNotAllowedCallback(),!1):(o.contentTypeNotAllowedCallback(),!1)},createFileStruct:function(e,t){return new Promise(ie.bind(new FileReader,e)).then(ue.bind(null,t))},deleteFile:function(e,t,n){var o=e.token,r=e.siteaccess,i=new Request(t.Content._href,{method:"DELETE",headers:{"X-Siteaccess":r,"X-CSRF-Token":o},mode:"cors",credentials:"same-origin"});fetch(i).then(re).then(n).catch((function(){return window.eZ.helpers.notification.showErrorNotification("An error occurred while deleting a file")}))},onPopupClose:function(){},publishFile:function(e,t,n){ce(e,t).then(de.bind(null,e)).then(n).catch((function(){return window.eZ.helpers.notification.showErrorNotification("An error occurred while publishing a file")}))},itemsToUpload:[],withUploadButton:!0,currentLanguage:""}},rf6O:function(e,t){e.exports=PropTypes},uHg5:function(e,t,n){"use strict";var o=n("cDcd"),r=n.n(o),i=n("rf6O"),a=n.n(i),l=function(e){var t=e.customPath?e.customPath:window.eZ.helpers.icon.getIconPath(e.name),n="ez-icon";return e.extraClasses&&(n="".concat(n," ").concat(e.extraClasses)),r.a.createElement("svg",{className:n},r.a.createElement("use",{xlinkHref:t}))};l.propTypes={extraClasses:a.a.string,name:a.a.string,customPath:a.a.string},l.defaultProps={customPath:null,name:null,extraClasses:null},t.a=l}},[[34,"runtime"]]]);