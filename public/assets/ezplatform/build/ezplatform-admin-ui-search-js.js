(window.webpackJsonp=window.webpackJsonp||[]).push([["ezplatform-admin-ui-search-js"],{16:function(e,t,n){n("s7Kb"),n("aaU0"),n("4jxX"),n("4cba"),n("cKz5"),e.exports=n("Ib1U")},"4cba":function(e,t){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,i,a,c,s,l,u,d,f,p,v,y,m,h,g,w;window,o=window.document,i=window.eZ,a=window.React,c=window.ReactDOM,s=window.Translator,l=o.querySelectorAll(".ez-btn--udw-select-location"),u=o.getElementById("react-udw"),d=o.querySelector('meta[name="CSRF-Token"]').content,f=o.querySelector('meta[name="SiteAccess"]').content,p=function(e,t){var n=o.querySelector(e.dataset.contentBreadcrumbsSelector);e.hidden=t,n&&(n.hidden=!t)},v=function(e,t){var n,r,a,c,l,u=o.querySelector(e.dataset.locationPathInputSelector),p=o.querySelector(e.dataset.contentBreadcrumbsSelector),v=p.querySelector(".ez-tag__content"),y=p.querySelector(".ez-tag__spinner");u.value=t,u.dispatchEvent(new Event("change")),v&&y&&(t?(y.hidden=!1,n=function(e){var t=e.split("/").filter((function(e){return e}));return t.splice(1,t.length-1)}(t),r=function(e){v.innerHTML=e.View.Result.searchHits.searchHit.map((function(e){return e.value.Location.ContentInfo.Content.TranslatedName})).join(" / "),y.hidden=!0,v.hidden=!1},a=JSON.stringify({ViewInput:{identifier:"udw-locations-by-path-string-".concat(n.join("-")),public:!1,LocationQuery:{FacetBuilders:{},SortClauses:{SectionIdentifier:"ascending"},Filter:{LocationIdCriterion:n.join(",")},limit:50,offset:0}}}),c=new Request("/api/ezp/v2/views",{method:"POST",headers:{Accept:"application/vnd.ez.api.View+json; version=1.1","Content-Type":"application/vnd.ez.api.ViewInput+json; version=1.1","X-Requested-With":"XMLHttpRequest","X-Siteaccess":f,"X-CSRF-Token":d},body:a,mode:"same-origin",credentials:"same-origin"}),l=s.trans("select_location.error",{idList:n.join(",")},"universal_discovery_widget"),fetch(c).then(i.helpers.request.getJsonFromResponse).then(r).catch((function(){return i.helpers.notification.showErrorNotification(l)}))):(v.innerHTML="",v.hidden=!0))},y=function(){return c.unmountComponentAtNode(u)},m=function(e,t){y();var n=t[0].pathString;v(e,n),p(e,!!n)},h=function(){return y()},g=function(e){e.preventDefault();var t=JSON.parse(e.currentTarget.dataset.udwConfig);c.render(a.createElement(i.modules.UniversalDiscovery,function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({onConfirm:m.bind(null,e.currentTarget),onCancel:h,title:e.currentTarget.dataset.universalDiscoveryTitle,multiple:!1},t)),u)},w=function(e){v(e,""),p(e,!1)},l.forEach((function(e){e.addEventListener("click",g,!1);var t=o.querySelector(e.dataset.contentBreadcrumbsSelector).querySelector(".ez-tag__remove-btn");t&&t.addEventListener("click",w.bind(null,e),!1)}))},"4jxX":function(e,t){var n;window,(n=document.querySelector(".ez-search-form__language-selector"))&&n.addEventListener("change",(function(e){e.target.closest("form").submit()}),!1)},Ib1U:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r,o,i,a;r=window,o=document,i=window.eZ,a=function(){"use strict";function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.toggler=t.container.querySelector(".ez-btn--translations-list-toggler"),this.translationsList=t.container.querySelector(".ez-translation-selector__list-wrapper"),this.hideTranslationsList=this.hideTranslationsList.bind(this),this.showTranslationsList=this.showTranslationsList.bind(this),this.setPosition=this.setPosition.bind(this)}var t,a,c;return t=e,(a=[{key:"setPosition",value:function(){var e=parseInt(this.translationsList.dataset.topOffset,10),t=window.scrollY>e?0:e-window.scrollY,n=window.scrollY>e?window.innerHeight:window.innerHeight+window.scrollY-e;this.translationsList.style.top="".concat(t,"px"),this.translationsList.style.height="".concat(n,"px")}},{key:"hideTranslationsList",value:function(e){var t=e.target.closest(".ez-translation-selector"),n=t&&t.isSameNode(this.container),i=e.target.closest(".ez-modal--version-draft-conflict");n||i||(this.translationsList.classList.add("ez-translation-selector__list-wrapper--hidden"),r.removeEventListener("scroll",this.setPosition,!1),o.removeEventListener("click",this.hideTranslationsList,!1))}},{key:"showTranslationsList",value:function(){this.translationsList.classList.remove("ez-translation-selector__list-wrapper--hidden"),this.setPosition(),r.addEventListener("scroll",this.setPosition,!1),o.addEventListener("click",this.hideTranslationsList,!1),i.helpers.tooltips.hideAll()}},{key:"init",value:function(){this.toggler.addEventListener("click",this.showTranslationsList,!1)}}])&&n(t.prototype,a),c&&n(t,c),e}(),o.querySelectorAll(".ez-translation-selector").forEach((function(e){new a({container:e}).init()}))},aaU0:function(e,t){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t,n,o,a){var c,s=t.querySelector('meta[name="CSRF-Token"]').content,l=t.querySelector('meta[name="SiteAccess"]').content,u=t.querySelector(".ez-btn--filter"),d=t.querySelector(".ez-filters"),f=t.querySelector(".ez-search-criteria-tags"),p=d.querySelector(".ez-btn-clear"),v=d.querySelector(".ez-btn-apply"),y=t.querySelectorAll(".ez-filters__range-select"),m=t.querySelector(".ez-content-type-selector"),h=t.querySelector(".ez-filters__item--content-type .ez-filters__select"),g=t.querySelector(".ez-filters__item--section .ez-filters__select"),w=t.querySelector(".ez-filters__item--modified .ez-filters__select"),S=t.querySelector(".ez-filters__item--modified .ez-filters__range-select"),b=t.querySelector(".ez-filters__item--created .ez-filters__select"),_=t.querySelector(".ez-filters__item--created .ez-filters__range-select"),z=t.querySelector(".ez-filters__item--creator .ez-filters__input"),q=t.querySelector("#search_creator"),L=t.querySelector(".ez-filters__item--creator .ez-filters__user-list"),E=t.querySelector(".ez-filters__item--creator .ez-icon--reset"),O=t.querySelectorAll(".ez-content-type-selector__group-title"),T=t.querySelectorAll('.ez-content-type-selector__item [type="checkbox"]'),j=t.querySelector("#search_subtree"),k={mode:"range",locale:{rangeSeparator:" - "},formatDate:function(e){return n.helpers.timezone.formatShortDateTime(e,null,n.adminUiConfig.dateFormat.shortDate)}},A=function(){var e=h.querySelector("option"),n=e.innerHTML!==e.dataset.default,r=!!g&&!!g.value,o=!!q.value,i=!!j.value.trim().length,a=!!w.value,c=!!b.value;if("custom_range"===w.value){var s=S.closest(".".concat("ez-filters__range-wrapper")).dataset,l=s.periodSelector,u=s.endSelector,d=t.querySelector(l).value,f=t.querySelector(u).value;d&&f||(a=!1)}if("custom_range"===b.value){var p=_.closest(".".concat("ez-filters__range-wrapper")).dataset,y=p.periodSelector,m=p.endSelector,z=t.querySelector(y).value,L=t.querySelector(m).value;z&&L||(c=!1)}var E=n||r||a||c||o||i;v[E?"removeAttribute":"setAttribute"]("disabled",!E)},C=function(e){e.target.closest(".ez-content-type-selector")||e.target.closest(".ez-filters__select--content-type")||P()},P=function(e){e.preventDefault();var n=m.classList.contains("ez-content-type-selector--collapsed")?"addEventListener":"removeEventListener";m.classList.toggle("ez-content-type-selector--collapsed"),t.querySelector("body")[n]("click",C,!1)},I=function(e){var n=t.querySelector(e.target.dataset.targetSelector);if("custom_range"!==e.target.value)return t.querySelector(n.dataset.periodSelector).value=e.target.value,t.querySelector(n.dataset.endSelector).value="",n.classList.remove("ez-filters__range-wrapper--visible"),void A();n.classList.add("ez-filters__range-wrapper--visible")},D=function(e){e.preventDefault(),e.currentTarget.closest(".ez-content-type-selector__group").classList.toggle("ez-content-type-selector__group--collapsed")},R=function(){var e=i(T).filter((function(e){return e.checked})).map((function(e){return e.dataset.name})).join(", "),t=h[0],n=t.dataset.default;t.innerHTML=e||n,A()},x=function(e,n,r){var o=r.input.closest(".ez-filters__range-wrapper");if(2===e.length){var i=H(e[0]),a=H(e[1]),c=(a-i)/86400;t.querySelector(o.dataset.periodSelector).value="P0Y0M".concat(c,"D"),t.querySelector(o.dataset.endSelector).value=a}A()},H=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));return t=Math.floor(t.getTime()/1e3)},F=function(e){var t=JSON.stringify({ViewInput:{identifier:"find-user-by-name-".concat(e),public:!1,ContentQuery:{FacetBuilders:{},SortClauses:{},Query:{FullTextCriterion:"".concat(e,"*"),ContentTypeIdentifierCriterion:z.dataset.contentTypeIdentifiers.split(",")},limit:50,offset:0}}}),n=new Request("/api/ezp/v2/views",{method:"POST",headers:{Accept:"application/vnd.ez.api.View+json; version=1.1","Content-Type":"application/vnd.ez.api.ViewInput+json; version=1.1","X-Siteaccess":l,"X-CSRF-Token":s},body:t,mode:"same-origin",credentials:"same-origin"});fetch(n).then((function(e){return e.json()})).then(M)},M=function(e){var n=e.View.Result.searchHits.searchHit.reduce((function(e,t){return e+(n=t.value.Content,'<li data-id="'.concat(n._id,'" data-name="').concat(n.TranslatedName,'" class="ez-filters__user-item">').concat(n.TranslatedName,"</li>"));var n}),""),r=n?"addEventListener":"removeEventListener";L.innerHTML=n,L.classList.remove("ez-filters__user-list--hidden"),t.querySelector("body")[r]("click",J,!1)},N=function(){q.value="",z.value="",z.removeAttribute("disabled"),A()},J=function e(n){n.target.closest(".ez-filters__item--creator")||(z.value="",L.classList.add("ez-filters__user-list--hidden"),t.querySelector("body").removeEventListener("click",e,!1))},U=function(e){var t=e.currentTarget.closest(".ez-tag"),r=e.currentTarget.closest("form");n.helpers.tooltips.hideAll(),t.remove(),r.submit()},V=function(e,n){var r=t.querySelector(n),o=r.parentNode.querySelector(".ez-filters__select"),i=t.querySelector(r.dataset.periodSelector),a=t.querySelector(r.dataset.endSelector);o[0].selected=!0,i.value="",a.vaue="",r.classList.remove("ez-filters__range-wrapper--visible"),U(e)},X={section:function(e){return function(e){g[0].selected=!0,U(e)}(e)},subtree:function(e){return function(e){t.querySelector("#search_subtree-content-breadcrumbs").hidden=!0,t.querySelector(".ez-btn--udw-select-location").hidden=!1,j.value="",U(e)}(e)},creator:function(e){return function(e){N(),U(e)}(e)},"content-types":function(e){return function(e){t.querySelector(e.currentTarget.dataset.targetSelector).checked=!1,U(e)}(e)},"last-modified":function(e){return V(e,w.dataset.targetSelector)},"last-created":function(e){return V(e,b.dataset.targetSelector)}};y.forEach((function(e){var t=e.dataset,n=t.start,o=t.end,i=n&&o?[n,o]:[];a(e,r(r({},k),{},{onChange:x,defaultDate:i}))})),R(),p.addEventListener("click",(function(e){e.preventDefault();var n=h.querySelector("option"),r=n.dataset.default,o=t.querySelector(w.dataset.targetSelector),i=t.querySelector(b.dataset.targetSelector),a=t.querySelector(o.dataset.periodSelector),c=t.querySelector(o.dataset.endSelector),s=t.querySelector(i.dataset.periodSelector),l=t.querySelector(i.dataset.endSelector);n.innerHTML=r,T.forEach((function(e){e.removeAttribute("checked"),e.checked=!1})),g&&(g[0].selected=!0),w[0].selected=!0,b[0].selected=!0,w.querySelector("option").selected=!0,a.value="",c.value="",s.value="",l.value="",j.value="",N(),e.target.closest("form").submit()}),!1),u.addEventListener("click",(function(e){e.preventDefault(),d.classList.toggle("ez-filters--collapsed"),f.classList.toggle("ez-search-criteria-tags--collapsed")}),!1),h.addEventListener("mousedown",P,!1),g&&g.addEventListener("change",A,!1);var B=function(e){t.querySelectorAll(".ez-tag__remove-btn--".concat(e)).forEach((function(t){return t.addEventListener("click",X[e],!1)}))};for(var Y in X)B(Y);j.addEventListener("change",A,!1),w.addEventListener("change",I,!1),b.addEventListener("change",I,!1),z.addEventListener("keyup",(function(e){var n=e.target.value.trim();window.clearTimeout(c),n.length>2?c=window.setTimeout(F.bind(null,n),200):(L.classList.add("ez-filters__user-list--hidden"),t.querySelector("body").removeEventListener("click",J,!1))}),!1),L.addEventListener("click",(function(e){q.value=e.target.dataset.id,L.classList.add("ez-filters__user-list--hidden"),z.value=e.target.dataset.name,z.setAttribute("disabled",!0),t.querySelector("body").removeEventListener("click",J,!1),A()}),!1),E.addEventListener("click",N,!1),O.forEach((function(e){return e.addEventListener("click",D,!1)})),T.forEach((function(e){return e.addEventListener("change",R,!1)}))}(window,window.document,window.eZ,window.jQuery,window.flatpickr)},cKz5:function(e,t){var n,r,o,i,a,c,s,l,u,d,f,p,v,y,m,h,g,w;window,n=window.document,r=window.React,o=window.ReactDOM,i=window.eZ,a=window.localStorage,c=n.querySelector('meta[name="CSRF-Token"]').content,s=n.querySelector('meta[name="SiteAccess"]').content,l=n.querySelector(".ez-content-tree-container"),u=n.querySelector(".ez-content-tree-container__wrapper"),d=n.querySelector(".ez-btn--toggle-content-tree"),f=l.dataset,p=f.currentLocationPath,v=f.treeRootLocationId,y=window.eZ.helpers.user.getId(),m=null,h=function(){var e=Math.min(window.innerHeight-l.getBoundingClientRect().top,window.innerHeight);u.style.height="".concat(e,"px")},g=function(){m&&cancelAnimationFrame(m),m=requestAnimationFrame(h)},w=function(e,t){var n=JSON.parse(a.getItem("ez-content-tree-expanded"));n instanceof Object||(n={}),n[e]=t,a.setItem("ez-content-tree-expanded",JSON.stringify(n))},o.render(r.createElement(i.modules.ContentTree,{userId:y,currentLocationPath:p,rootLocationId:parseInt(v,10),restInfo:{token:c,siteaccess:s}}),u),d.addEventListener("click",(function(){n.activeElement.blur(),l.classList.toggle("ez-content-tree-container--expanded"),l.classList.add("ez-content-tree-container--animate"),d.classList.toggle("ez-btn--content-tree-expanded"),h();var e=l.classList.contains("ez-content-tree-container--expanded");w(y,e),i.helpers.tooltips.hideAll()}),!1),function(e){var t=JSON.parse(a.getItem("ez-content-tree-expanded"));return t&&t[e]}(y)&&(l.classList.add("ez-content-tree-container--expanded"),d.classList.add("ez-btn--content-tree-expanded")),h(),n.addEventListener("scroll",g,{capture:!1,passive:!0}),window.addEventListener("resize",g,{capture:!1,passive:!0})},s7Kb:function(e,t){var n,r,o,i,a,c,s;window,n=window.document,r=window.jQuery,o=window.eZ,i=window.Translator,a=window.Routing,c=o.helpers.notification.showErrorNotification,s=function(e){var t=n.querySelector("form.ez-edit-content-form"),s=t.name,l=e.currentTarget.dataset,u=l.contentId,d=l.versionNo,f=l.languageCode,p=t.querySelector('input[name="'.concat(s,'[content_info]"]')),v=t.querySelector('input[name="'.concat(s,'[version_info][content_info]"]')),y=t.querySelector('input[name="'.concat(s,'[version_info][version_no]"]')),m=t.querySelector("#".concat(s,"_language_").concat(f)),h=a.generate("ezplatform.version_draft.has_no_conflict",{contentId:u,languageCode:f}),g=a.generate("ezplatform.content.check_edit_permission",{contentId:u,languageCode:f}),w=i.trans("content.edit.permission.error",{},"content"),S=function(){p.value=u,v.value=u,y.value=void 0!==d?d:null,m.checked=!0,t.submit()},b=function(){S(),r("#version-draft-conflict-modal").modal("hide")},_=function(e){var t=n.querySelector(".ez-modal-wrapper");t.innerHTML=e;var o=t.querySelector(".ez-btn--add-draft");o&&o.addEventListener("click",b,!1),t.querySelectorAll(".ez-btn--prevented").forEach((function(e){return e.addEventListener("click",(function(e){return e.preventDefault()}),!1)})),r("#version-draft-conflict-modal").modal("show")};e.preventDefault(),fetch(g,{mode:"same-origin",credentials:"same-origin"}).then(o.helpers.request.getJsonFromResponse).then((function(e){if(e.canEdit)return fetch(h,{mode:"same-origin",credentials:"same-origin"});throw new Error(w)})).then((function(e){409===e.status?e.text().then(_):403===e.status?e.text().then(c):200===e.status&&S()})).catch(c)},n.querySelectorAll(".ez-btn--content-edit").forEach((function(e){return e.addEventListener("click",s,!1)}))}},[[16,"runtime"]]]);