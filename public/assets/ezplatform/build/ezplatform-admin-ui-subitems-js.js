(window.webpackJsonp=window.webpackJsonp||[]).push([["ezplatform-admin-ui-subitems-js"],{35:function(e,t,n){e.exports=n("K4Cz")},AJkD:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a=function e(t){var n;if("object"!==r(t))return t;if(!t)return t;if("[object Array]"===Object.prototype.toString.apply(t)){n=[];for(var i=0;i<t.length;i++)n[i]=e(t[i]);return n}for(var a in n={},t)t.hasOwnProperty(a)&&(n[a]=e(t[a]));return n}},K4Cz:function(e,t,n){"use strict";n.r(t),n.d(t,"ASCENDING_SORT_ORDER",(function(){return kt})),n.d(t,"default",(function(){return Ct}));var r=n("cDcd"),i=n.n(r),a=n("faye"),o=n.n(a),l=n("rf6O"),s=n.n(l),c=n("uHg5"),u=function(e){var t=e.id,n=e.icon,r=e.title,a=e.onClick,o=e.activeView,l=e.isDisabled,s={id:t,onClick:function(){return a(t)},className:"c-view-switcher-btn",title:r,tabIndex:"-1"},u={name:n,extraClasses:"ez-icon--base-dark ez-icon--small"};return o===t&&(s.className="".concat("c-view-switcher-btn"," ").concat("c-view-switcher-btn","--active"),u.extraClasses="ez-icon--light ez-icon--small"),l&&(s.className="".concat(s.className," ").concat("c-view-switcher-btn","--disabled")),i.a.createElement("div",s,i.a.createElement(c.a,u))};u.propTypes={id:s.a.string.isRequired,activeView:s.a.string.isRequired,isDisabled:s.a.bool.isRequired,icon:s.a.string.isRequired,title:s.a.string.isRequired,onClick:s.a.func.isRequired};var d=u,f=function(e){var t=e.onViewChange,n=e.activeView,r=e.isDisabled,a="c-view-switcher";r&&(a="".concat(a," ").concat(a,"--disabled"));var o=Translator.trans("switch_to_list_view.btn.label",{},"sub_items"),l=Translator.trans("switch_to_grid_view.btn.label",{},"sub_items");return i.a.createElement("div",{className:a},i.a.createElement(d,{id:"table",icon:"view-list",title:o,onClick:t,activeView:n,isDisabled:r}),i.a.createElement(d,{id:"grid",icon:"view-grid",title:l,onClick:t,activeView:n,isDisabled:r}))};f.propTypes={onViewChange:s.a.func.isRequired,activeView:s.a.string.isRequired,isDisabled:s.a.bool.isRequired};var m=f;function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var i=O(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=window.eZ.helpers.timezone.formatShortDateTime,I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(l,e);var t,n,a,o=w(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).storePriorityValue=t.storePriorityValue.bind(S(t)),t.enablePriorityInput=t.enablePriorityInput.bind(S(t)),t.handleSubmit=t.handleSubmit.bind(S(t)),t.handleCancel=t.handleCancel.bind(S(t)),t.handleEdit=t.handleEdit.bind(S(t)),t.onSelectCheckboxChange=t.onSelectCheckboxChange.bind(S(t)),t.setPriorityInputRef=t.setPriorityInputRef.bind(S(t)),t.getLanguageSelectorData=t.getLanguageSelectorData.bind(S(t)),t.editItem=t.editItem.bind(S(t)),t._refPriorityInput=null,t.state={priorityValue:e.item.priority,priorityInputEnabled:!1,startingPriorityValue:e.item.priority},t.columnsRenderers={name:t.renderNameCell.bind(S(t)),modified:t.renderModifiedCell.bind(S(t)),"content-type":t.renderContentTypeCell.bind(S(t)),priority:t.renderPriorityCell.bind(S(t)),translations:t.renderTranslationsCell.bind(S(t)),visibility:t.renderVisibilityCell.bind(S(t)),creator:t.renderCreatorCell.bind(S(t)),contributor:t.renderContributorCell.bind(S(t)),published:t.renderPublishedCell.bind(S(t)),section:t.renderSectionCell.bind(S(t)),"location-id":t.renderLocationIdCell.bind(S(t)),"location-remote-id":t.renderLocationRemoteIdCell.bind(S(t)),"object-id":t.renderObjectIdCell.bind(S(t)),"object-remote-id":t.renderObjectRemoteIdCell.bind(S(t))},t}return t=l,(n=[{key:"enablePriorityInput",value:function(){this.setState((function(){return{priorityInputEnabled:!0}}))}},{key:"handleCancel",value:function(e){e.preventDefault(),this.setState((function(e){return{priorityInputEnabled:!1,priorityValue:e.startingPriorityValue}}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.onItemPriorityUpdate({pathString:this.props.item.pathString,priority:this._refPriorityInput.value}),this.setState((function(){return{priorityValue:t._refPriorityInput.value,priorityInputEnabled:!1,startingPriorityValue:t._refPriorityInput.value}}))}},{key:"storePriorityValue",value:function(e){var t=this;e.preventDefault(),this.setState((function(){return{priorityValue:t._refPriorityInput.value}}))}},{key:"editItem",value:function(e){var t=this.props.item.content._info,n=t.id,r=t.currentVersion;this.props.handleEditItem({_id:n,mainLanguageCode:e,CurrentVersion:{Version:{VersionInfo:{versionNo:r.versionNumber}}}},this.props.item.id)}},{key:"handleEdit",value:function(){var e=this.props.item.content._info,t=e.mainLanguageCode;e.currentVersion.languageCodes.length>1?(this.props.setLanguageSelectorData(this.getLanguageSelectorData()),this.props.openLanguageSelector()):this.editItem(t)}},{key:"setPriorityInputRef",value:function(e){this._refPriorityInput=e}},{key:"renderNameCell",value:function(){var e=this.props,t=e.item,n=e.generateLink,r=t.content._name,a={className:"c-table-view-item__link c-table-view-item__text-wrapper",href:n(t.id,t.content._info.id)};return i.a.createElement("a",a,r)}},{key:"renderPriorityCell",value:function(){var e={type:"number",defaultValue:this.state.priorityValue,onChange:this.storePriorityValue},t={},n={};return this.state.priorityInputEnabled||(e.readOnly=!0,delete e.defaultValue,e.value=this.state.priorityValue,t.onClick=this.enablePriorityInput,n.hidden=!0),i.a.createElement("div",v({className:"c-table-view-item__priority-wrapper"},t),i.a.createElement("div",{className:"c-table-view-item__inner-wrapper c-table-view-item__inner-wrapper--input"},i.a.createElement("input",v({className:"c-table-view-item__priority-value ez-input ez-input--text",ref:this.setPriorityInputRef},e))),i.a.createElement("div",v({className:"c-table-view-item__priority-actions"},n),i.a.createElement("button",{type:"button",className:"c-table-view-item__btn c-table-view-item__btn--submit",onClick:this.handleSubmit},i.a.createElement(c.a,{name:"checkmark",extraClasses:"ez-icon--small ez-icon--light"})),i.a.createElement("button",{type:"button",className:"c-table-view-item__btn c-table-view-item__btn--cancel",onClick:this.handleCancel},i.a.createElement(c.a,{name:"discard",extraClasses:"ez-icon--small ez-icon--light"}))))}},{key:"renderModifiedCell",value:function(){var e=this.props.item.content._info.modificationDate;return i.a.createElement("div",{className:"c-table-view-item__text-wrapper"},P(new Date(1e3*e.timestamp)))}},{key:"renderPublishedCell",value:function(){var e=this.props.item.content._info.publishedDate;return i.a.createElement("div",{className:"c-table-view-item__text-wrapper"},P(new Date(1e3*e.timestamp)))}},{key:"renderContentTypeCell",value:function(){var e=this.props.item.content._info.contentType.name;return i.a.createElement("div",{className:"c-table-view-item__text-wrapper"},e)}},{key:"renderTranslationsCell",value:function(){var e=this.props,t=e.item,n=e.languages;return i.a.createElement(r.Fragment,null,t.content._info.currentVersion.languageCodes.map((function(e){return i.a.createElement("span",{key:e,className:"c-table-view-item__translation"},n.mappings[e].name)})))}},{key:"renderVisibilityCell",value:function(){var e=this.props.item,t=e.invisible,n=e.hidden,r=Translator.trans("items_table.row.visible.label",{},"sub_items"),a=Translator.trans("items_table.row.not_visible.label",{},"sub_items"),o=t||n?a:r;return i.a.createElement("div",{className:"c-table-view-item__text-wrapper"},o)}},{key:"renderCreatorCell",value:function(){return i.a.createElement("div",{className:"c-table-view-item__text-wrapper"},this.getName(this.props.item.content._info.owner))}},{key:"renderContributorCell",value:function(){return i.a.createElement("div",{className:"c-table-view-item__text-wrapper"},this.getName(this.props.item.content._info.currentVersion.creator))}},{key:"renderSectionCell",value:function(){return i.a.createElement("div",{className:"c-table-view-item__text-wrapper"},this.getName(this.props.item.content._info.section))}},{key:"renderLocationIdCell",value:function(){return i.a.createElement("div",{className:"c-table-view-item__text-wrapper"},this.props.item.id)}},{key:"renderLocationRemoteIdCell",value:function(){return i.a.createElement("div",{className:"c-table-view-item__text-wrapper"},this.props.item.remoteId)}},{key:"renderObjectIdCell",value:function(){return i.a.createElement("div",{className:"c-table-view-item__text-wrapper"},this.props.item.content._info.id)}},{key:"renderObjectRemoteIdCell",value:function(){return i.a.createElement("div",{className:"c-table-view-item__text-wrapper"},this.props.item.content._info.remoteId)}},{key:"renderBasicColumns",value:function(){var e=this,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:!0},this.props.columnsVisibility);return Object.entries(t).map((function(t){var n=b(t,2),r=n[0];return n[1]?i.a.createElement("td",{key:r,className:"c-table-view-item__cell c-table-view-item__cell--".concat(r)},e.columnsRenderers[r]()):null}))}},{key:"getName",value:function(e){return e?e.name:""}},{key:"onSelectCheckboxChange",value:function(e){var t=this.props,n=t.item;(0,t.onItemSelect)(n,e.target.checked)}},{key:"getLanguageSelectorData",value:function(){var e=this.props.languages.mappings,t=this.props.item.content._info.currentVersion.languageCodes,n=Translator.trans("languages.modal.label",{},"sub_items"),r=t.map((function(t){return{label:e[t].name,value:t}}));return{languageItems:r,label:"".concat(n," (").concat(r.length,")"),handleItemChange:this.editItem}}},{key:"componentDidMount",value:function(){eZ.helpers.table.parseCheckbox(".c-table-view-item__cell .ez-input--checkbox","c-table-view-item--active")}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.isSelected,r=Translator.trans("edit_item_btn.label",{},"sub_items"),a=t.content._info.contentType.identifier,o=eZ.helpers.contentType.getContentTypeIconUrl(a);return i.a.createElement("tr",{className:"c-table-view-item"},i.a.createElement("td",{className:"c-table-view-item__cell c-table-view-item__cell--checkbox"},i.a.createElement("input",{type:"checkbox",class:"ez-input ez-input--checkbox",checked:n,onChange:this.onSelectCheckboxChange})),i.a.createElement("td",{className:"c-table-view-item__cell c-table-view-item__cell--icon"},i.a.createElement(c.a,{customPath:o,extraClasses:"ez-icon--small-medium"})),this.renderBasicColumns(),i.a.createElement("td",{className:"c-table-view-item__cell c-table-view-item__cell--actions"},i.a.createElement("span",{title:r,"data-extra-classes":"c-table-view-item__tooltip",onClick:this.handleEdit,className:"c-table-view-item__btn c-table-view-item__btn--edit",tabIndex:-1},i.a.createElement("div",{className:"c-table-view-item__btn-inner"},i.a.createElement(c.a,{name:"edit",extraClasses:"ez-icon--small-medium"})))))}}])&&_(t.prototype,n),a&&_(t,a),l}(r.PureComponent);I.propTypes={item:s.a.object.isRequired,isSelected:s.a.bool.isRequired,onItemPriorityUpdate:s.a.func.isRequired,handleEditItem:s.a.func.isRequired,generateLink:s.a.func.isRequired,languages:s.a.object.isRequired,onItemSelect:s.a.func.isRequired,columnsVisibility:s.a.object.isRequired};var E=function(e){var t=e.label,n=e.isColumnVisible,r=e.toggleColumnVisibility,a=e.columnKey;return i.a.createElement("li",{className:"c-table-view-columns-toggler-list-element",onClick:function(){return r(a)}},i.a.createElement("div",{className:"form-check form-check-inline"},i.a.createElement("input",{className:"form-check-input ez-input ez-input--checkbox",type:"checkbox",checked:n,readOnly:!0}),i.a.createElement("label",{className:"c-table-view-columns-toggler-list-element__label form-check-label"},t)))};E.propTypes={label:s.a.string.isRequired,columnKey:s.a.string.isRequired,isColumnVisible:s.a.bool.isRequired,toggleColumnVisibility:s.a.func.isRequired};var j=E;function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var i=V(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D(this,n)}}function D(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(l,e);var t,n,a,o=A(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).togglePanel=t.togglePanel.bind(x(t)),t.hidePanel=t.hidePanel.bind(x(t)),t._refTogglerButton=Object(r.createRef)(),t._refPanel=Object(r.createRef)(),t.state={isOpen:!1,buttonBottomDocumentOffset:null,panelHeight:null},t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("click",this.hidePanel,!1),this.setState((function(){return{buttonBottomDocumentOffset:e.getBtnBottomDocumentOffset()}}))}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.isOpen,n=e.panelHeight;t&&null===n&&this.setState({panelHeight:this._refPanel.current.offsetHeight})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hidePanel)}},{key:"getBtnBottomDocumentOffset",value:function(){var e=this._refTogglerButton.current.getBoundingClientRect().top+window.scrollY;return document.documentElement.scrollHeight-e}},{key:"hidePanel",value:function(e){var t=e.target;this.state.isOpen&&(t.closest(".c-table-view-columns-toggler")||this.setState((function(){return{isOpen:!1}})))}},{key:"togglePanel",value:function(){this.setState((function(e){return{isOpen:!e.isOpen}}))}},{key:"renderPanel",value:function(){if(!this.state.isOpen)return null;var e=this.props,t=e.columnsVisibility,n=e.toggleColumnVisibility,r=this.state,a=r.buttonBottomDocumentOffset,o=r.panelHeight,l=o||450,s={className:"c-table-view-columns-toggler__panel",ref:this._refPanel};return a<l&&(s.className="".concat(s.className," ").concat(s.className,"--above-btn")),i.a.createElement("div",s,i.a.createElement("ul",{className:"c-table-view-columns-toggler__list"},Object.entries(t).map((function(e){var t=B(e,2),r=t[0],a=t[1],o=he[r];return i.a.createElement(j,{key:r,label:o,columnKey:r,isColumnVisible:a,toggleColumnVisibility:n})}))))}},{key:"render",value:function(){var e=Translator.trans("items_table.header.filters",{},"sub_items");return i.a.createElement("div",{className:"c-table-view-columns-toggler"},i.a.createElement("button",{ref:this._refTogglerButton,type:"button",title:e,className:"c-action-btn c-table-view-columns-toggler__btn btn btn-icon",onClick:this.togglePanel},i.a.createElement(c.a,{name:"filters",extraClasses:"ez-icon--small ez-icon--secondary"})),this.renderPanel())}}])&&L(t.prototype,n),a&&L(t,a),l}(r.Component);U.propTypes={columnsVisibility:s.a.object.isRequired,toggleColumnVisibility:s.a.func.isRequired};var q=["indeterminate"];function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var M=function(e){var t=e.indeterminate,n=z(e,q);return i.a.createElement("input",H({},n,{type:"checkbox",ref:function(e){e&&(e.indeterminate=t)}}))};M.propTypes={indeterminate:s.a.bool};var F=M,Z=n("nLu2");function J(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||K(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||K(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=Object(r.useRef)(null),n=W(Object(r.useState)(""),2),a=n[0],o=n[1],l=W(Object(r.useState)([]),2),s=l[0],c=l[1],u=null;return Object(r.useEffect)((function(){var e=J(t.current.querySelectorAll(".ez-instant-filter__item")).map((function(e){return{label:e.textContent.toLowerCase(),element:e}}));c(e)}),[e.items]),Object(r.useEffect)((function(){var e=a.toLowerCase();return u=window.setTimeout((function(){s.forEach((function(t){var n=t.label.includes(e)?"removeAttribute":"setAttribute";t.element[n]("hidden",!0)}))}),200),function(){window.clearTimeout(u)}}),[a]),i.a.createElement("div",{className:"ez-instant-filter",ref:t},i.a.createElement("div",{className:"ez-instant-filter__input-wrapper"},i.a.createElement("input",{type:"text",className:"ez-instant-filter__input form-control",placeholder:Translator.trans("instant.filter.placeholder",{},"sub_items"),value:a,onChange:function(e){return o(e.target.value)}})),i.a.createElement("div",{className:"ez-instant-filter__items"},e.items.map((function(t){var n="item_".concat(t.value);return i.a.createElement("div",{className:"ez-instant-filter__item"},i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{type:"radio",id:n,name:"items",className:"form-check-input",value:t.value,onChange:function(){return e.handleItemChange(t.value)}}),i.a.createElement("label",{className:"form-check-label",for:n},t.label)))}))))};$.propTypes={items:s.a.array,handleItemChange:s.a.func},$.defaultProps={items:[],handleItemChange:function(){}};var G=$,Q=function(e){var t=Object(Z.a)({"ez-extra-actions":!0,"c-language-selector":!0,"ez-extra-actions--edit":!0,"ez-extra-actions--hidden":!e.isOpen}),n=function(t){t.target.closest(".c-table-view-item__btn")||t.target.classList.contains("ez-instant-filter__input")||e.close()};return Object(r.useEffect)((function(){return window.document.addEventListener("click",n,!1),function(){window.document.removeEventListener("click",n)}}),[]),i.a.createElement("div",{className:t},i.a.createElement("div",{className:"ez-extra-actions__header"},e.label),i.a.createElement("div",{className:"ez-extra-actions__content"},i.a.createElement(G,{items:e.languageItems,handleItemChange:e.handleItemChange})))};Q.propTypes={isOpen:s.a.bool,label:s.a.string,languageItems:s.a.array,handleItemChange:s.a.func,closeLanguageSelector:s.a.func},Q.defaultProps={isOpen:!1,label:"",languageItems:[],handleItemChange:function(){},closeLanguageSelector:function(){}};var Y=Q;function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fe(e);if(t){var i=fe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ue(this,n)}}function ue(e,t){if(t&&("object"===ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return de(e)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var me={modified:!0,"content-type":!0,priority:!0,translations:!0,visibility:!0,creator:!0,contributor:!0,published:!0,section:!0,"location-id":!0,"location-remote-id":!0,"object-id":!0,"object-remote-id":!0},pe={name:"ContentName",modified:"DateModified",priority:"LocationPriority"},be="".concat("c-table-view__cell"," ").concat("c-table-view__cell","--head"),he={name:Translator.trans("items_table.header.name",{},"sub_items"),modified:Translator.trans("items_table.header.modified",{},"sub_items"),"content-type":Translator.trans("items_table.header.content_type",{},"sub_items"),priority:Translator.trans("items_table.header.priority",{},"sub_items"),translations:Translator.trans("items_table.header.translations",{},"sub_items"),visibility:Translator.trans("items_table.header.visibility",{},"sub_items"),creator:Translator.trans("items_table.header.creator",{},"sub_items"),contributor:Translator.trans("items_table.header.contributor",{},"sub_items"),published:Translator.trans("items_table.header.pubished",{},"sub_items"),section:Translator.trans("items_table.header.section",{},"sub_items"),"location-id":Translator.trans("items_table.header.location_id",{},"sub_items"),"location-remote-id":Translator.trans("items_table.header.location_remote_id",{},"sub_items"),"object-id":Translator.trans("items_table.header.object_id",{},"sub_items"),"object-remote-id":Translator.trans("items_table.header.object_remote_id",{},"sub_items")},ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(s,e);var t,n,o,l=ce(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=l.call(this,e)).renderItem=t.renderItem.bind(de(t)),t.selectAll=t.selectAll.bind(de(t)),t.setColumnsVisibilityInLocalStorage=t.setColumnsVisibilityInLocalStorage.bind(de(t)),t.toggleColumnVisibility=t.toggleColumnVisibility.bind(de(t)),t.setLanguageSelectorData=t.setLanguageSelectorData.bind(de(t)),t.openLanguageSelector=t.openLanguageSelector.bind(de(t)),t.closeLanguageSelector=t.closeLanguageSelector.bind(de(t)),t._refColumnsTogglerButton=Object(r.createRef)(),t.state={columnsVisibility:t.getColumnsVisibilityFromLocalStorage(),languageSelectorData:{},languageSelectorOpen:!1},t}return t=s,(n=[{key:"getColumnsVisibilityFromLocalStorage",value:function(){var e=localStorage.getItem("sub-items_columns-visibility"),t=ae({},me);return e&&Object.entries(JSON.parse(e)).forEach((function(e){var n=ne(e,2),r=n[0],i=n[1];r in t&&(t[r]=i)})),t}},{key:"setColumnsVisibilityInLocalStorage",value:function(){var e=JSON.stringify(this.state.columnsVisibility);localStorage.setItem("sub-items_columns-visibility",e)}},{key:"selectAll",value:function(){var e=this.props;(0,e.toggleAllItemsSelect)(!e.selectedLocationsIds.size)}},{key:"toggleColumnVisibility",value:function(e){this.setState((function(t){return{columnsVisibility:ae(ae({},t.columnsVisibility),{},oe({},e,!t.columnsVisibility[e]))}}),this.setColumnsVisibilityInLocalStorage)}},{key:"setLanguageSelectorData",value:function(e){this.setState({languageSelectorData:e})}},{key:"openLanguageSelector",value:function(){this.setState({languageSelectorOpen:!0})}},{key:"closeLanguageSelector",value:function(){this.setState({languageSelectorOpen:!1})}},{key:"renderItem",value:function(e){var t=this.state.columnsVisibility,n=this.props,r=n.handleItemPriorityUpdate,a=n.handleEditItem,o=n.generateLink,l=n.languages,s=n.onItemSelect,c=n.selectedLocationsIds.has(e.id);return i.a.createElement(I,{key:e.id,item:e,onItemPriorityUpdate:r,languages:l,handleEditItem:a,generateLink:o,onItemSelect:s,isSelected:c,columnsVisibility:t,setLanguageSelectorData:this.setLanguageSelectorData,openLanguageSelector:this.openLanguageSelector})}},{key:"renderBasicColumnsHeader",value:function(){var e=this.props,t=e.sortClause,n=e.sortOrder,r=e.onSortChange,a=ae({name:!0},this.state.columnsVisibility);return Object.entries(a).map((function(e){var a,o=ne(e,2),l=o[0];if(!o[1])return null;var s=null,c=Object(Z.a)((oe(a={},be,!0),oe(a,"".concat("c-table-view__cell","--sortable"),l in pe),oe(a,"".concat("c-table-view__cell","--sorted-asc"),pe[l]===t&&"ascending"===n),oe(a,"".concat("c-table-view__cell","--sorted-desc"),pe[l]===t&&"descending"===n),oe(a,"".concat("c-table-view__cell","--name"),"name"===l),a));return l in pe&&(s=function(){r(pe[l])}),i.a.createElement("th",{key:l,className:c,onClick:s,tabIndex:-1},i.a.createElement("span",{className:"c-table-view__label"},he[l]))}))}},{key:"renderHead",value:function(){if(!this.props.items.length)return null;var e=this.state.columnsVisibility,t=this.props,n=t.selectedLocationsIds,r=t.items,a=!!n.size,o=n.size===r.length,l=a&&!o;return i.a.createElement("thead",{className:"c-table-view__head"},i.a.createElement("tr",{className:"c-table-view__row"},i.a.createElement("th",{className:"".concat(be," ").concat("c-table-view__cell","--checkbox")},i.a.createElement(F,{indeterminate:l,checked:a,onClick:this.selectAll,onChange:function(){},class:"ez-input ez-input--checkbox ez-input--no-select-border"})),i.a.createElement("th",{className:"".concat(be," ").concat("c-table-view__cell","--icon")}),this.renderBasicColumnsHeader(),i.a.createElement("th",{className:"".concat(be," ").concat("c-table-view__cell","--actions")},i.a.createElement(U,{columnsVisibility:e,toggleColumnVisibility:this.toggleColumnVisibility}))))}},{key:"render",value:function(){var e=this.props.items.map(this.renderItem);return i.a.createElement("div",{className:"c-table-view__wrapper"},i.a.createElement("div",{className:"c-table-view__scroller"},i.a.createElement("table",{className:"c-table-view c-table-view--hoverable"},this.renderHead(),i.a.createElement("tbody",{className:"c-table-view__body"},e))),Object(a.createPortal)(i.a.createElement(Y,te({isOpen:this.state.languageSelectorOpen,close:this.closeLanguageSelector},this.state.languageSelectorData)),window.document.querySelector(this.props.languageContainerSelector)))}}])&&le(t.prototype,n),o&&le(t,o),s}(r.Component);ye.propTypes={items:s.a.arrayOf(s.a.object).isRequired,handleItemPriorityUpdate:s.a.func.isRequired,generateLink:s.a.func.isRequired,handleEditItem:s.a.func.isRequired,languages:s.a.object.isRequired,onItemSelect:s.a.func.isRequired,toggleAllItemsSelect:s.a.func.isRequired,selectedLocationsIds:s.a.instanceOf(Set),onSortChange:s.a.func.isRequired,sortClause:s.a.string.isRequired,sortOrder:s.a.string.isRequired,languageContainerSelector:s.a.string.isRequired};var ge=function(e){var t=e.item,n=e.generateLink,r=t.id,a=t.content,o=a._info.contentType.identifier,l=eZ.helpers.contentType.getContentTypeIconUrl(o),s=null,u=null;if(null===a._thumbnail||"image/svg+xml"===a._thumbnail.mimeType)s=i.a.createElement("div",{className:"".concat("c-grid-view-item__image"," ").concat("c-grid-view-item__image","--none")},i.a.createElement(c.a,{customPath:l,extraClasses:"ez-icon--extra-large"}));else{var d=a._thumbnail,f=d.uri,m=d.alternativeText;s=i.a.createElement("img",{className:"c-grid-view-item__image",src:f,alt:m}),u=i.a.createElement("div",{className:"c-grid-view-item__content-type"},i.a.createElement(c.a,{customPath:l,extraClasses:"ez-icon--small"}))}return i.a.createElement("a",{className:"c-grid-view-item",href:n(r,a._info.id)},u,i.a.createElement("div",{className:"c-grid-view-item__image-wrapper"},s),i.a.createElement("div",{className:"c-grid-view-item__title"},a._name))};ge.propTypes={item:s.a.object.isRequired,generateLink:s.a.func.isRequired};var ve=ge,_e=function(e){var t=e.items,n=e.generateLink;return i.a.createElement("div",{className:"c-grid-view"},t.map((function(e){return i.a.createElement(ve,{key:e.id,item:e,generateLink:n})})))};_e.propTypes={items:s.a.arrayOf(s.a.object),generateLink:s.a.func.isRequired};var ke={table:ye,grid:_e},we=function(e){var t=ke[e.activeView];return i.a.createElement(t,e)};we.propTypes={activeView:s.a.string.isRequired,items:s.a.arrayOf(s.a.object),handleItemPriorityUpdate:s.a.func.isRequired,handleEditItem:s.a.func.isRequired,generateLink:s.a.func.isRequired,languages:s.a.object.isRequired,onItemSelect:s.a.func.isRequired,toggleAllItemsSelect:s.a.func.isRequired,selectedLocationsIds:s.a.instanceOf(Set).isRequired,onSortChange:s.a.func.isRequired,sortClause:s.a.string.isRequired,sortOrder:s.a.string.isRequired,languageContainerSelector:s.a.string.isRequired};var Ce=we,Se=n("xeH2"),Oe=n.n(Se);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ae(e);if(t){var i=Ae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Le(this,n)}}function Le(e,t){if(t&&("object"===Pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Re(e)}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var De={backdrop:"static",keyboard:!0},xe={small:"modal-sm",medium:"",large:"modal-lg"},Ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(o,e);var t,n,r,a=Ne(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e))._refModal=null,t.setModalRef=t.setModalRef.bind(Re(t)),t.onKeyUp=t.onKeyUp.bind(Re(t)),t.state={isVisible:e.isVisible,isLoading:e.isLoading},t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this.state.isVisible;e&&(Oe()(this._refModal).modal(Ee(Ee({},De),{},{show:e,focus:this.props.hasFocus})),this.attachModalEventHandlers())}},{key:"componentDidUpdate",value:function(){var e=this.state.isVisible;Oe()(this._refModal).modal(Ee(Ee({},De),{},{show:e,focus:this.props.hasFocus})),e&&this.attachModalEventHandlers()}},{key:"componentWillUnmount",value:function(){Oe()(this._refModal).modal("hide"),document.body.classList.remove("modal-open","ezs-non-scrollable")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.isVisible,n=e.onConfigIframeLoad,r=e.isLoading;this.setState((function(e){return Ee(Ee({},e),{},{isVisible:t,onConfigIframeLoad:n,isLoading:r})}))}},{key:"attachModalEventHandlers",value:function(){var e=Oe()(this._refModal);e.on("keyup",this.onKeyUp),e.one("hidden.bs.modal",this.props.onClose)}},{key:"onKeyUp",value:function(e){var t=e.originalEvent;t&&(27===t.which||27===t.keyCode)&&this.props.onClose()}},{key:"setModalRef",value:function(e){this._refModal=e}},{key:"renderHeader",value:function(){return Translator.trans("popup.close.label",{},"universal_discovery_widget"),i.a.createElement("div",{className:"modal-header c-popup__header"},this.renderHeadline(),this.renderCloseButton())}},{key:"renderCloseButton",value:function(){var e=Translator.trans("popup.close.label",{},"universal_discovery_widget");return i.a.createElement("button",{type:"button",className:"close c-popup__btn--close","data-dismiss":"modal","aria-label":e,onClick:this.props.onClose},i.a.createElement(c.a,{name:"discard",extraClasses:"ez-icon--small"}))}},{key:"renderHeadline",value:function(){return this.props.title?i.a.createElement("h3",{className:"modal-title c-popup__headline",title:this.props.title},i.a.createElement("span",{className:"c-popup__title"},this.props.title),this.renderSubtitle()):null}},{key:"renderSubtitle",value:function(){var e=this.props.subtitle;return e?i.a.createElement("span",{className:"c-popup__subtitle"},e):null}},{key:"renderFooter",value:function(){var e=this.props.footerChildren;if(e)return i.a.createElement("div",{className:"modal-footer c-popup__footer"},e)}},{key:"render",value:function(){var e=this.state.isVisible,t=this.props,n=t.additionalClasses,r=t.size,a=t.noHeader,o={className:"c-popup modal fade",ref:this.setModalRef,tabIndex:this.props.hasFocus?-1:void 0};return document.body.classList.toggle("modal-open",e),document.body.classList.toggle("ezs-non-scrollable",e),n&&(o.className="".concat(o.className," ").concat(n)),a&&(o.className="".concat(o.className," c-popup--no-header")),i.a.createElement("div",o,i.a.createElement("div",{className:"modal-dialog c-popup__dialog ".concat(xe[r]),role:"dialog"},i.a.createElement("div",{className:"modal-content c-popup__content"},a?this.renderCloseButton():this.renderHeader(),i.a.createElement("div",{className:"modal-body c-popup__body"},this.props.children),this.renderFooter())))}}])&&Te(t.prototype,n),r&&Te(t,r),o}(r.Component);Ve.propTypes={isVisible:s.a.bool,isLoading:s.a.bool,onClose:s.a.func.isRequired,onConfigIframeLoad:s.a.func,children:s.a.element.isRequired,title:s.a.string,subtitle:s.a.string,hasFocus:s.a.bool,additionalClasses:s.a.string,footerChildren:s.a.element,size:s.a.string,noHeader:s.a.bool},Ve.defaultProps={isVisible:!1,isLoading:!0,hasFocus:!0,size:"large",noHeader:!1,onConfigIframeLoad:function(){}};var Ue=Ve;function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var He=function(e){var t,n=e.disabled,r=e.onClick,a=e.label,o=e.type,l={type:"button",title:a,tabIndex:"-1",onClick:function(){n||r()}};return l.disabled=!!n&&"disabled",l.className=Object(Z.a)((qe(t={},"c-action-btn",!0),qe(t,"".concat("c-action-btn","--disabled"),n),qe(t,"".concat("c-action-btn","--").concat(o),!!o),t)),i.a.createElement("button",l,i.a.createElement(c.a,{name:o,extraClasses:"ez-icon--base-dark ez-icon--medium"}))};He.propTypes={label:s.a.string.isRequired,disabled:s.a.bool.isRequired,type:s.a.string.isRequired,onClick:s.a.func.isRequired};var ze=He,Me=n("tw3r"),Fe=function(){var e=Translator.trans("no_items.message",{},"sub_items");return i.a.createElement("div",{className:"c-no-items"},e)},Ze=n("AJkD"),Je=n("iRWG"),We={Accept:"application/vnd.ez.api.BulkOperationResponse+json","Content-Type":"application/vnd.ez.api.BulkOperation+json"},Ke={ContentId:"_contentId",ContentName:"_name",DateModified:"_dateModified",DatePublished:"_datePublished",LocationDepth:"_depth",LocationPath:"_path",LocationPriority:"_priority",SectionIdentifier:"_sectionIdentifier",SectionName:"_sectionName"};function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){Ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var et=function(e){return{uri:"".concat("/api/ezp/v2/user/users","/").concat(e),method:"DELETE"}},tt=function(e,t){return{uri:"".concat("/api/ezp/v2/content/locations").concat(e.slice(0,-1)),method:"MOVE",headers:{Destination:t}}},nt=function(e,t){return{uri:"".concat("/api/ezp/v2/content/objects","/").concat(e,"/locations"),content:JSON.stringify({LocationCreate:{ParentLocation:{_href:t},sortField:"PATH",sortOrder:"ASC"}}),headers:{"Content-Type":"application/vnd.ez.api.LocationCreate+json"},method:"POST"}},rt=function(e,t){return{uri:"".concat("/api/ezp/v2/content/locations").concat(e.slice(0,-1)),content:JSON.stringify({LocationUpdate:{hidden:t,sortField:"PATH",sortOrder:"ASC"}}),headers:{"Content-Type":"application/vnd.ez.api.LocationUpdate+json"},method:"PATCH"}},it=function(e,t,n){var r=n.BulkOperationResponse.operations,i=Object.entries(r).reduce((function(t,n){var r=Qe(n,2),i=r[0],a=r[1],o=e.find((function(e){return e.id===parseInt(i,10)}));return 200<=a.statusCode&&a.statusCode<=299?t.success.push(o):t.fail.push(o),t}),{success:[],fail:[]});t(i.success,i.fail)},at=function(e,t,n){var r=e.token,i=e.siteaccess,a=new Request("/api/ezp/v2/bulk",{method:"POST",headers:$e($e({},We),{},{"X-Siteaccess":i,"X-CSRF-Token":r}),body:JSON.stringify({bulkOperations:{operations:t}}),mode:"same-origin",credentials:"same-origin"});fetch(a).then(Je.a).then(n).catch((function(){var e=Translator.trans("bulk_request.error.message",{},"sub_items");window.eZ.helpers.notification.showErrorNotification(e)}))};function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(){return(lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||ut(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e){return function(e){if(Array.isArray(e))return dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ut(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){if(e){if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_t(e);if(t){var i=_t(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return gt(this,n)}}function gt(e,t){if(t&&("object"===ot(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vt(e)}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kt="ascending",wt=kt,Ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(s,e);var t,n,a,l=yt(s);function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=l.call(this,e)).afterPriorityUpdated=t.afterPriorityUpdated.bind(vt(t)),t.switchView=t.switchView.bind(vt(t)),t.handleItemPriorityUpdate=t.handleItemPriorityUpdate.bind(vt(t)),t.toggleItemSelection=t.toggleItemSelection.bind(vt(t)),t.toggleAllPageItemsSelection=t.toggleAllPageItemsSelection.bind(vt(t)),t.onMoveBtnClick=t.onMoveBtnClick.bind(vt(t)),t.closeUdw=t.closeUdw.bind(vt(t)),t.onUdwConfirm=t.onUdwConfirm.bind(vt(t)),t.onDeleteBtnClick=t.onDeleteBtnClick.bind(vt(t)),t.onAddLocationsBtnClick=t.onAddLocationsBtnClick.bind(vt(t)),t.onHideBtnClick=t.onHideBtnClick.bind(vt(t)),t.onUnhideBtnClick=t.onUnhideBtnClick.bind(vt(t)),t.closeBulkDeletePopup=t.closeBulkDeletePopup.bind(vt(t)),t.closeBulkHidePopup=t.closeBulkHidePopup.bind(vt(t)),t.closeBulkUnhidePopup=t.closeBulkUnhidePopup.bind(vt(t)),t.onBulkDeletePopupConfirm=t.onBulkDeletePopupConfirm.bind(vt(t)),t.onBulkHidePopupConfirm=t.onBulkHidePopupConfirm.bind(vt(t)),t.onBulkUnhidePopupConfirm=t.onBulkUnhidePopupConfirm.bind(vt(t)),t.afterBulkDelete=t.afterBulkDelete.bind(vt(t)),t.afterBulkHide=t.afterBulkHide.bind(vt(t)),t.afterBulkUnhide=t.afterBulkUnhide.bind(vt(t)),t.changePage=t.changePage.bind(vt(t)),t.changeSorting=t.changeSorting.bind(vt(t)),t._refListViewWrapper=i.a.createRef(),t.bulkActionModalContainer=null,t.udwContainer=null;var n=t.getDefaultSortClause(e.sortClauses);return t.state={activeView:e.activeView,activePageItems:null,pages:[],selectedItems:new Map,totalCount:e.totalCount,offset:e.offset,isDuringBulkOperation:!1,isUdwOpened:!1,isBulkDeletePopupVisible:!1,isBulkHidePopupVisible:!1,isBulkUnhidePopupVisible:!1,activePageIndex:0,listViewHeight:null,actionFlow:null,sortClause:n.name,sortOrder:n.order},t}return t=s,(n=[{key:"componentDidMount",value:function(){this.udwContainer=document.getElementById("react-udw"),this.bulkActionModalContainer=document.createElement("div"),this.bulkActionModalContainer.classList.add("m-sub-items__bulk-action-modal-container"),document.body.appendChild(this.bulkActionModalContainer),this.state.activePageItems||this.loadPage(0)}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.activePageIndex,n=e.activePageItems,r=e.totalCount,i=this.props.limit,a=Math.ceil(r/i);t>a-1&&0!==t?this.setState({activePageIndex:a-1}):(!n&&this.loadPage(t),eZ.helpers.tooltips.parse())}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.bulkActionModalContainer)}},{key:"getDefaultSortClause",value:function(e){var t=Object.keys(e);if(!t.length)return{name:null,order:null};var n=t[0];return{name:n,order:e[n]}}},{key:"updateListViewHeight",value:function(){var e=this;this.setState((function(){return{listViewHeight:e._refListViewWrapper.current.offsetHeight}}))}},{key:"loadPage",value:function(e){var t=this,n=this.props,r=n.limit,i=n.parentLocationId,a=n.loadLocation,o=n.restInfo,l=this.state,s=l.sortClause,c=l.sortOrder,u=this.state.pages.find((function(t){return t.number===e+1}));a(o,{locationId:i,limit:r,sortClause:s,sortOrder:c,cursor:u?u.cursor:null},(function(e){var n=e.data._repository.location.children,r=n.totalCount,i=n.pages,a=n.edges.map((function(e){return e.node}));t.setState((function(){return{activePageItems:a,totalCount:r,pages:i}}))}))}},{key:"updateTotalCountState",value:function(e){this.setState((function(){return{totalCount:e}}))}},{key:"discardActivePageItems",value:function(){this.updateListViewHeight(),this.setState((function(){return{activePageItems:null}}))}},{key:"changeSorting",value:function(e){var t=this;this.updateListViewHeight(),this.setState((function(n){return{sortClause:e,sortOrder:t.getSortOrder(n.sortClause,e,n.sortOrder),activePageItems:null}}))}},{key:"getSortOrder",value:function(e,t,n){return t===e?this.getOppositeSortOrder(n):wt}},{key:"getOppositeSortOrder",value:function(e){return e===kt?"descending":kt}},{key:"handleItemPriorityUpdate",value:function(e){this.props.updateLocationPriority(mt(mt({},e),this.props.restInfo),this.afterPriorityUpdated)}},{key:"afterPriorityUpdated",value:function(e){if("LocationPriority"===this.state.sortClause)return this.discardActivePageItems(),void this.refreshContentTree();this.updateItemLocation(e.Location)}},{key:"updateItemLocation",value:function(e){this.setState((function(t){var n=t.activePageItems,r=n.findIndex((function(t){return t.id===e.id}));if(-1===r)return null;var i=n[r],a=Object(Ze.a)(i),o=ct(n);return a.priority=e.priority,o[r]=a,{activePageItems:o}}))}},{key:"switchView",value:function(e){var t=this;this.setState((function(){return{activeView:e}}),(function(){eZ.helpers.tooltips.hideAll(),window.localStorage.setItem("ez-subitems-active-view-location-".concat(t.props.parentLocationId),e)}))}},{key:"toggleItemSelection",value:function(e,t){var n=this.state.selectedItems,r=new Map(n),i=e.id;t?r.set(i,e):r.delete(i),this.setState((function(){return{selectedItems:r}}))}},{key:"toggleAllPageItemsSelection",value:function(e){var t=this.state.activePageItems;if(e)this.selectItems(t);else{var n=t.map((function(e){return e.id})),r=new Set(n);this.deselectItems(r)}}},{key:"selectItems",value:function(e){var t=this.state.selectedItems,n=e.map((function(e){return[e.id,e]})),r=new Map([].concat(ct(t),ct(n)));this.setState((function(){return{selectedItems:r}}))}},{key:"deselectItems",value:function(e){var t=this.state.selectedItems,n=new Map(ct(t).filter((function(t){var n=st(t,1)[0];return!e.has(n)})));this.setState((function(){return{selectedItems:n}}))}},{key:"deselectAllItems",value:function(){this.setState((function(){return{selectedItems:new Map}}))}},{key:"toggleBulkOperationStatusState",value:function(e){this.setState((function(){return{isDuringBulkOperation:e}}))}},{key:"onMoveBtnClick",value:function(){this.setState((function(){return{actionFlow:"move"}})),this.toggleUdw(!0)}},{key:"onAddLocationsBtnClick",value:function(){this.setState((function(){return{actionFlow:"add"}})),this.toggleUdw(!0)}},{key:"bulkMove",value:function(e){this.toggleBulkOperationStatusState(!0),function(e,t,n,r){var i={};t.forEach((function(e){var t=e.id,r=e.pathString;i[t]=tt(r,n)})),at(e,i,it.bind(null,t,r))}(this.props.restInfo,ct(this.state.selectedItems.values()),e._href,this.afterBulkMove.bind(this,e))}},{key:"bulkAdd",value:function(e){this.toggleBulkOperationStatusState(!0),function(e,t,n,r){var i={};t.forEach((function(e){var t=e.id,r=e.content;i[t]=nt(r._info.id,n)})),at(e,i,it.bind(null,t,r))}(this.props.restInfo,ct(this.state.selectedItems.values()),e._href,this.afterBulkAddLocation.bind(this,e))}},{key:"afterBulkMove",value:function(e,t,n){var r=this.state.totalCount;if(this.refreshContentTree(),this.updateTotalCountState(r-t.length),this.deselectAllItems(),this.discardActivePageItems(),this.updateTrashModal(),this.toggleBulkOperationStatusState(!1),n.length){var i=Translator.trans("bulk_move.error.modal.table_title",{itemsCount:n.length},"sub_items"),a=Translator.trans("bulk_move.error.message",{notMovedCount:n.length,totalCount:t.length+n.length},"sub_items"),o={moreInformationLink:Translator.trans("bulk_action.error.more_info",{},"sub_items")};this.handleBulkOperationFailedNotification(n,i,a,o)}if(t.length){var l=Translator.trans("bulk_move.success.message",{},"sub_items"),s={locationLink:Translator.trans("bulk_action.success.link_to_location",{locationName:eZ.helpers.text.escapeHTML(e.ContentInfo.Content.Name),locationHref:this.props.generateLink(e.id,e.ContentInfo.Content._id)},"sub_items")};window.eZ.helpers.notification.showSuccessNotification(l,(function(){}),s)}}},{key:"afterBulkHide",value:function(e,t){if(this.deselectAllItems(),this.discardActivePageItems(),this.toggleBulkOperationStatusState(!1),t.length){var n=Translator.trans("bulk_hide.error.modal.table_title",{itemsCount:t.length},"sub_items"),r=Translator.trans("bulk_hide.error.message",{failedCount:t.length,totalCount:e.length+t.length},"sub_items"),i={moreInformationLink:Translator.trans("bulk_action.error.more_info",{},"sub_items")};this.handleBulkOperationFailedNotification(t,n,r,i)}if(e.length){var a=Translator.trans("bulk_hide.success.message",{},"sub_items");window.eZ.helpers.notification.showSuccessNotification(a)}}},{key:"afterBulkUnhide",value:function(e,t){if(this.deselectAllItems(),this.discardActivePageItems(),this.toggleBulkOperationStatusState(!1),t.length){var n=Translator.trans("bulk_unhide.error.modal.table_title",{itemsCount:t.length},"sub_items"),r=Translator.trans("bulk_unhide.error.message",{failedCount:t.length,totalCount:e.length+t.length},"sub_items"),i={moreInformationLink:Translator.trans("bulk_action.error.more_info",{},"sub_items")};this.handleBulkOperationFailedNotification(t,n,r,i)}if(e.length){var a=Translator.trans("bulk_unhide.success.message",{},"sub_items");window.eZ.helpers.notification.showSuccessNotification(a)}}},{key:"afterBulkAddLocation",value:function(e,t,n){if(this.deselectAllItems(),this.discardActivePageItems(),this.toggleBulkOperationStatusState(!1),n.length){var r=Translator.trans("bulk_add_location.error.modal.table_title",{itemsCount:n.length},"sub_items"),i=Translator.trans("bulk_add_location.error.message",{failedCount:n.length,totalCount:t.length+n.length},"sub_items"),a={moreInformationLink:Translator.trans("bulk_action.error.more_info",{},"sub_items")};this.handleBulkOperationFailedNotification(n,r,i,a)}if(t.length){var o=Translator.trans("bulk_add_location.success.message",{},"sub_items"),l={locationLink:Translator.trans("bulk_action.success.link_to_location",{locationName:eZ.helpers.text.escapeHTML(e.ContentInfo.Content.TranslatedName),locationHref:this.props.generateLink(e.id,e.ContentInfo.id)},"sub_items")};window.eZ.helpers.notification.showSuccessNotification(o,(function(){}),l)}}},{key:"toggleUdw",value:function(e){this.setState((function(){return{isUdwOpened:e}}))}},{key:"closeUdw",value:function(){this.toggleUdw(!1)}},{key:"onUdwConfirm",value:function(e){var t=st(e,1)[0];this.closeUdw(),"move"===this.state.actionFlow?this.bulkMove(t):this.bulkAdd(t)}},{key:"renderUdw",value:function(){var e=this.state,t=e.isUdwOpened,n=e.actionFlow;if(!t)return null;var r=window.eZ.modules.UniversalDiscovery,a=this.props,l=a.restInfo,s=a.parentLocationId,c=a.udwConfigBulkMoveItems,u=a.udwConfigBulkAddLocation,d=ct(this.state.selectedItems.values()).map((function(e){return e.id})),f=[s].concat(ct(d)),m="move"===n?c:u,p=mt({title:Translator.trans("udw.choose_location.title",{},"sub_items"),restInfo:l,onCancel:this.closeUdw,onConfirm:this.onUdwConfirm,canSelectContent:function(e,t){var n=e.item;t(!f.includes(n.id))}},m);return o.a.createPortal(i.a.createElement(r,p),this.udwContainer)}},{key:"onDeleteBtnClick",value:function(){this.toggleBulkDeletePopup(!0)}},{key:"onHideBtnClick",value:function(){this.toggleBulkHidePopup(!0)}},{key:"onUnhideBtnClick",value:function(){this.toggleBulkUnhidePopup(!0)}},{key:"bulkDelete",value:function(){this.toggleBulkOperationStatusState(!0),function(e,t,n){var r={};t.forEach((function(e){var t=e.id,n=e.pathString,i=e.content,a=i._info.contentType.identifier,o=window.eZ.adminUiConfig.userContentTypes.includes(a),l=i._info.id;r[t]=o?et(l):tt(n,"/api/ezp/v2/content/trash")})),at(e,r,it.bind(null,t,n))}(this.props.restInfo,ct(this.state.selectedItems.values()),this.afterBulkDelete)}},{key:"bulkHide",value:function(){this.toggleBulkOperationStatusState(!0),function(e,t,n){var r={};t.forEach((function(e){var t=e.id,n=e.pathString;r[t]=rt(n,!0)})),at(e,r,it.bind(null,t,n))}(this.props.restInfo,ct(this.state.selectedItems.values()),this.afterBulkHide)}},{key:"bulkUnhide",value:function(){this.toggleBulkOperationStatusState(!0),function(e,t,n){var r={};t.forEach((function(e){var t=e.id,n=e.pathString;r[t]=rt(n,!1)})),at(e,r,it.bind(null,t,n))}(this.props.restInfo,ct(this.state.selectedItems.values()),this.afterBulkUnhide)}},{key:"afterBulkDelete",value:function(e,t){var n=this.state.totalCount,r=function(e){var t=e.content;return window.eZ.adminUiConfig.userContentTypes.includes(t._info.contentType.identifier)};if(this.refreshContentTree(),this.updateTotalCountState(n-e.length),this.deselectAllItems(),this.discardActivePageItems(),this.updateTrashModal(),this.toggleBulkOperationStatusState(!1),t.length){var i=t.some(r),a=t.some((function(e){return!r(e)})),o=null,l=null,s={moreInformationLink:Translator.trans("bulk_action.error.more_info",{},"sub_items")};i&&a?(o=Translator.trans("bulk_delete.error.modal.table_title.users_with_nonusers",{itemsCount:t.length},"sub_items"),l=Translator.trans("bulk_delete.error.message.users_with_nonusers",{notDeletedCount:t.length,totalCount:e.length+t.length},"sub_items")):i?(o=Translator.trans("bulk_delete.error.modal.table_title.users",{itemsCount:t.length},"sub_items"),l=Translator.trans("bulk_delete.error.message.users",{notDeletedCount:t.length,totalCount:e.length+t.length},"sub_items")):(o=Translator.trans("bulk_delete.error.modal.table_title.nonusers",{itemsCount:t.length},"sub_items"),l=Translator.trans("bulk_delete.error.message.nonusers",{notDeletedCount:t.length,totalCount:e.length+t.length},"sub_items")),this.handleBulkOperationFailedNotification(t,o,l,s)}else{var c=e.some(r),u=e.some((function(e){return!r(e)})),d=null;d=c&&u?Translator.trans("bulk_delete.success.message.users_with_nonusers",{},"sub_items"):c?Translator.trans("bulk_delete.success.message.users",{},"sub_items"):Translator.trans("bulk_delete.success.message.nonusers",{},"sub_items"),window.eZ.helpers.notification.showSuccessNotification(d)}}},{key:"toggleBulkDeletePopup",value:function(e){this.setState((function(){return{isBulkDeletePopupVisible:e}}))}},{key:"toggleBulkHidePopup",value:function(e){this.setState((function(){return{isBulkHidePopupVisible:e}}))}},{key:"toggleBulkUnhidePopup",value:function(e){this.setState((function(){return{isBulkUnhidePopupVisible:e}}))}},{key:"closeBulkDeletePopup",value:function(){this.toggleBulkDeletePopup(!1)}},{key:"closeBulkHidePopup",value:function(){this.toggleBulkHidePopup(!1)}},{key:"closeBulkUnhidePopup",value:function(){this.toggleBulkUnhidePopup(!1)}},{key:"onBulkDeletePopupConfirm",value:function(){this.closeBulkDeletePopup(),this.bulkDelete()}},{key:"onBulkHidePopupConfirm",value:function(){this.closeBulkHidePopup(),this.bulkHide()}},{key:"onBulkUnhidePopupConfirm",value:function(){this.closeBulkUnhidePopup(),this.bulkUnhide()}},{key:"handleBulkOperationFailedNotification",value:function(e,t,n,r){var i=this,a=e.map((function(e){return{contentTypeName:e._info.contentType.name,contentName:e._name}}));window.eZ.helpers.notification.showWarningNotification(n,(function(e){var n=e.querySelector(".ez-notification-btn--show-modal");n&&n.addEventListener("click",i.props.showBulkActionFailedModal.bind(null,t,a))}),r)}},{key:"refreshContentTree",value:function(){document.body.dispatchEvent(new CustomEvent("ez-content-tree-refresh"))}},{key:"renderDeleteConfirmationPopupFooter",value:function(e){var t=Translator.trans("bulk_action.popup.cancel",{},"sub_items"),n=e.isUserContentItemSelected,a=e.isNonUserContentItemSelected,o="";return o=!n&&a?Translator.trans("bulk_delete.popup.confirm.nonusers",{},"sub_items"):Translator.trans("bulk_delete.popup.confirm.users_and_users_with_nonusers",{},"sub_items"),i.a.createElement(r.Fragment,null,i.a.createElement("button",{onClick:this.onBulkDeletePopupConfirm,type:"button",className:"btn btn-primary btn--trigger"},o),i.a.createElement("button",{onClick:this.closeBulkDeletePopup,type:"button",className:"btn btn-secondary","data-dismiss":"modal"},t))}},{key:"renderHideConfirmationPopupFooter",value:function(){var e=Translator.trans("bulk_action.popup.cancel",{},"sub_items"),t=Translator.trans("bulk_hide.popup.confirm",{},"sub_items");return i.a.createElement(r.Fragment,null,i.a.createElement("button",{onClick:this.onBulkHidePopupConfirm,type:"button",className:"btn btn-primary btn--trigger"},t),i.a.createElement("button",{onClick:this.closeBulkHidePopup,type:"button",className:"btn btn-secondary","data-dismiss":"modal"},e))}},{key:"renderUnhideConfirmationPopupFooter",value:function(){var e=Translator.trans("bulk_action.popup.cancel",{},"sub_items"),t=Translator.trans("bulk_unhide.popup.confirm",{},"sub_items");return i.a.createElement(r.Fragment,null,i.a.createElement("button",{onClick:this.onBulkUnhidePopupConfirm,type:"button",className:"btn btn-primary btn--trigger"},t),i.a.createElement("button",{onClick:this.closeBulkUnhidePopup,type:"button",className:"btn btn-secondary","data-dismiss":"modal"},e))}},{key:"getSelectionInfo",value:function(){var e,t=!1,n=!1,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ut(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}(this.state.selectedItems);try{for(r.s();!(e=r.n()).done;){var i=st(e.value,2),a=(i[0],i[1].content);if(t&&n)break;window.eZ.adminUiConfig.userContentTypes.includes(a._info.contentType.identifier)?t=!0:n=!0}}catch(e){r.e(e)}finally{r.f()}return{isUserContentItemSelected:t,isNonUserContentItemSelected:n}}},{key:"renderDeleteConfirmationPopup",value:function(){var e=this.state.isBulkDeletePopupVisible;if(!e)return null;var t=Translator.trans("bulk_delete.popup.message.users",{},"sub_items"),n=Translator.trans("bulk_delete.popup.message.nonusers",{},"sub_items"),r=Translator.trans("bulk_delete.popup.message.users_with_nonusers",{},"sub_items"),a=this.getSelectionInfo(),l=a.isUserContentItemSelected,s=a.isNonUserContentItemSelected,c="";return c=l&&s?r:l?t:n,o.a.createPortal(i.a.createElement(Ue,{onClose:this.closeBulkDeletePopup,isVisible:e,isLoading:!1,size:"medium",footerChildren:this.renderDeleteConfirmationPopupFooter(a),noHeader:!0},i.a.createElement("div",{className:"m-sub-items__confirmation-modal-body"},c)),this.bulkActionModalContainer)}},{key:"renderHideConfirmationPopup",value:function(){var e=this.state.isBulkHidePopupVisible;if(!e)return null;var t=Translator.trans("bulk_hide.popup.message",{},"sub_items");return o.a.createPortal(i.a.createElement(Ue,{onClose:this.closeBulkHidePopup,isVisible:e,isLoading:!1,size:"medium",footerChildren:this.renderHideConfirmationPopupFooter(),noHeader:!0},i.a.createElement("div",{className:"m-sub-items__confirmation-modal-body"},t)),this.bulkActionModalContainer)}},{key:"renderUnhideConfirmationPopup",value:function(){var e=this.state.isBulkUnhidePopupVisible;if(!e)return null;var t=Translator.trans("bulk_unhide.popup.message",{},"sub_items");return o.a.createPortal(i.a.createElement(Ue,{onClose:this.closeBulkUnhidePopup,isVisible:e,isLoading:!1,size:"medium",footerChildren:this.renderUnhideConfirmationPopupFooter(),noHeader:!0},i.a.createElement("div",{className:"m-sub-items__confirmation-modal-body"},t)),this.bulkActionModalContainer)}},{key:"changePage",value:function(e){this.updateListViewHeight(),this.setState((function(){return{activePageIndex:e,activePageItems:null}}))}},{key:"getPageSelectedLocationsIds",value:function(){var e=this.state,t=e.selectedItems,n=e.activePageItems,r=ct(t.keys()),i=ct(n.map((function(e){return e.id})));return new Set(i.filter((function(e){return r.includes(e)})))}},{key:"renderExtraActions",value:function(e,t){var n=e.component;return i.a.createElement(n,lt({key:t,className:"m-sub-items__action"},e.attrs))}},{key:"renderPaginationInfo",value:function(){var e=this.state,t=e.totalCount,n=e.activePageItems,r=n?n.length:0,a=Translator.trans("viewing_message",{viewingCount:r,totalCount:t},"sub_items");return i.a.createElement("div",{className:"m-sub-items__pagination-info",dangerouslySetInnerHTML:{__html:a}})}},{key:"renderPagination",value:function(){var e=this.props.limit,t=this.state.totalCount,n=this.state,r=n.activePageIndex,a=n.activePageItems,o=n.isDuringBulkOperation,l=!a||o;return i.a.createElement(Me.a,{proximity:1,itemsPerPage:e,activePageIndex:r,totalCount:t,onPageChange:this.changePage,disabled:l})}},{key:"renderBulkMoveBtn",value:function(e){var t=Translator.trans("move_btn.label",{},"sub_items");return i.a.createElement(ze,{disabled:e,onClick:this.onMoveBtnClick,label:t,type:"move"})}},{key:"renderBulkAddLocationBtn",value:function(e){var t=Translator.trans("add_locations_btn.label",{},"sub_items");return i.a.createElement(ze,{disabled:e,onClick:this.onAddLocationsBtnClick,label:t,type:"create-location"})}},{key:"renderBulkHideBtn",value:function(e){var t=Translator.trans("hide_locations_btn.label",{},"sub_items");return i.a.createElement(ze,{disabled:e,onClick:this.onHideBtnClick,label:t,type:"hide"})}},{key:"renderBulkUnhideBtn",value:function(e){var t=Translator.trans("unhide_locations_btn.label",{},"sub_items");return i.a.createElement(ze,{disabled:e,onClick:this.onUnhideBtnClick,label:t,type:"reveal"})}},{key:"renderBulkDeleteBtn",value:function(e){var t=Translator.trans("trash_btn.label",{},"sub_items");return i.a.createElement(ze,{disabled:e,onClick:this.onDeleteBtnClick,label:t,type:"trash"})}},{key:"renderSpinner",value:function(){if(this.state.activePageItems)return null;var e=this.state.listViewHeight,t={height:e&&e>90?e:90};return i.a.createElement("div",{style:t},i.a.createElement("div",{className:"m-sub-items__spinner-wrapper"},i.a.createElement(c.a,{name:"spinner",extraClasses:"m-sub-items__spinner ez-icon--medium ez-spin"})))}},{key:"renderNoItems",value:function(){return this.state.totalCount?null:i.a.createElement(Fe,null)}},{key:"renderListView",value:function(){var e=this.state,t=e.activePageItems,n=e.sortClause,r=e.sortOrder;if(!t)return null;var a=this.getPageSelectedLocationsIds();return i.a.createElement(Ce,{activeView:this.state.activeView,handleItemPriorityUpdate:this.handleItemPriorityUpdate,items:t,languages:this.props.languages,handleEditItem:this.props.handleEditItem,generateLink:this.props.generateLink,onItemSelect:this.toggleItemSelection,toggleAllItemsSelect:this.toggleAllPageItemsSelection,selectedLocationsIds:a,onSortChange:this.changeSorting,sortClause:n,sortOrder:r,languageContainerSelector:this.props.languageContainerSelector})}},{key:"updateTrashModal",value:function(){document.body.dispatchEvent(new CustomEvent("ez-trash-modal-refresh",{detail:{numberOfSubitems:this.state.totalCount}}))}},{key:"render",value:function(){var e=Translator.trans("items_list.title",{},"sub_items"),t=this.state,n=t.selectedItems,r=t.activeView,a=t.totalCount,o=t.isDuringBulkOperation,l=t.activePageItems,s=!(n.size&&"table"===r&&l),c=!0,u=!0,d="m-sub-items__list";if(o&&(d="".concat(d," ").concat(d,"--processing")),!s){var f=ct(n.values());c=!f.some((function(e){return!e.hidden})),u=!f.some((function(e){return!!e.hidden}))}return i.a.createElement("div",{className:"m-sub-items"},i.a.createElement("div",{className:"m-sub-items__header"},i.a.createElement("div",{className:"m-sub-items__title"},e," (",this.state.totalCount,")"),i.a.createElement("div",{className:"m-sub-items__actions"},this.props.extraActions.map(this.renderExtraActions),this.renderBulkMoveBtn(s),this.renderBulkAddLocationBtn(s),this.renderBulkHideBtn(c),this.renderBulkUnhideBtn(u),this.renderBulkDeleteBtn(s)),i.a.createElement(m,{onViewChange:this.switchView,activeView:r,isDisabled:!a})),i.a.createElement("div",{ref:this._refListViewWrapper,className:d},this.renderSpinner(),this.renderListView(),this.renderNoItems()),i.a.createElement("div",{className:"m-sub-items__pagination-container"},this.renderPaginationInfo(),this.renderPagination()),this.renderUdw(),this.renderDeleteConfirmationPopup(),this.renderHideConfirmationPopup(),this.renderUnhideConfirmationPopup())}}])&&bt(t.prototype,n),a&&bt(t,a),s}(r.Component);eZ.addConfig("modules.SubItems",Ct),Ct.propTypes={parentLocationId:s.a.number.isRequired,restInfo:s.a.shape({token:s.a.string.isRequired,siteaccess:s.a.string.isRequired}).isRequired,loadLocation:s.a.func,sortClauses:s.a.object,updateLocationPriority:s.a.func,activeView:s.a.string,extraActions:s.a.arrayOf(s.a.shape({component:s.a.func,attrs:s.a.object})),items:s.a.arrayOf(s.a.object),limit:s.a.number,offset:s.a.number,handleEditItem:s.a.func.isRequired,generateLink:s.a.func.isRequired,totalCount:s.a.number,languages:s.a.object,udwConfigBulkMoveItems:s.a.object.isRequired,udwConfigBulkAddLocation:s.a.object.isRequired,showBulkActionFailedModal:s.a.func.isRequired,languageContainerSelector:s.a.string},Ct.defaultProps={loadLocation:function(e,t,n){var r=e.token,i=e.siteaccess,a=t.locationId,o=void 0===a?2:a,l=t.limit,s=void 0===l?10:l,c=t.cursor,u=t.sortClause,d=t.sortOrder,f=c?', after: "'.concat(c,'"'):"",m=Ke[u],p=d===kt?"":"_desc",b=m?"sortBy: [".concat(m,", ").concat(p,"], "):"",h="\n    {\n        _repository {\n            location(locationId: ".concat(o,") {\n                pathString\n                children(").concat(b," first:").concat(s," ").concat(f,") {\n                    totalCount\n                    pages {\n                        number\n                        cursor\n                    }\n                    edges {\n                        node {\n                            id\n                            remoteId\n                            invisible\n                            hidden\n                            priority\n                            pathString\n    \n                            content {\n                                _thumbnail {\n                                    uri\n                                    alternativeText\n                                    mimeType\n                                }\n                                _name\n                                _info {\n                                    id\n                                    name\n                                    remoteId\n                                    mainLanguageCode\n                                    owner {\n                                        name\n                                    }\n                                    currentVersion {\n                                        versionNumber\n                                        creator {\n                                            name\n                                        }\n                                        languageCodes\n                                    }\n                                    contentType {\n                                        name\n                                        identifier\n                                    }\n                                    section {\n                                        name\n                                    }\n                                    publishedDate {\n                                        timestamp\n                                    }\n                                    modificationDate {\n                                        timestamp\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }"),y=new Request("/graphql",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Siteaccess":i,"X-CSRF-Token":r},body:JSON.stringify({query:h}),mode:"cors",credentials:"same-origin"});fetch(y).then(Je.a).then(n).catch((function(){return window.eZ.helpers.notification.showErrorNotification("Cannot load location")}))},sortClauses:{},updateLocationPriority:function(e,t){var n=e.priority,r=e.pathString,i=e.token,a=e.siteaccess,o="".concat("/api/ezp/v2/content/locations").concat(r.slice(0,-1)),l=new Request(o,{method:"POST",headers:{Accept:"application/vnd.ez.api.Location+json","Content-Type":"application/vnd.ez.api.LocationUpdate+json","X-Siteaccess":a,"X-CSRF-Token":i,"X-HTTP-Method-Override":"PATCH"},credentials:"same-origin",mode:"cors",body:JSON.stringify({LocationUpdate:{priority:n}})});fetch(l).then(Je.a).then(t).catch((function(){return window.eZ.helpers.notification.showErrorNotification("An error occurred while updating location priority")}))},activeView:"table",extraActions:[],languages:window.eZ.adminUiConfig.languages,items:[],limit:parseInt(window.eZ.adminUiConfig.subItems.limit,10),offset:0,totalCount:0,languageContainerSelector:".ez-extra-actions-container"}},cDcd:function(e,t){e.exports=React},faye:function(e,t){e.exports=ReactDOM},iRWG:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=function(e){if(!e.ok)throw Error(e.statusText);return e},i=function(e){return r(e).json()},a=function(e){return r(e).status}},nLu2:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return a}));var a=function(e){return"[object Object]"!==Object.prototype.toString.call(e)?"":Object.entries(e).reduce((function(e,t){var n=r(t,2),i=n[0],a=n[1];return"".concat(e," ").concat(a?i:"")}),"").trim()}},rf6O:function(e,t){e.exports=PropTypes},tw3r:function(e,t,n){"use strict";var r=n("cDcd"),i=n.n(r),a=n("rf6O"),o=n.n(a),l=function(e){var t=e.label,n=e.disabled,r=e.additionalClasses,a=e.buttonAdditionalClasses,o=e.onPageChange,l=e.pageIndex,s="c-pagination-button page-item ".concat(r);return s=n?"".concat(s," disabled"):s,i.a.createElement("li",{className:s},i.a.createElement("button",{className:"page-link ".concat(a),onClick:function(){!n&&Number.isInteger(l)&&o(l)},type:"button"},t))};l.propTypes={label:o.a.string.isRequired,disabled:o.a.bool,onPageChange:o.a.func,pageIndex:o.a.number.isRequired,additionalClasses:o.a.string,buttonAdditionalClasses:o.a.string},l.defaultProps={disabled:!1,additionalClasses:"",buttonAdditionalClasses:"",onPageChange:function(){}};var s=l,c=function(e){var t=e.totalCount,n=e.itemsPerPage,r=e.proximity,a=e.activePageIndex,o=e.onPageChange,l=e.disabled,c=Math.ceil(t/n);if(c<=1)return null;var u=Translator.trans("pagination.back",{},"sub_items"),d=Translator.trans("pagination.next",{},"sub_items"),f=a-1,m=a+1,p=0===a,b=a+1===c,h=function(e){for(var t=e.proximity,n=e.activePageIndex,r=e.pagesCount,i=e.separator,a=[],o=!1,l=1;l<=r;l++){1===l||l===r||l>=n+1-t&&l<=n+1+t?(a.push(l),o=!1):o||(a.push(i),o=!0)}return a}({proximity:r,activePageIndex:a,pagesCount:c,separator:"..."}).map((function(e,t){if("..."===e)return i.a.createElement(s,{key:"dots-".concat(t),label:"...",disabled:!0});var n=e===a+1?"active":"",r=""+e;return i.a.createElement(s,{key:e,pageIndex:e-1,label:r,additionalClasses:n,onPageChange:o,disabled:l})}));return i.a.createElement("ul",{className:"c-pagination pagination"},i.a.createElement(s,{pageIndex:f,label:u,additionalClasses:"prev",disabled:p||l,onPageChange:o}),h,i.a.createElement(s,{pageIndex:m,label:d,additionalClasses:"next",disabled:b||l,onPageChange:o}))};c.propTypes={proximity:o.a.number.isRequired,itemsPerPage:o.a.number.isRequired,activePageIndex:o.a.number.isRequired,totalCount:o.a.number.isRequired,onPageChange:o.a.func.isRequired,disabled:o.a.bool.isRequired};t.a=c},uHg5:function(e,t,n){"use strict";var r=n("cDcd"),i=n.n(r),a=n("rf6O"),o=n.n(a),l=function(e){var t=e.customPath?e.customPath:window.eZ.helpers.icon.getIconPath(e.name),n="ez-icon";return e.extraClasses&&(n="".concat(n," ").concat(e.extraClasses)),i.a.createElement("svg",{className:n},i.a.createElement("use",{xlinkHref:t}))};l.propTypes={extraClasses:o.a.string,name:o.a.string,customPath:o.a.string},l.defaultProps={customPath:null,name:null,extraClasses:null},t.a=l},xeH2:function(e,t){e.exports=jQuery}},[[35,"runtime"]]]);