(window.webpackJsonp=window.webpackJsonp||[]).push([["ezplatform-admin-ui-udw-js"],{31:function(t,e,n){t.exports=n("CgFf")},AJkD:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function t(e){var n;if("object"!==r(e))return e;if(!e)return e;if("[object Array]"===Object.prototype.toString.apply(e)){n=[];for(var o=0;o<e.length;o++)n[o]=t(e[o]);return n}for(var i in n={},e)e.hasOwnProperty(i)&&(n[i]=t(e[i]));return n}},CgFf:function(t,e,n){"use strict";n.r(e),n.d(e,"SORTING_OPTIONS",(function(){return L})),n.d(e,"VIEWS",(function(){return T})),n.d(e,"UDWContext",(function(){return P})),n.d(e,"RestInfoContext",(function(){return R})),n.d(e,"AllowRedirectsContext",(function(){return _})),n.d(e,"AllowConfirmationContext",(function(){return k})),n.d(e,"ContentTypesMapContext",(function(){return D})),n.d(e,"ContentTypesInfoMapContext",(function(){return q})),n.d(e,"MultipleConfigContext",(function(){return V})),n.d(e,"ContainersOnlyContext",(function(){return N})),n.d(e,"AllowedContentTypesContext",(function(){return z})),n.d(e,"ActiveTabContext",(function(){return F})),n.d(e,"TabsConfigContext",(function(){return X})),n.d(e,"TabsContext",(function(){return U})),n.d(e,"TitleContext",(function(){return M})),n.d(e,"CancelContext",(function(){return G})),n.d(e,"ConfirmContext",(function(){return J})),n.d(e,"SortingContext",(function(){return W})),n.d(e,"SortOrderContext",(function(){return H})),n.d(e,"CurrentViewContext",(function(){return B})),n.d(e,"MarkedLocationIdContext",(function(){return Z})),n.d(e,"LoadedLocationsMapContext",(function(){return Q})),n.d(e,"RootLocationIdContext",(function(){return $})),n.d(e,"SelectedLocationsContext",(function(){return Y})),n.d(e,"CreateContentWidgetContext",(function(){return K})),n.d(e,"ContentOnTheFlyDataContext",(function(){return tt})),n.d(e,"ContentOnTheFlyConfigContext",(function(){return et})),n.d(e,"EditOnTheFlyDataContext",(function(){return nt}));var r=n("cDcd"),o=n.n(r),i=n("rf6O"),a=n.n(i),c=n("AJkD"),u=n("nLu2");function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var m=[{parentLocationId:1,subitems:[]}],v=function(t,e){switch(e.type){case"CUT_LOCATIONS":return function(t,e){var n=t.findIndex((function(t){return t.parentLocationId===e.locationId}));return-1===n?t:t.slice(0,n+1)}(t,e);case"UPDATE_LOCATIONS":return function(t,e){var n=t.findIndex((function(t){return t.parentLocationId===e.data.parentLocationId})),r=l(t);if(-1!==n)return r[n]=e.data,r;var o=t.findIndex((function(t){return t.subitems.find((function(t){return t.location.id===e.data.parentLocationId}))}));return-1!==o&&(r=r.slice(0,o+1)),r.push(e.data),r}(t,e);case"SET_LOCATIONS":return function(t,e){return e.data}(0,e);case"CLEAR_LOCATIONS":return[];default:throw new Error}};function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||y(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t){return function(t){if(Array.isArray(t))return C(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){if(t){if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(t,e):void 0}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var O=[],h=function(t,e){switch(e.type){case"ADD_SELECTED_LOCATION":return[].concat(b(t),[{location:e.location,permissions:e.permissions}]);case"REMOVE_SELECTED_LOCATION":return t.filter((function(t){return t.location.id!==e.id}));case"CLEAR_SELECTED_LOCATIONS":return[];case"REPLACE_SELECTED_LOCATIONS":return e.locations;default:throw new Error}},g=n("xI8+");function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){S(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var L=[{label:Translator.trans("sorting.date.label",{},"universal_discovery_widget"),tooltipLabel:Translator.trans("sorting.date.tooltip",{},"universal_discovery_widget"),sortClause:"DatePublished"},{label:Translator.trans("sorting.name.label",{},"universal_discovery_widget"),tooltipLabel:Translator.trans("sorting.name.tooltip",{},"universal_discovery_widget"),sortClause:"ContentName"}],T=[{id:"grid",icon:"view-grid",tooltipLabel:Translator.trans("sorting.grid.view",{},"universal_discovery_widget")},{id:"finder",icon:"panels",tooltipLabel:Translator.trans("sorting.panels.view",{},"universal_discovery_widget")},{id:"tree",icon:"content-tree",tooltipLabel:Translator.trans("sorting.tree.view",{},"universal_discovery_widget")}],A={token:document.querySelector('meta[name="CSRF-Token"]').content,siteaccess:document.querySelector('meta[name="SiteAccess"]').content},x=Object.values(eZ.adminUiConfig.contentTypes).reduce((function(t,e){return e.forEach((function(e){t[e.href]=e})),t}),{}),P=Object(r.createContext)(),R=Object(r.createContext)(),_=Object(r.createContext)(),k=Object(r.createContext)(),D=Object(r.createContext)(),q=Object(r.createContext)(),V=Object(r.createContext)(),N=Object(r.createContext)(),z=Object(r.createContext)(),F=Object(r.createContext)(),X=Object(r.createContext)(),U=Object(r.createContext)(),M=Object(r.createContext)(),G=Object(r.createContext)(),J=Object(r.createContext)(),W=Object(r.createContext)(),H=Object(r.createContext)(),B=Object(r.createContext)(),Z=Object(r.createContext)(),Q=Object(r.createContext)(),$=Object(r.createContext)(),Y=Object(r.createContext)(),K=Object(r.createContext)(),tt=Object(r.createContext)(),et=Object(r.createContext)(),nt=Object(r.createContext)(),rt=function(t){var e=window.eZ.adminUiConfig.universalDiscoveryWidget.tabs,n=t.startingLocationId||t.rootLocationId,i=E(Object(r.useState)(t.activeTab),2),a=i[0],l=i[1],d=E(Object(r.useState)(t.activeSortClause),2),f=d[0],b=d[1],y=E(Object(r.useState)(t.activeSortOrder),2),C=y[0],w=y[1],S=E(Object(r.useState)(t.activeView),2),I=S[0],L=S[1],T=E(Object(r.useState)(1!==n?n:null),2),rt=T[0],ot=T[1],it=E(Object(r.useState)(!1),2),at=it[0],ct=it[1],ut=E(Object(r.useState)({}),2),st=ut[0],lt=ut[1],dt=E(Object(r.useState)({}),2),ft=dt[0],mt=dt[1],vt=E(Object(r.useState)({}),2),pt=vt[0],bt=vt[1],yt=E(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=Object(r.useReducer)(v,t),n=s(e,2),o=n[0],i=n[1];return[o,i]}([{parentLocationId:t.rootLocationId,subitems:[]}]),2),Ct=yt[0],Ot=yt[1],ht=E(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=Object(r.useReducer)(h,t),n=p(e,2),o=n[0],i=n[1];return[o,i]}(),2),gt=ht[0],wt=ht[1],jt=e.find((function(t){return t.id===a})).component,St=Object(u.a)({"m-ud":!0,"m-ud--locations-selected":!!gt.length&&t.allowConfirmation}),Et=function(t){var e=Object(c.a)(gt);t.forEach((function(t){var n=e.find((function(e){return e.location.id===t.location.Location.id}));n&&(n.permissions=t.permissions)})),wt({type:"REPLACE_SELECTED_LOCATIONS",locations:e})};return Object(r.useEffect)((function(){return Object(g.i)(A,(function(t){var e=t.ContentTypeInfoList.ContentType.reduce((function(t,e){return t[e._href]=e,t}),{});bt(e)})),window.document.body.dispatchEvent(new CustomEvent("ez-udw-opened")),window.eZ.helpers.tooltips.parse(window.document.querySelector(".c-udw-tab")),function(){window.document.body.dispatchEvent(new CustomEvent("ez-udw-closed"))}}),[]),Object(r.useEffect)((function(){t.selectedLocations.length&&Object(g.c)(j(j({},A),{},{id:t.selectedLocations.join(",")}),(function(e){var n=t.selectedLocations.map((function(t){return{location:e.find((function(e){return e.id===parseInt(t,10)}))}}));wt({type:"REPLACE_SELECTED_LOCATIONS",locations:n})}))}),[t.selectedLocations]),Object(r.useEffect)((function(){var t=gt.filter((function(t){return!t.permissions})).map((function(t){return t.location.id})).join(",");t&&Object(g.j)({locationIds:t},Et)}),[gt]),Object(r.useEffect)((function(){var t=gt.filter((function(t){return!t.location.ContentInfo.Content.CurrentVersion.Version}));if(t.length){var e=t.map((function(t){return t.location.ContentInfo.Content._id})).join(",");Object(g.h)(j(j({},A),{},{contentId:e}),(function(t){var e=gt;t.forEach((function(t){var n=e.find((function(e){return e.location.ContentInfo.Content._id===t._id}));n&&(n.location.ContentInfo.Content.CurrentVersion.Version=t.CurrentVersion.Version)})),wt({type:"REPLACE_SELECTED_LOCATIONS",locations:e})}))}}),[gt]),Object(r.useEffect)((function(){return window.document.body.classList.add("ez-scroll-disabled"),function(){window.document.body.classList.remove("ez-scroll-disabled")}})),Object(r.useEffect)((function(){"grid"===I?(Ct[Ct.length-1].subitems=[],Ot({type:"SET_LOCATIONS",data:Ct})):("finder"===I||"tree"===I)&&rt&&rt!==Ct[Ct.length-1].parentLocationId&&Ct[Ct.length-1].subitems.find((function(t){return t.location.id===rt}))&&Ot({type:"UPDATE_LOCATIONS",data:{parentLocationId:rt,subitems:[]}})}),[I]),Object(r.useEffect)((function(){t.startingLocationId&&1!==t.startingLocationId&&Object(g.f)(j(j({},A),{},{parentLocationId:t.startingLocationId,sortClause:f,sortOrder:C,gridView:"grid"===I,rootLocationId:t.rootLocationId}),(function(e){Ot({type:"SET_LOCATIONS",data:e}),ot(t.startingLocationId)}))}),[t.startingLocationId]),Object(r.useEffect)((function(){var t=Ct.map((function(t){return t.subitems=[],t}));Ot({type:"SET_LOCATIONS",data:t})}),[f,C]),o.a.createElement("div",{className:St},o.a.createElement(P.Provider,{value:!0},o.a.createElement(R.Provider,{value:A},o.a.createElement(_.Provider,{value:t.allowRedirects},o.a.createElement(k.Provider,{value:t.allowConfirmation},o.a.createElement(q.Provider,{value:pt},o.a.createElement(D.Provider,{value:x},o.a.createElement(V.Provider,{value:[t.multiple,t.multipleItemsLimit]},o.a.createElement(N.Provider,{value:t.containersOnly},o.a.createElement(z.Provider,{value:t.allowedContentTypes},o.a.createElement(F.Provider,{value:[a,l]},o.a.createElement(U.Provider,{value:e},o.a.createElement(X.Provider,{value:t.tabsConfig},o.a.createElement(M.Provider,{value:t.title},o.a.createElement(G.Provider,{value:t.onCancel},o.a.createElement(J.Provider,{value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,n=e.map((function(t){var e=Object(c.a)(t.location),n=e.ContentInfo.Content.ContentType;return e.ContentInfo.Content.ContentTypeInfo=pt[n._href],e}));t.onConfirm(n)}},o.a.createElement(W.Provider,{value:[f,b]},o.a.createElement(H.Provider,{value:[C,w]},o.a.createElement(B.Provider,{value:[I,L]},o.a.createElement(Z.Provider,{value:[rt,ot]},o.a.createElement(Q.Provider,{value:[Ct,Ot]},o.a.createElement($.Provider,{value:t.rootLocationId},o.a.createElement(Y.Provider,{value:[gt,wt]},o.a.createElement(K.Provider,{value:[at,ct]},o.a.createElement(tt.Provider,{value:[st,lt]},o.a.createElement(et.Provider,{value:t.contentOnTheFly},o.a.createElement(nt.Provider,{value:[ft,mt]},o.a.createElement(jt,null))))))))))))))))))))))))))))};rt.propTypes={onConfirm:a.a.func.isRequired,onCancel:a.a.func.isRequired,title:a.a.string.isRequired,activeTab:a.a.string,rootLocationId:a.a.number,startingLocationId:a.a.number,multiple:a.a.bool,multipleItemsLimit:a.a.number,containersOnly:a.a.bool,allowedContentTypes:a.a.array.isRequired,activeSortClause:a.a.string,activeSortOrder:a.a.string,activeView:a.a.string,contentOnTheFly:a.a.shape({allowedLanguages:a.a.array.isRequired,allowedLocations:a.a.array.isRequired,preselectedLocation:a.a.string.isRequired,preselectedContentType:a.a.string.isRequired,hidden:a.a.bool.isRequired,autoConfirmAfterPublish:a.a.bool.isRequired}).isRequired,tabsConfig:a.a.objectOf(a.a.shape({itemsPerPage:a.a.number.isRequired,priority:a.a.number.isRequired,hidden:a.a.bool.isRequired})).isRequired,selectedLocations:a.a.array,allowRedirects:a.a.bool.isRequired,allowConfirmation:a.a.bool.isRequired},rt.defaultProps={activeTab:"browse",rootLocationId:1,startingLocationId:null,multiple:!1,multipleItemsLimit:1,containersOnly:!1,activeSortClause:"date",activeSortOrder:"ascending",activeView:"finder",tabs:window.eZ.adminUiConfig.universalDiscoveryWidget.tabs,selectedLocations:[]},eZ.addConfig("modules.UniversalDiscovery",rt);e.default=rt},Y1Nf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=function(t){var e=new CustomEvent("ez-notify",{detail:t});document.body.dispatchEvent(e)},o=function(t){var e=t instanceof Error?t.message:t;r({message:e,label:"error"})}},cDcd:function(t,e){t.exports=React},iRWG:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var r=function(t){if(!t.ok)throw Error(t.statusText);return t},o=function(t){return r(t).json()},i=function(t){return r(t).status}},nLu2:function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return i}));var i=function(t){return"[object Object]"!==Object.prototype.toString.call(t)?"":Object.entries(t).reduce((function(t,e){var n=r(e,2),o=n[0],i=n[1];return"".concat(t," ").concat(i?o:"")}),"").trim()}},rf6O:function(t,e){t.exports=PropTypes},"xI8+":function(t,e,n){"use strict";n.d(e,"d",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"c",(function(){return m})),n.d(e,"g",(function(){return v})),n.d(e,"a",(function(){return b})),n.d(e,"k",(function(){return y})),n.d(e,"i",(function(){return C})),n.d(e,"b",(function(){return O})),n.d(e,"h",(function(){return h})),n.d(e,"j",(function(){return g}));var r=n("Y1Nf"),o=n("iRWG");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u={Accept:"application/vnd.ez.api.View+json; version=1.1","Content-Type":"application/vnd.ez.api.ViewInput+json; version=1.1"},s=function(t){return t.locations.map((function(e){var n={location:e.Location};if(t.versions){var r=t.versions.find((function(t){return t.Version.VersionInfo.Content._href===e.Location.Content._href}));n.version=r.Version}return n}))},l=function(t,e){var n=t.token,i=t.parentLocationId,a=t.limit,c=void 0===a?50:a,u=t.offset,l=void 0===u?0:u,d=t.sortClause,f=void 0===d?"DatePublished":d,m=t.sortOrder,v=void 0===m?"ascending":m,p=t.gridView,b=void 0!==p&&p?"ezplatform.udw.location_gridview.data":"ezplatform.udw.location.data",y=window.Routing.generate(b,{locationId:i}),C=new Request("".concat(y,"?limit=").concat(c,"&offset=").concat(l,"&sortClause=").concat(f,"&sortOrder=").concat(v),{method:"GET",headers:{"X-CSRF-Token":n},mode:"same-origin",credentials:"same-origin"});fetch(C).then(o.a).then((function(t){var n=t.bookmarked,r=t.location,o=t.permissions,a=t.subitems,c=t.version,u=s(a),l={location:r?r.Location:null,version:c?c.Version:null,totalCount:a.totalCount,subitems:u,bookmarked:n,permissions:o,parentLocationId:i};e(l)})).catch(r.a)},d=function(t,e){var n=t.token,i=t.parentLocationId,a=t.limit,c=void 0===a?50:a,u=t.sortClause,l=void 0===u?"DatePublished":u,d=t.sortOrder,f=void 0===d?"ascending":d,m=t.gridView,v=void 0!==m&&m,p=t.rootLocationId,b=void 0===p?1:p,y=v?"ezplatform.udw.accordion_gridview.data":"ezplatform.udw.accordion.data",C=window.Routing.generate(y,{locationId:i}),O=new Request("".concat(C,"?limit=").concat(c,"&sortClause=").concat(l,"&sortOrder=").concat(f,"&rootLocationId=").concat(b),{method:"GET",headers:{"X-CSRF-Token":n},mode:"same-origin",credentials:"same-origin"});fetch(O).then(o.a).then((function(t){var n=t.breadcrumb.map((function(e){var n=e.Location,r=t.columns[n.id];return{location:n,totalCount:r?r.subitems.totalCount:void 0,subitems:r?s(r.subitems):[],parentLocationId:n.id,collapsed:!t.columns[n.id]}})),r=t.columns[1],o=t.columns[i];r&&n.unshift({totalCount:r?r.subitems.totalCount:void 0,subitems:r?s(r.subitems):[],parentLocationId:1,collapsed:!1}),n.push({location:o.location.Location,version:o.version.Version,totalCount:o?o.subitems.totalCount:void 0,subitems:o?s(o.subitems):[],bookmarked:o.bookmarked,permissions:o.permissions,parentLocationId:i}),e(n)})).catch(r.a)},f=function(t,e){var n=t.token,i=t.siteaccess,c=t.query,s=t.limit,l=void 0===s?50:s,d=t.offset,f=void 0===d?0:d,m=t.languageCode,v=void 0===m?null:m,p=JSON.stringify({ViewInput:{identifier:"udw-locations-by-search-query-".concat(c.FullTextCriterion),public:!1,languageCode:v,useAlwaysAvailable:!0,LocationQuery:{FacetBuilders:{},SortClauses:{},Query:c,limit:l,offset:f}}}),b=new Request("/api/ezp/v2/views",{method:"POST",headers:a(a({},u),{},{"X-Siteaccess":i,"X-CSRF-Token":n}),body:p,mode:"same-origin",credentials:"same-origin"});fetch(b).then(o.a).then((function(t){var n=t.View.Result,r=n.count,o=n.searchHits.searchHit.map((function(t){return t.value.Location}));e({items:o,count:r})})).catch(r.a)},m=function(t,e){var n=t.token,i=t.siteaccess,c=t.id,s=t.limit,l=void 0===s?50:s,d=t.offset,f=void 0===d?0:d,m=JSON.stringify({ViewInput:{identifier:"udw-locations-by-id-".concat(c),public:!1,LocationQuery:{FacetBuilders:{},SortClauses:{SectionIdentifier:"ascending"},Filter:{LocationIdCriterion:c},limit:l,offset:f}}}),v=new Request("/api/ezp/v2/views",{method:"POST",headers:a(a({},u),{},{"X-Siteaccess":i,"X-CSRF-Token":n}),body:m,mode:"same-origin",credentials:"same-origin"});fetch(v).then(o.a).then((function(t){var n=t.View.Result.searchHits.searchHit.map((function(t){return t.value.Location}));e(n)})).catch(r.a)},v=function(t,e){var n=t.token,i=t.siteaccess,a=t.limit,c=t.offset,u=new Request("".concat("/api/ezp/v2/bookmark","?limit=").concat(a,"&offset=").concat(c),{method:"GET",headers:{"X-Siteaccess":i,"X-CSRF-Token":n,Accept:"application/vnd.ez.api.ContentTypeInfoList+json"},mode:"same-origin",credentials:"same-origin"});fetch(u).then(o.a).then((function(t){var n=t.BookmarkList.count,r=t.BookmarkList.items.map((function(t){return t.Location}));e({count:n,items:r})})).catch(r.a)},p=function(t,e,n){var i=t.siteaccess,a=t.token,c=t.locationId,u=new Request("".concat("/api/ezp/v2/bookmark","/").concat(c),{method:n,headers:{"X-Siteaccess":i,"X-CSRF-Token":a},mode:"same-origin",credentials:"same-origin"});fetch(u).then(o.b).then(e).catch(r.a)},b=function(t,e){p(t,e,"POST")},y=function(t,e){p(t,e,"DELETE")},C=function(t,e){var n=t.token,i=t.siteaccess,a=new Request("/api/ezp/v2/content/types",{method:"GET",headers:{Accept:"application/vnd.ez.api.ContentTypeInfoList+json","X-Siteaccess":i,"X-CSRF-Token":n},mode:"same-origin",credentials:"same-origin"});fetch(a).then(o.a).then(e).catch(r.a)},O=function(t,e){var n=t.token,i=t.siteaccess,a=t.contentId,c=new Request("/api/ezp/v2/content/objects/".concat(a,"/currentversion"),{method:"COPY",headers:{Accept:"application/vnd.ez.api.VersionUpdate+json","X-Siteaccess":i,"X-CSRF-Token":n},mode:"same-origin",credentials:"same-origin"});fetch(c).then(o.a).then(e).catch(r.a)},h=function(t,e){var n=t.token,i=t.siteaccess,a=t.contentId,c=t.limit,s=void 0===c?50:c,l=t.offset,d=void 0===l?0:l,f=JSON.stringify({ViewInput:{identifier:"udw-load-content-info-".concat(a),public:!1,ContentQuery:{FacetBuilders:{},SortClauses:{},Filter:{ContentIdCriterion:"".concat(a)},limit:s,offset:d}}}),m=new Request("/api/ezp/v2/views",{method:"POST",headers:Object.assign({},u,{"X-Siteaccess":i,"X-CSRF-Token":n}),body:f,mode:"same-origin",credentials:"same-origin"});fetch(m).then(o.a).then((function(t){var n=t.View.Result.searchHits.searchHit.map((function(t){return t.value.Content}));e(n)})).catch(r.a)},g=function(t,e){var n=t.locationIds,i=window.Routing.generate("ezplatform.udw.locations.data"),a=new Request("".concat(i,"?locationIds=").concat(n),{method:"GET",mode:"same-origin",credentials:"same-origin"});fetch(a).then(o.a).then(e).catch(r.a)}}},[[31,"runtime"]]]);