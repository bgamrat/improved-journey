(window.webpackJsonp=window.webpackJsonp||[]).push([["ezplatform-admin-ui-udw-tabs-js"],{"+bWA":function(e,t,n){"use strict";n.r(t);var r=n("cDcd"),o=n.n(r),a=n("CgFf"),i=n("xI8+"),c=n("AJkD"),s=n("nLu2");function l(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(){var e,t,n,u,f=m(Object(r.useState)(!0),2),b=f[0],p=f[1],y=m(Object(r.useContext)(a.ContentOnTheFlyDataContext),2),v=y[0],h=y[1],g=Object(r.useContext)(a.TabsContext),C=Object(r.useContext)(a.ContentOnTheFlyConfigContext),O=Object(r.useContext)(a.ConfirmContext),w=Object(r.useContext)(a.RestInfoContext),E=m(Object(r.useContext)(a.ActiveTabContext),2),j=(E[0],E[1]),_=m(Object(r.useContext)(a.CreateContentWidgetContext),2),S=(_[0],_[1]),I=m(Object(r.useContext)(a.SelectedLocationsContext),2),T=I[0],x=I[1],L=m(Object(r.useContext)(a.LoadedLocationsMapContext),2),A=L[0],P=L[1],N=m(Object(r.useContext)(a.MultipleConfigContext),2),k=N[0],R=(N[1],t=(e=v).locationId,n=e.languageCode,u=e.contentTypeIdentifier,window.Routing.generate("ezplatform.content_on_the_fly.create",{locationId:t,languageCode:n,contentTypeIdentifier:u})),D=Object(r.createRef)(),z=function(){S(!1),h({}),j(g[0].id)},M=function(){return p(!1)},q=function(){return p(!0)},U=Translator.trans("content_create.cancel.label",{},"universal_discovery_widget"),F=Translator.trans("content_create.confirm.label",{},"universal_discovery_widget"),Z=Object(s.a)({"m-content-create":!0,"m-content-create--footer-visible":b});return Object(r.useEffect)((function(){return window.document.body.addEventListener("ez-udw-hide-footer",M,!1),window.document.body.addEventListener("ez-udw-show-footer",q,!1),function(){window.document.body.removeEventListener("ez-udw-hide-footer",M,!1),window.document.body.removeEventListener("ez-udw-show-footer",q,!1)}})),o.a.createElement("div",{className:Z},o.a.createElement("iframe",{src:R,className:"m-content-create__iframe",ref:D,onLoad:function(){var e=D.current.contentWindow.document.querySelector('meta[name="LocationID"]');e&&Object(i.c)(d(d({},w),{},{id:parseInt(e.content,10)}),(function(e){if(C.autoConfirmAfterPublish){var t=k?[].concat(l(T),[{location:e[0]}]):[{location:e[0]}];O(t)}else{var n=Object(c.a)(A),r=n[n.length-1],o=k?{type:"ADD_SELECTED_LOCATION",location:e[0]}:{type:"REPLACE_SELECTED_LOCATIONS",locations:[{location:e[0]}]};r.subitems=[],r.totalCount=r.totalCount+1,P({type:"SET_LOCATIONS",data:n}),x(o),z()}})),D.current.contentWindow.document.body.addEventListener("ez-udw-opened",M,!1),D.current.contentWindow.document.body.addEventListener("ez-udw-closed",q,!1)}}),o.a.createElement("div",{className:"m-content-create__actions"},o.a.createElement("button",{className:"m-content-create__cancel-button btn btn-gray",onClick:z},U),o.a.createElement("button",{className:"m-content-create__confirm-button btn btn-primary",onClick:function(){var e=D.current.contentWindow.document.body.querySelector('[data-action="publish"]');e&&e.click()}},F)))};eZ.addConfig("adminUiConfig.universalDiscoveryWidget.tabs",[{id:"content-create",component:y,label:Translator.trans("content_create.label",{},"universal_discovery_widget"),icon:window.eZ.helpers.icon.getIconPath("search"),isHiddenOnList:!0}],!0),t.default=y},"/A22":function(e,t,n){"use strict";var r=n("cDcd"),o=n.n(r),a=n("rf6O"),i=n.n(a),c=n("CgFf"),s=n("MUfx");function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){var t=e.location,n=l(Object(r.useContext)(c.SelectedLocationsContext),2),a=n[0],i=n[1],u=a.some((function(e){return e.location.id===t.id}));return o.a.createElement(s.a,{isSelected:u,toggleSelection:function(){var e=u?{type:"REMOVE_SELECTED_LOCATION",id:t.id}:{type:"ADD_SELECTED_LOCATION",location:t};i(e)}})};d.propTypes={location:i.a.object.isRequired},t.a=d},32:function(e,t,n){n("Hzdi"),n("kqHN"),n("eVcW"),n("+bWA"),e.exports=n("PFI1")},"3obH":function(e,t,n){"use strict";var r=n("cDcd"),o=n.n(r),a=n("rf6O"),i=n.n(a),c=n("/A22"),s=n("uHg5"),l=n("nLu2"),u=n("CgFf");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(e){var t=e.location,n=d(Object(r.useContext)(u.MarkedLocationIdContext),2),a=n[0],i=n[1],f=d(Object(r.useContext)(u.LoadedLocationsMapContext),2),m=f[0],b=f[1],p=Object(r.useContext)(u.ContentTypesMapContext),y=d(Object(r.useContext)(u.SelectedLocationsContext),2),v=(y[0],y[1]),h=d(Object(r.useContext)(u.MultipleConfigContext),2),g=h[0],C=(h[1],Object(r.useContext)(u.ContainersOnlyContext)),O=Object(r.useContext)(u.AllowedContentTypesContext),w=p[t.ContentInfo.Content.ContentType._href],E=w.isContainer,j=C&&!E||O&&!O.includes(w.identifier),_=Object(l.a)({"c-finder-leaf":!0,"c-finder-leaf--marked":!!m.find((function(e){return e.parentLocationId===t.id})),"c-finder-leaf--has-children":!!t.childCount,"c-finder-leaf--not-selectable":j});return Object(r.useEffect)((function(){window.eZ.helpers.tooltips.parse(window.document.querySelector(".c-udw-tab"))}),[]),o.a.createElement("div",{className:_,onClick:function(e){var n=e.nativeEvent.target.closest(".c-toggle-selection-button"),r=t.id===a;n||r||(i(t.id),b({type:"CUT_LOCATIONS",locationId:t.id}),b({type:"UPDATE_LOCATIONS",data:{parentLocationId:t.id,subitems:[]}}),g||j||(v({type:"CLEAR_SELECTED_LOCATIONS"}),v({type:"ADD_SELECTED_LOCATION",location:t})))}},o.a.createElement("span",{className:"c-finder-leaf__name"},o.a.createElement("span",{className:"c-finder-leaf__icon-wrapper"},o.a.createElement(s.a,{extraClasses:"ez-icon--small ez-icon--base-dark",customPath:p[t.ContentInfo.Content.ContentType._href].thumbnail})),o.a.createElement("span",{title:t.ContentInfo.Content.TranslatedName,"data-tooltip-container-selector":".c-udw-tab"},t.ContentInfo.Content.TranslatedName)),!g||j?null:o.a.createElement(c.a,{location:t}))};m.propTypes={location:i.a.object.isRequired};var b=m,p=n("ONuQ");function y(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t=e.locationData,n=e.itemsPerPage,a=C(Object(r.useState)(0),2),i=a[0],c=a[1],d=C(Object(r.useState)(0),2),f=d[0],m=d[1],v=C(Object(r.useContext)(u.LoadedLocationsMapContext),2),g=v[0],O=v[1],w=C(Object(r.useContext)(u.SortingContext),2),E=w[0],j=(w[1],C(Object(r.useContext)(u.SortOrderContext),2)),_=j[0],S=(j[1],Object(r.useContext)(u.ContentTypesMapContext)),I=C(Object(r.useContext)(u.MarkedLocationIdContext),2),T=I[0],x=(I[1],Object(r.useRef)(null)),L=u.SORTING_OPTIONS.find((function(e){return e.sortClause===E})),A=C(Object(p.a)(t,{sortClause:L.sortClause,sortOrder:_},n,i),2),P=A[0],N=A[1],k=t.subitems,R=t.collapsed,D=0,z=0,M=function(e){var r=e.target,o=t.subitems.length>=P.totalCount,a=r.scrollHeight-r.clientHeight-r.scrollTop<200;o||!a||N||c(i+n)},q=function(e){var n=e.clientX,r=z+(n-D);r<50&&(O({type:"UPDATE_LOCATIONS",data:h(h({},t),{},{collapsed:!0})}),r=0,U()),m(r)},U=function e(){window.document.removeEventListener("mousemove",q),window.document.removeEventListener("mouseup",e),window.document.body.classList.remove("ez-is-branch-resizing")},F=function(e){var t=e.nativeEvent;D=t.clientX,z=x.current.getBoundingClientRect().width,window.document.addEventListener("mousemove",q,!1),window.document.addEventListener("mouseup",U,!1),window.document.body.classList.add("ez-is-branch-resizing")},Z=function(){if(N)return o.a.createElement("div",{className:"c-finder-branch__loading-spinner"},o.a.createElement(s.a,{name:"spinner",extraClasses:"ez-icon--medium ez-spin"}))};if(Object(r.useEffect)((function(){if(P.subitems){var e=h(h(h({},t),P),{},{subitems:[].concat(y(t.subitems),y(P.subitems))});O({type:"UPDATE_LOCATIONS",data:e})}}),[P,O,N]),!k.length&&!R&&!N)return null;var W=Object(l.a)({"c-finder-branch":!0,"c-finder-branch--collapsed":R}),V=R?function(){O({type:"UPDATE_LOCATIONS",data:h(h({},t),{},{collapsed:!1})})}:null;return o.a.createElement("div",{className:W,onClick:V,ref:x},function(){if(!R)return null;var e=k.find((function(e){return g.find((function(t){return t.parentLocationId===e.location.id}))||e.location.id===T})),n=e?e.location.ContentInfo.Content.TranslatedName:"",r=t.location?S[t.location.ContentInfo.Content.ContentType._href].thumbnail:window.eZ.helpers.icon.getIconPath("folder");return o.a.createElement("div",{className:"c-finder-branch__info-wrapper"},o.a.createElement("span",{className:"c-finder-branch__icon-wrapper"},o.a.createElement(s.a,{extraClasses:"ez-icon--small ez-icon--primary",customPath:r})),o.a.createElement("span",{className:"c-finder-branch__name"},n))}(),function(){if(R)return null;var e=f||null;return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"c-finder-branch__items-wrapper",onScroll:M,style:{width:e}},Z(),k.map((function(e){var t=e.location;return o.a.createElement(b,{key:t.id,location:t})}))),o.a.createElement("div",{className:"c-finder-branch__resize-handler",onMouseDown:F}))}())};E.propTypes={locationData:i.a.shape({parentLocationId:i.a.number.isRequired,subitems:i.a.array.isRequired,location:i.a.object.isRequired,collapsed:i.a.bool}).isRequired,itemsPerPage:i.a.number},E.defaultProps={itemsPerPage:50};var j=E;function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=function(e){var t=e.itemsPerPage,n=_(Object(r.useContext)(u.LoadedLocationsMapContext),2),a=n[0],i=(n[1],Object(r.useRef)(null));return Object(r.useEffect)((function(){var e=i.current;e.scrollLeft=e.scrollWidth-e.clientWidth})),o.a.createElement("div",{className:"c-finder",ref:i},a.map((function(e){return o.a.createElement(j,{key:e.parentLocationId,itemsPerPage:t,locationData:e})})))};I.propTypes={itemsPerPage:i.a.number},I.defaultProps={itemsPerPage:50};t.a=I},AJkD:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a=function e(t){var n;if("object"!==r(t))return t;if(!t)return t;if("[object Array]"===Object.prototype.toString.apply(t)){n=[];for(var o=0;o<t.length;o++)n[o]=e(t[o]);return n}for(var a in n={},t)t.hasOwnProperty(a)&&(n[a]=e(t[a]));return n}},ATD6:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return J}));var r=n("cDcd"),o=n.n(r),a=n("rf6O"),i=n.n(a),c=n("uHg5");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(i,e);var t,n,r,a=b(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).toggleExpandedState=t.toggleExpandedState.bind(y(t)),t.cancelLoadingState=t.cancelLoadingState.bind(y(t)),t.loadMoreSubitems=t.loadMoreSubitems.bind(y(t)),t.handleAfterExpandedStateChange=t.handleAfterExpandedStateChange.bind(y(t)),t.sortedActions=t.getSortedActions(),t.state={isExpanded:!!e.subitems.length,isLoading:!1},t}return t=i,(n=[{key:"getSortedActions",value:function(){var e=window.eZ.adminUiConfig.contentTreeWidget.itemActions;return(e?u(e):[]).sort((function(e,t){return t.priority-e.priority}))}},{key:"cancelLoadingState",value:function(){this.setState((function(){return{isLoading:!1}}))}},{key:"toggleExpandedState",value:function(){var e=this,t=this.props,n=t.path,r=t.treeMaxDepth;if(n.split(",").length-1>=r){var o=Translator.trans("expand_item.limit.message",{},"content_tree");window.eZ.helpers.notification.showWarningNotification(o)}else this.setState((function(e){return{isExpanded:!e.isExpanded}}),(function(){var t=e.props;(0,t.afterItemToggle)(t.path,e.state.isExpanded),e.handleAfterExpandedStateChange()}))}},{key:"handleAfterExpandedStateChange",value:function(){this.state.isExpanded&&!this.props.subitems.length&&this.loadMoreSubitems()}},{key:"loadMoreSubitems",value:function(){var e=this,t=this.props,n=t.subitems,r=t.subitemsLimit,o=n.length>=r;if(!this.state.isLoading&&!o){var a=this.props,i=a.path,c=a.locationId,s=a.subitemsLoadLimit,l=a.loadMoreSubitems;this.setState((function(){return{isLoading:!0}}),(function(){return l({path:i,parentLocationId:c,offset:n.length,limit:s},e.cancelLoadingState)}))}}},{key:"checkCanLoadMore",value:function(){var e=this.props,t=e.subitems,n=e.totalSubitemsCount;return t.length<n}},{key:"renderIcon",value:function(){var e=this.props,t=e.contentTypeIdentifier,n=e.selected,r=e.locationId,a={extraClasses:"ez-icon--small ez-icon--".concat(n?"primary":"dark")};return!this.state.isLoading||this.props.subitems.length?a.customPath=1===r?eZ.helpers.contentType.getContentTypeIconUrl("folder"):eZ.helpers.contentType.getContentTypeIconUrl(t)||eZ.helpers.contentType.getContentTypeIconUrl("file"):(a.name="spinner",a.extraClasses="".concat(a.extraClasses," ez-spin")),o.a.createElement("span",{className:"c-list-item__icon"},o.a.createElement(c.a,a))}},{key:"renderLoadMoreBtn",value:function(){var e=this.props,t=e.subitems,n=e.subitemsLimit,r=t.length>=n;if(!this.state.isExpanded||r||!this.checkCanLoadMore()||!t.length)return null;var a=this.state.isLoading,i=Translator.trans("show_more",{},"content_tree"),s=Translator.trans("loading_more",{},"content_tree"),l=a?s:i,u=null;return a&&(u=o.a.createElement(c.a,{name:"spinner",extraClasses:"ez-spin ez-icon--small c-list-item__load-more-btn-spinner"})),o.a.createElement("button",{type:"button",className:"c-list-item__load-more-btn btn ez-btn",onClick:this.loadMoreSubitems},u," ",l)}},{key:"renderSubitemsLimitReachedInfo",value:function(){var e=this.props,t=e.subitems,n=e.subitemsLimit,r=t.length>=n;if(!this.state.isExpanded||!r)return null;var a=Translator.trans("show_more.limit_reached",{},"content_tree");return o.a.createElement("div",{className:"c-list-item__load-more-limit-info"},a)}},{key:"renderItemLabel",value:function(){var e=this,t=this.props,n=t.totalSubitemsCount,r=t.href,a=t.name,i=t.selected,c=t.locationId,s=t.onClick;if(1===c)return null;var u={className:"c-list-item__toggler",onClick:this.toggleExpandedState,hidden:!n,tabIndex:-1};return i&&(u.className="".concat(u.className," ").concat("c-list-item__toggler","--light")),o.a.createElement("div",{className:"c-list-item__label"},o.a.createElement("span",u),o.a.createElement("a",{className:"c-list-item__link",href:r,onClick:s},this.renderIcon()," ",a),this.sortedActions.map((function(t){var n=t.component;return o.a.createElement(n,l({key:t.id},e.props))})))}},{key:"render",value:function(){var e=this.props,t=e.totalSubitemsCount,n=e.children,r=e.isInvisible,a=e.selected,i={className:"c-list-item"};return t&&(i.className="".concat(i.className," ").concat("c-list-item","--has-sub-items")),this.checkCanLoadMore()&&(i.className="".concat(i.className," ").concat("c-list-item","--can-load-more")),this.state.isExpanded&&(i.className="".concat(i.className," ").concat("c-list-item","--is-expanded")),r&&(i.className="".concat(i.className," ").concat("c-list-item","--is-hidden")),a&&(i.className="".concat(i.className," ").concat("c-list-item","--is-selected")),this.props.isRootItem&&(i.className="".concat(i.className," ").concat("c-list-item","--is-root-item")),o.a.createElement("li",i,this.renderItemLabel(),n,this.renderLoadMoreBtn(),this.renderSubitemsLimitReachedInfo())}}])&&f(t.prototype,n),r&&f(t,r),i}(r.Component);h.propTypes={path:i.a.string.isRequired,href:i.a.string.isRequired,contentTypeIdentifier:i.a.string.isRequired,totalSubitemsCount:i.a.number.isRequired,subitems:i.a.array.isRequired,children:i.a.element,hidden:i.a.bool.isRequired,isContainer:i.a.bool.isRequired,selected:i.a.bool.isRequired,locationId:i.a.number.isRequired,name:i.a.string.isRequired,isInvisible:i.a.bool.isRequired,loadMoreSubitems:i.a.func.isRequired,subitemsLimit:i.a.number.isRequired,subitemsLoadLimit:i.a.number,treeMaxDepth:i.a.number.isRequired,afterItemToggle:i.a.func.isRequired,isRootItem:i.a.bool.isRequired,onClick:i.a.func},h.defaultProps={hidden:!1,isRootItem:!1,onClick:function(){}};var g=h;function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function e(t){var n=t.items,r=t.loadMoreSubitems,a=t.currentLocationId,i=t.path,c=t.subitemsLoadLimit,s=t.subitemsLimit,l=t.treeMaxDepth,u=t.afterItemToggle,d=t.isRoot,f=t.onClickItem,m={loadMoreSubitems:r,subitemsLoadLimit:c,subitemsLimit:s,treeMaxDepth:l,afterItemToggle:u,onClickItem:f},b=w(w({},m),{},{currentLocationId:a}),p=m;return o.a.createElement("ul",{className:"c-list"},n.map((function(t){var r=i&&i.length,c=window.Routing.generate("_ez_content_view",{contentId:t.contentId,locationId:t.locationId}),s="".concat(r?i+",":"").concat(t.locationId),l=t.subitems;return o.a.createElement(g,C({},t,p,{key:t.locationId,selected:t.locationId===a,href:c,isRootItem:d,onClick:f.bind(null,t),path:s}),l.length?o.a.createElement(e,C({path:s,items:l,isRoot:!1},b)):function(){var e=n[0],t=e,r=Translator.trans("no_subitems",{},"content_tree");if(d&&t&&(!e.subitems||!e.subitems.length))return o.a.createElement("div",{className:"c-list__no-items-message"},r)}())})))};j.propTypes={path:i.a.string.isRequired,items:i.a.array.isRequired,loadMoreSubitems:i.a.func.isRequired,currentLocationId:i.a.number.isRequired,subitemsLimit:i.a.number.isRequired,subitemsLoadLimit:i.a.number,treeMaxDepth:i.a.number.isRequired,afterItemToggle:i.a.func.isRequired,isRoot:i.a.bool.isRequired,onClickItem:i.a.func},j.defaultProps={isRoot:!1,onClickItem:function(){}};var _=j;function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(i,e);var t,n,r,a=x(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).changeContainerWidth=t.changeContainerWidth.bind(A(t)),t.addWidthChangeListener=t.addWidthChangeListener.bind(A(t)),t.handleResizeEnd=t.handleResizeEnd.bind(A(t)),t._refTreeContainer=o.a.createRef(),t.scrollTimeout=null,t.scrollPositionRestored=!1,t.state={resizeStartPositionX:0,containerWidth:t.getConfig("width"),resizedContainerWidth:0,isResizing:!1},t}return t=i,(n=[{key:"componentWillUnmount",value:function(){this.clearDocumentResizingListeners()}},{key:"componentDidMount",value:function(){var e=this;this.containerScrollRef.addEventListener("scroll",(function(t){window.clearTimeout(e.scrollTimeout),e.scrollTimeout=window.setTimeout((function(t){e.saveConfig("scrollTop",t)}),50,t.currentTarget.scrollTop)}))}},{key:"componentDidUpdate",value:function(e){this.state.containerWidth!==e.containerWidth&&(this.saveConfig("width",this.state.containerWidth),document.body.dispatchEvent(new CustomEvent("ez-content-tree-resized"))),this.props.items&&this.props.items.length&&!this.scrollPositionRestored&&(this.scrollPositionRestored=!0,this.containerScrollRef.scrollTo(0,this.getConfig("scrollTop")))}},{key:"saveConfig",value:function(e,t){var n=this.props.userId,r=JSON.parse(window.localStorage.getItem("ez-content-tree-state")||"{}");r[n]||(r[n]={}),r[n][e]=t,window.localStorage.setItem("ez-content-tree-state",JSON.stringify(r))}},{key:"getConfig",value:function(e){var t,n=this.props.userId;return null===(t=JSON.parse(window.localStorage.getItem("ez-content-tree-state")||"{}")[n])||void 0===t?void 0:t[e]}},{key:"changeContainerWidth",value:function(e){var t=e.clientX;this.setState((function(e){return{resizedContainerWidth:e.containerWidth+(t-e.resizeStartPositionX)}}))}},{key:"addWidthChangeListener",value:function(e){var t=e.nativeEvent.clientX,n=this._refTreeContainer.current.getBoundingClientRect().width;window.document.addEventListener("mousemove",this.changeContainerWidth,!1),window.document.addEventListener("mouseup",this.handleResizeEnd,!1),window.document.body.classList.add("ez-is-tree-resizing"),this.setState((function(){return{resizeStartPositionX:t,containerWidth:n,isResizing:!0}}))}},{key:"handleResizeEnd",value:function(){this.clearDocumentResizingListeners(),this.setState((function(e){return{resizeStartPositionX:0,containerWidth:e.resizedContainerWidth,isResizing:!1}}))}},{key:"clearDocumentResizingListeners",value:function(){window.document.removeEventListener("mousemove",this.changeContainerWidth),window.document.removeEventListener("mouseup",this.handleResizeEnd),window.document.body.classList.remove("ez-is-tree-resizing")}},{key:"renderCollapseAllBtn",value:function(){var e=Translator.trans("collapse_all",{},"content_tree");return o.a.createElement("div",{tabIndex:-1,className:"m-tree__collapse-all-btn",onClick:this.props.onCollapseAllItems},e)}},{key:"renderList",value:function(){var e=this,t=this.props,n=t.items,r=t.loadMoreSubitems,a=t.currentLocationId,i=t.onClickItem,c=t.subitemsLoadLimit,s={items:n,path:"",loadMoreSubitems:r,currentLocationId:a,subitemsLimit:t.subitemsLimit,subitemsLoadLimit:c,treeMaxDepth:t.treeMaxDepth,afterItemToggle:t.afterItemToggle,isRoot:!0,onClickItem:i};return o.a.createElement("div",{className:"m-tree__scrollable-wrapper",ref:function(t){return e.containerScrollRef=t}},n&&n.length?o.a.createElement(_,s):null)}},{key:"renderLoadingSpinner",value:function(){var e=this.props.items;if(!e||!e.length)return o.a.createElement("div",{className:"m-tree__loading-spinner"},o.a.createElement(c.a,{name:"spinner",extraClasses:"ez-icon--medium ez-spin"}))}},{key:"render",value:function(){var e=this.state,t=e.isResizing,n=e.containerWidth,r=e.resizedContainerWidth,a=t?r:n,i={className:"m-tree",ref:this._refTreeContainer};return a&&(i.style={width:"".concat(a,"px")}),o.a.createElement("div",i,this.renderList(),this.renderLoadingSpinner(),this.renderCollapseAllBtn(),o.a.createElement("div",{className:"m-tree__resize-handler",onMouseDown:this.addWidthChangeListener}))}}])&&I(t.prototype,n),r&&I(t,r),i}(r.Component);N.propTypes={items:i.a.array.isRequired,loadMoreSubitems:i.a.func.isRequired,currentLocationId:i.a.number.isRequired,subitemsLimit:i.a.number.isRequired,subitemsLoadLimit:i.a.number,treeMaxDepth:i.a.number.isRequired,afterItemToggle:i.a.func.isRequired,onCollapseAllItems:i.a.func.isRequired,onClickItem:i.a.func,userId:i.a.number.isRequired};var k=n("iRWG"),R=n("Y1Nf"),D=function(e,t){var n=e.token,r=e.siteaccess,o=e.subtree,a=e.sortClause,i=e.sortOrder,c="/api/ezp/v2/location/tree/load-subtree";a&&i&&(c+="?sortClause=".concat(a,"&sortOrder=").concat(i));var s=new Request(c,{method:"POST",mode:"same-origin",credentials:"same-origin",body:JSON.stringify({LoadSubtreeRequest:{"_media-type":"application/vnd.ez.api.ContentTreeLoadSubtreeRequest",nodes:o}}),headers:{Accept:"application/vnd.ez.api.ContentTreeRoot+json","Content-Type":"application/vnd.ez.api.ContentTreeLoadSubtreeRequest+json","X-Siteaccess":r,"X-CSRF-Token":n}});fetch(s).then(k.a).then((function(e){var t=e.ContentTreeRoot.ContentTreeNodeList;return z(t)})).then(t).catch(R.a)},z=function e(t){return t.map((function(t){return M(t),t.subitems=e(t.subitems),t}))},M=function(e){return e.totalSubitemsCount=e.totalChildrenCount,e.subitems=e.children,delete e.totalChildrenCount,delete e.children,delete e.displayLimit,e};function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||F(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var o=X(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $(this,n)}}function $(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(i,e);var t,n,r,a=H(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).setInitialItemsState=t.setInitialItemsState.bind(B(t)),t.loadMoreSubitems=t.loadMoreSubitems.bind(B(t)),t.updateSubtreeAfterItemToggle=t.updateSubtreeAfterItemToggle.bind(B(t)),t.handleCollapseAllItems=t.handleCollapseAllItems.bind(B(t)),t.limitSubitemsInSubtree=t.limitSubitemsInSubtree.bind(B(t)),t.refreshContentTree=t.refreshContentTree.bind(B(t)),t.getLoadSubtreeParams=t.getLoadSubtreeParams.bind(B(t));try{var n=t.readSubtree();t.items=e.preloadedLocations,t.subtree=n||t.generateInitialSubtree(),t.expandCurrentLocationInSubtree(),t.clipTooDeepSubtreeBranches(t.subtree[0],e.treeMaxDepth-1),t.subtree[0].children.forEach(t.limitSubitemsInSubtree),t.saveSubtree()}catch(e){t.items=[],t.subtree=t.generateInitialSubtree(),t.saveSubtree()}return t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;if(document.body.addEventListener("ez-content-tree-refresh",this.refreshContentTree,!1),this.items.length)return this.subtree=this.generateSubtree(this.items,!0),void this.saveSubtree();D(this.getLoadSubtreeParams(),(function(t){e.setInitialItemsState(t[0])}))}},{key:"componentDidUpdate",value:function(e){var t=this;e.sort.sortClause===this.props.sort.sortClause&&e.sort.sortOrder===this.props.sort.sortOrder||D(this.getLoadSubtreeParams(),(function(e){t.setInitialItemsState(e[0])}))}},{key:"setInitialItemsState",value:function(e){this.items=[e],this.subtree=this.generateSubtree(this.items,!0),this.saveSubtree(),this.forceUpdate()}},{key:"loadMoreSubitems",value:function(e,t){var n=e.parentLocationId,r=e.offset,o=e.limit,a=e.path;!function(e,t,n){var r=e.siteaccess,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=new Request("".concat("/api/ezp/v2/location/tree/load-subitems","/").concat(t,"/").concat(o,"/").concat(a),{method:"GET",mode:"same-origin",credentials:"same-origin",headers:{Accept:"application/vnd.ez.api.ContentTreeNode+json","X-Siteaccess":r}});fetch(i).then(k.a).then((function(e){var t=e.ContentTreeNode;return t.children=t.children.map(M),M(t)})).then(n).catch(R.a)}(this.props.restInfo,n,this.updateLocationsStateAfterLoadingMoreItems.bind(this,a,t),o,r)}},{key:"refreshContentTree",value:function(){var e=this;this.items=[],this.forceUpdate(),D(this.getLoadSubtreeParams(),(function(t){e.setInitialItemsState(t[0])}))}},{key:"updateLocationsStateAfterLoadingMoreItems",value:function(e,t,n){var r=this.findItem(this.items,e.split(","));r&&(r.subitems=[].concat(U(r.subitems),U(n.subitems)),this.updateSubtreeAfterLoadMoreItems(e),t(),this.forceUpdate())}},{key:"updateSubtreeAfterLoadMoreItems",value:function(e){var t=this.findItem(this.items,e.split(","));this.updateItemInSubtree(this.subtree[0],t,e.split(",")),this.saveSubtree()}},{key:"updateSubtreeAfterItemToggle",value:function(e,t){var n=this.findItem(this.items,e.split(","));t?this.addItemToSubtree(this.subtree[0],n,e.split(",")):this.removeItemFromSubtree(this.subtree[0],n,e.split(",")),this.saveSubtree(),this.props.afterItemToggle(n,t)}},{key:"addItemToSubtree",value:function(e,t,n){var r=this.findParentSubtree(e,n);if(r){var o=this.props,a=o.subitemsLoadLimit,i=o.subitemsLimit,c=Math.ceil(t.subitems.length/a)*a;r.children.push({"_media-type":"application/vnd.ez.api.ContentTreeLoadSubtreeRequestNode",locationId:t.locationId,limit:Math.min(i,c),offset:0,children:[]})}}},{key:"removeItemFromSubtree",value:function(e,t,n){var r=this.findParentSubtree(e,n);if(r){var o=r.children.findIndex((function(e){return e.locationId===t.locationId}));o>-1&&r.children.splice(o,1)}}},{key:"updateItemInSubtree",value:function(e,t,n){var r=this.findParentSubtree(e,n);if(r){var o=r.children.findIndex((function(e){return e.locationId===t.locationId}));o>-1&&(r.children[o].limit=t.subitems.length)}}},{key:"readSubtree",value:function(){var e=this.props.readSubtree;if("function"==typeof e)return e();var t=this.props,n=t.rootLocationId,r=t.userId,o=localStorage.getItem("ez-content-tree-subtrees"),a=o?JSON.parse(o):null,i=a?a[r]:null,c=i?i[n]:null;return c?JSON.parse(c):null}},{key:"saveSubtree",value:function(){var e=this.props,t=e.rootLocationId,n=e.userId,r=localStorage.getItem("ez-content-tree-subtrees"),o=r?JSON.parse(r):{};o[n]||(o[n]={}),o[n][t]=JSON.stringify(this.subtree),localStorage.setItem("ez-content-tree-subtrees",JSON.stringify(o))}},{key:"findParentSubtree",value:function(e,t){if(!(t.length<2))return t.shift(),t.pop(),t.reduce((function(e,t){return e.children.find((function(e){return e.locationId===parseInt(t,10)}))}),e)}},{key:"expandCurrentLocationInSubtree",value:function(){var e=this.props,t=e.rootLocationId,n=e.currentLocationPath.split("/").filter((function(e){return!!e})),r=n.findIndex((function(e){return parseInt(e,10)===t}));if(-1!==r){var o=n.slice(r-n.length+1),a=o.slice(0,o.length-1);this.expandPathInSubtree(this.subtree[0],a)}}},{key:"expandPathInSubtree",value:function(e,t){if(t.length){var n=parseInt(t[0],10),r=e.children.find((function(e){return e.locationId===n}));r||(r={"_media-type":"application/vnd.ez.api.ContentTreeLoadSubtreeRequestNode",locationId:n,limit:this.props.subitemsLimit,offset:0,children:[]},e.children.push(r)),t.shift(),this.expandPathInSubtree(r,t)}}},{key:"clipTooDeepSubtreeBranches",value:function(e,t){var n=this;t<=0?e.children=[]:e.children.forEach((function(e){return n.clipTooDeepSubtreeBranches(e,t-1)}))}},{key:"limitSubitemsInSubtree",value:function(e){e.limit=Math.min(this.props.subitemsLimit,e.limit),e.children.forEach(this.limitSubitemsInSubtree)}},{key:"generateInitialSubtree",value:function(){return[{"_media-type":"application/vnd.ez.api.ContentTreeLoadSubtreeRequestNode",locationId:this.props.rootLocationId,limit:this.props.subitemsLoadLimit,offset:0,children:[]}]}},{key:"generateSubtree",value:function(e,t){var n,r=[],o=this.props,a=o.subitemsLoadLimit,i=o.subitemsLimit,c=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=F(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(e);try{for(c.s();!(n=c.n()).done;){var s=n.value,l=s.subitems.length;if(l||t){var u=l?Math.ceil(l/a)*a:a;r.push({"_media-type":"application/vnd.ez.api.ContentTreeLoadSubtreeRequestNode",locationId:s.locationId,limit:Math.min(i,u),offset:0,children:this.generateSubtree(s.subitems,!1)})}}}catch(e){c.e(e)}finally{c.f()}return r}},{key:"findItem",value:function(e,t){var n=1===t.length,r=e.find((function(e){return e.locationId===parseInt(t[0],10)}));return r?n?r:r.hasOwnProperty("subitems")&&Array.isArray(r.subitems)?(t.shift(),this.findItem(r.subitems,t)):null:null}},{key:"getCurrentLocationId",value:function(){var e=this.props.currentLocationPath.split("/").filter((function(e){return!!e})).pop();return parseInt(e,10)}},{key:"handleCollapseAllItems",value:function(){var e=this;this.items=[],this.forceUpdate(),this.subtree=this.generateInitialSubtree(),this.saveSubtree(),D(this.getLoadSubtreeParams(),(function(t){e.setInitialItemsState(t[0])}))}},{key:"getLoadSubtreeParams",value:function(){return{token:this.props.restInfo.token,siteaccess:this.props.restInfo.siteaccess,subtree:this.subtree,sortClause:this.props.sort.sortClause,sortOrder:this.props.sort.sortOrder}}},{key:"render",value:function(){var e=this.props,t=e.onClickItem,n=e.subitemsLimit,r=e.subitemsLoadLimit,a=e.treeMaxDepth,i=e.userId,c={items:this.items,currentLocationId:this.getCurrentLocationId(),subitemsLimit:n,subitemsLoadLimit:r,treeMaxDepth:a,loadMoreSubitems:this.loadMoreSubitems,afterItemToggle:this.updateSubtreeAfterItemToggle,onCollapseAllItems:this.handleCollapseAllItems,onClickItem:t,userId:i};return o.a.createElement(N,c)}}])&&W(t.prototype,n),r&&W(t,r),i}(r.Component);eZ.addConfig("modules.ContentTree",J),J.propTypes={rootLocationId:i.a.number.isRequired,currentLocationPath:i.a.number.isRequired,userId:i.a.number.isRequired,preloadedLocations:i.a.arrayOf(i.a.object),subitemsLimit:i.a.number.isRequired,subitemsLoadLimit:i.a.number.isRequired,treeMaxDepth:i.a.number.isRequired,restInfo:i.a.shape({token:i.a.string.isRequired,siteaccess:i.a.string.isRequired}).isRequired,onClickItem:i.a.func,readSubtree:i.a.func,afterItemToggle:i.a.func,sort:i.a.shape({sortClause:i.a.string,sortOrder:i.a.string})},J.defaultProps={preloadedLocations:[],rootLocationId:window.eZ.adminUiConfig.contentTree.treeRootLocationId,subitemsLimit:window.eZ.adminUiConfig.contentTree.childrenLoadMaxLimit,subitemsLoadLimit:window.eZ.adminUiConfig.contentTree.loadMoreLimit,treeMaxDepth:window.eZ.adminUiConfig.contentTree.treeMaxDepth,afterItemToggle:function(){},sort:{}}},BZDO:function(e,t,n){"use strict";var r=n("cDcd"),o=n.n(r),a=n("rf6O"),i=n.n(a),c=n("ATD6"),s=n("xI8+"),l=n("S6d5"),u=n("CgFf");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=function(e){var t=e.itemsPerPage,n=b(Object(r.useContext)(u.LoadedLocationsMapContext),2),a=n[0],i=n[1],d=b(Object(r.useContext)(u.MarkedLocationIdContext),2),m=d[0],y=d[1],v=b(Object(r.useContext)(u.MultipleConfigContext),2),h=v[0],g=(v[1],b(Object(r.useContext)(u.SelectedLocationsContext),2)),C=(g[0],g[1]),O=b(Object(r.useContext)(u.SortOrderContext),2),w=O[0],E=(O[1],b(Object(r.useContext)(u.SortingContext),2)),j=E[0],_=(E[1],Object(r.useContext)(u.AllowedContentTypesContext)),S=Object(r.useContext)(u.ContainersOnlyContext),I=Object(r.useContext)(u.ContentTypesMapContext),T=Object(r.useContext)(u.RestInfoContext),x=Object(r.useContext)(u.RootLocationIdContext),L=Object(r.useMemo)((function(){return Object(l.getLocationData)(a,m)}),[m,a]),A=window.eZ.helpers.user.getId(),P=L&&L.location?L.location.pathString:"/1/",N=a.length>1||1===a.length&&a[0].subitems.length>0,k=null!==m&&N||null===m;return o.a.createElement("div",{className:"c-tree"},k&&o.a.createElement(c.default,{userId:A,currentLocationPath:P,rootLocationId:x,restInfo:T,onClickItem:function(e,t){t.preventDefault(),t.currentTarget.closest(".c-list-item__label").querySelector(".c-list-item__toggler").click()},readSubtree:function(){return function e(n){if(0===n.length)return[];var r=n.shift();return[{children:e(n),limit:t,locationId:r.parentLocationId,offset:0,"_media-type":"application/vnd.ez.api.ContentTreeLoadSubtreeRequestNode"}]}(p(a))},afterItemToggle:function(e){var t=e.locationId;t!==m&&Object(s.f)(f(f({},T),{},{parentLocationId:t,sortClause:j,sortOrder:w,rootLocationId:x}),(function(e){var n=e[e.length-1].location,r=I[n.ContentInfo.Content.ContentType._href],o=r.isContainer,a=S&&!o||_&&!_.includes(r.identifier);y(t),i({type:"SET_LOCATIONS",data:e}),h||a||C({type:"REPLACE_SELECTED_LOCATIONS",locations:[{location:n}]})}))},sort:{sortClause:j,sortOrder:w}}))};h.propTypes={itemsPerPage:i.a.number},h.defaultProps={itemsPerPage:50},t.a=h},CgFf:function(e,t,n){"use strict";n.r(t),n.d(t,"SORTING_OPTIONS",(function(){return I})),n.d(t,"VIEWS",(function(){return T})),n.d(t,"UDWContext",(function(){return A})),n.d(t,"RestInfoContext",(function(){return P})),n.d(t,"AllowRedirectsContext",(function(){return N})),n.d(t,"AllowConfirmationContext",(function(){return k})),n.d(t,"ContentTypesMapContext",(function(){return R})),n.d(t,"ContentTypesInfoMapContext",(function(){return D})),n.d(t,"MultipleConfigContext",(function(){return z})),n.d(t,"ContainersOnlyContext",(function(){return M})),n.d(t,"AllowedContentTypesContext",(function(){return q})),n.d(t,"ActiveTabContext",(function(){return U})),n.d(t,"TabsConfigContext",(function(){return F})),n.d(t,"TabsContext",(function(){return Z})),n.d(t,"TitleContext",(function(){return W})),n.d(t,"CancelContext",(function(){return V})),n.d(t,"ConfirmContext",(function(){return H})),n.d(t,"SortingContext",(function(){return $})),n.d(t,"SortOrderContext",(function(){return B})),n.d(t,"CurrentViewContext",(function(){return X})),n.d(t,"MarkedLocationIdContext",(function(){return J})),n.d(t,"LoadedLocationsMapContext",(function(){return G})),n.d(t,"RootLocationIdContext",(function(){return Y})),n.d(t,"SelectedLocationsContext",(function(){return Q})),n.d(t,"CreateContentWidgetContext",(function(){return K})),n.d(t,"ContentOnTheFlyDataContext",(function(){return ee})),n.d(t,"ContentOnTheFlyConfigContext",(function(){return te})),n.d(t,"EditOnTheFlyDataContext",(function(){return ne}));var r=n("cDcd"),o=n.n(r),a=n("rf6O"),i=n.n(a),c=n("AJkD"),s=n("nLu2");function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=[{parentLocationId:1,subitems:[]}],b=function(e,t){switch(t.type){case"CUT_LOCATIONS":return function(e,t){var n=e.findIndex((function(e){return e.parentLocationId===t.locationId}));return-1===n?e:e.slice(0,n+1)}(e,t);case"UPDATE_LOCATIONS":return function(e,t){var n=e.findIndex((function(e){return e.parentLocationId===t.data.parentLocationId})),r=u(e);if(-1!==n)return r[n]=t.data,r;var o=e.findIndex((function(e){return e.subitems.find((function(e){return e.location.id===t.data.parentLocationId}))}));return-1!==o&&(r=r.slice(0,o+1)),r.push(t.data),r}(e,t);case"SET_LOCATIONS":return function(e,t){return t.data}(0,t);case"CLEAR_LOCATIONS":return[];default:throw new Error}};function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=[],C=function(e,t){switch(t.type){case"ADD_SELECTED_LOCATION":return[].concat(y(e),[{location:t.location,permissions:t.permissions}]);case"REMOVE_SELECTED_LOCATION":return e.filter((function(e){return e.location.id!==t.id}));case"CLEAR_SELECTED_LOCATIONS":return[];case"REPLACE_SELECTED_LOCATIONS":return t.locations;default:throw new Error}},O=n("xI8+");function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=[{label:Translator.trans("sorting.date.label",{},"universal_discovery_widget"),tooltipLabel:Translator.trans("sorting.date.tooltip",{},"universal_discovery_widget"),sortClause:"DatePublished"},{label:Translator.trans("sorting.name.label",{},"universal_discovery_widget"),tooltipLabel:Translator.trans("sorting.name.tooltip",{},"universal_discovery_widget"),sortClause:"ContentName"}],T=[{id:"grid",icon:"view-grid",tooltipLabel:Translator.trans("sorting.grid.view",{},"universal_discovery_widget")},{id:"finder",icon:"panels",tooltipLabel:Translator.trans("sorting.panels.view",{},"universal_discovery_widget")},{id:"tree",icon:"content-tree",tooltipLabel:Translator.trans("sorting.tree.view",{},"universal_discovery_widget")}],x={token:document.querySelector('meta[name="CSRF-Token"]').content,siteaccess:document.querySelector('meta[name="SiteAccess"]').content},L=Object.values(eZ.adminUiConfig.contentTypes).reduce((function(e,t){return t.forEach((function(t){e[t.href]=t})),e}),{}),A=Object(r.createContext)(),P=Object(r.createContext)(),N=Object(r.createContext)(),k=Object(r.createContext)(),R=Object(r.createContext)(),D=Object(r.createContext)(),z=Object(r.createContext)(),M=Object(r.createContext)(),q=Object(r.createContext)(),U=Object(r.createContext)(),F=Object(r.createContext)(),Z=Object(r.createContext)(),W=Object(r.createContext)(),V=Object(r.createContext)(),H=Object(r.createContext)(),$=Object(r.createContext)(),B=Object(r.createContext)(),X=Object(r.createContext)(),J=Object(r.createContext)(),G=Object(r.createContext)(),Y=Object(r.createContext)(),Q=Object(r.createContext)(),K=Object(r.createContext)(),ee=Object(r.createContext)(),te=Object(r.createContext)(),ne=Object(r.createContext)(),re=function(e){var t=window.eZ.adminUiConfig.universalDiscoveryWidget.tabs,n=e.startingLocationId||e.rootLocationId,a=_(Object(r.useState)(e.activeTab),2),i=a[0],u=a[1],d=_(Object(r.useState)(e.activeSortClause),2),f=d[0],y=d[1],v=_(Object(r.useState)(e.activeSortOrder),2),h=v[0],w=v[1],j=_(Object(r.useState)(e.activeView),2),S=j[0],I=j[1],T=_(Object(r.useState)(1!==n?n:null),2),re=T[0],oe=T[1],ae=_(Object(r.useState)(!1),2),ie=ae[0],ce=ae[1],se=_(Object(r.useState)({}),2),le=se[0],ue=se[1],de=_(Object(r.useState)({}),2),fe=de[0],me=de[1],be=_(Object(r.useState)({}),2),pe=be[0],ye=be[1],ve=_(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=Object(r.useReducer)(b,e),n=l(t,2),o=n[0],a=n[1];return[o,a]}([{parentLocationId:e.rootLocationId,subitems:[]}]),2),he=ve[0],ge=ve[1],Ce=_(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=Object(r.useReducer)(C,e),n=p(t,2),o=n[0],a=n[1];return[o,a]}(),2),Oe=Ce[0],we=Ce[1],Ee=t.find((function(e){return e.id===i})).component,je=Object(s.a)({"m-ud":!0,"m-ud--locations-selected":!!Oe.length&&e.allowConfirmation}),_e=function(e){var t=Object(c.a)(Oe);e.forEach((function(e){var n=t.find((function(t){return t.location.id===e.location.Location.id}));n&&(n.permissions=e.permissions)})),we({type:"REPLACE_SELECTED_LOCATIONS",locations:t})};return Object(r.useEffect)((function(){return Object(O.i)(x,(function(e){var t=e.ContentTypeInfoList.ContentType.reduce((function(e,t){return e[t._href]=t,e}),{});ye(t)})),window.document.body.dispatchEvent(new CustomEvent("ez-udw-opened")),window.eZ.helpers.tooltips.parse(window.document.querySelector(".c-udw-tab")),function(){window.document.body.dispatchEvent(new CustomEvent("ez-udw-closed"))}}),[]),Object(r.useEffect)((function(){e.selectedLocations.length&&Object(O.c)(E(E({},x),{},{id:e.selectedLocations.join(",")}),(function(t){var n=e.selectedLocations.map((function(e){return{location:t.find((function(t){return t.id===parseInt(e,10)}))}}));we({type:"REPLACE_SELECTED_LOCATIONS",locations:n})}))}),[e.selectedLocations]),Object(r.useEffect)((function(){var e=Oe.filter((function(e){return!e.permissions})).map((function(e){return e.location.id})).join(",");e&&Object(O.j)({locationIds:e},_e)}),[Oe]),Object(r.useEffect)((function(){var e=Oe.filter((function(e){return!e.location.ContentInfo.Content.CurrentVersion.Version}));if(e.length){var t=e.map((function(e){return e.location.ContentInfo.Content._id})).join(",");Object(O.h)(E(E({},x),{},{contentId:t}),(function(e){var t=Oe;e.forEach((function(e){var n=t.find((function(t){return t.location.ContentInfo.Content._id===e._id}));n&&(n.location.ContentInfo.Content.CurrentVersion.Version=e.CurrentVersion.Version)})),we({type:"REPLACE_SELECTED_LOCATIONS",locations:t})}))}}),[Oe]),Object(r.useEffect)((function(){return window.document.body.classList.add("ez-scroll-disabled"),function(){window.document.body.classList.remove("ez-scroll-disabled")}})),Object(r.useEffect)((function(){"grid"===S?(he[he.length-1].subitems=[],ge({type:"SET_LOCATIONS",data:he})):("finder"===S||"tree"===S)&&re&&re!==he[he.length-1].parentLocationId&&he[he.length-1].subitems.find((function(e){return e.location.id===re}))&&ge({type:"UPDATE_LOCATIONS",data:{parentLocationId:re,subitems:[]}})}),[S]),Object(r.useEffect)((function(){e.startingLocationId&&1!==e.startingLocationId&&Object(O.f)(E(E({},x),{},{parentLocationId:e.startingLocationId,sortClause:f,sortOrder:h,gridView:"grid"===S,rootLocationId:e.rootLocationId}),(function(t){ge({type:"SET_LOCATIONS",data:t}),oe(e.startingLocationId)}))}),[e.startingLocationId]),Object(r.useEffect)((function(){var e=he.map((function(e){return e.subitems=[],e}));ge({type:"SET_LOCATIONS",data:e})}),[f,h]),o.a.createElement("div",{className:je},o.a.createElement(A.Provider,{value:!0},o.a.createElement(P.Provider,{value:x},o.a.createElement(N.Provider,{value:e.allowRedirects},o.a.createElement(k.Provider,{value:e.allowConfirmation},o.a.createElement(D.Provider,{value:pe},o.a.createElement(R.Provider,{value:L},o.a.createElement(z.Provider,{value:[e.multiple,e.multipleItemsLimit]},o.a.createElement(M.Provider,{value:e.containersOnly},o.a.createElement(q.Provider,{value:e.allowedContentTypes},o.a.createElement(U.Provider,{value:[i,u]},o.a.createElement(Z.Provider,{value:t},o.a.createElement(F.Provider,{value:e.tabsConfig},o.a.createElement(W.Provider,{value:e.title},o.a.createElement(V.Provider,{value:e.onCancel},o.a.createElement(H.Provider,{value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,n=t.map((function(e){var t=Object(c.a)(e.location),n=t.ContentInfo.Content.ContentType;return t.ContentInfo.Content.ContentTypeInfo=pe[n._href],t}));e.onConfirm(n)}},o.a.createElement($.Provider,{value:[f,y]},o.a.createElement(B.Provider,{value:[h,w]},o.a.createElement(X.Provider,{value:[S,I]},o.a.createElement(J.Provider,{value:[re,oe]},o.a.createElement(G.Provider,{value:[he,ge]},o.a.createElement(Y.Provider,{value:e.rootLocationId},o.a.createElement(Q.Provider,{value:[Oe,we]},o.a.createElement(K.Provider,{value:[ie,ce]},o.a.createElement(ee.Provider,{value:[le,ue]},o.a.createElement(te.Provider,{value:e.contentOnTheFly},o.a.createElement(ne.Provider,{value:[fe,me]},o.a.createElement(Ee,null))))))))))))))))))))))))))))};re.propTypes={onConfirm:i.a.func.isRequired,onCancel:i.a.func.isRequired,title:i.a.string.isRequired,activeTab:i.a.string,rootLocationId:i.a.number,startingLocationId:i.a.number,multiple:i.a.bool,multipleItemsLimit:i.a.number,containersOnly:i.a.bool,allowedContentTypes:i.a.array.isRequired,activeSortClause:i.a.string,activeSortOrder:i.a.string,activeView:i.a.string,contentOnTheFly:i.a.shape({allowedLanguages:i.a.array.isRequired,allowedLocations:i.a.array.isRequired,preselectedLocation:i.a.string.isRequired,preselectedContentType:i.a.string.isRequired,hidden:i.a.bool.isRequired,autoConfirmAfterPublish:i.a.bool.isRequired}).isRequired,tabsConfig:i.a.objectOf(i.a.shape({itemsPerPage:i.a.number.isRequired,priority:i.a.number.isRequired,hidden:i.a.bool.isRequired})).isRequired,selectedLocations:i.a.array,allowRedirects:i.a.bool.isRequired,allowConfirmation:i.a.bool.isRequired},re.defaultProps={activeTab:"browse",rootLocationId:1,startingLocationId:null,multiple:!1,multipleItemsLimit:1,containersOnly:!1,activeSortClause:"date",activeSortOrder:"ascending",activeView:"finder",tabs:window.eZ.adminUiConfig.universalDiscoveryWidget.tabs,selectedLocations:[]},eZ.addConfig("modules.UniversalDiscovery",re);t.default=re},Hzdi:function(e,t,n){"use strict";n.r(t);var r=n("cDcd"),o=n.n(r),a=n("zZ4q"),i=n("MnjE"),c=n("3obH"),s=n("BZDO"),l=n("CgFf");function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(){var e=u(Object(r.useContext)(l.CurrentViewContext),2),t=e[0],n=(e[1],Object(r.useContext)(l.TabsConfigContext)),d={grid:o.a.createElement(i.a,{itemsPerPage:n.browse.itemsPerPage}),finder:o.a.createElement(c.a,{itemsPerPage:n.browse.itemsPerPage}),tree:o.a.createElement(s.a,{itemsPerPage:n.browse.itemsPerPage})};return o.a.createElement("div",{className:"m-browse-tab"},o.a.createElement(a.a,null,d[t]))};eZ.addConfig("adminUiConfig.universalDiscoveryWidget.tabs",[{id:"browse",component:f,label:Translator.trans("browse.label",{},"universal_discovery_widget"),icon:window.eZ.helpers.icon.getIconPath("browse")}],!0),t.default=f},MUfx:function(e,t,n){"use strict";var r=n("cDcd"),o=n.n(r),a=n("rf6O"),i=n.n(a),c=n("uHg5"),s=n("nLu2"),l=n("CgFf");function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t=e.isSelected,n=e.toggleSelection,a=Object(r.useRef)(null),i=u(Object(r.useContext)(l.SelectedLocationsContext),2),d=i[0],f=(i[1],u(Object(r.useContext)(l.MultipleConfigContext),2)),m=f[0],b=f[1],p=Translator.trans("browser.add",{},"universal_discovery_widget"),y=Translator.trans("browser.selected",{},"universal_discovery_widget"),v=t?y:p,h=t?"checkmark":"create",g=Object(s.a)({"c-toggle-selection-button":!0,"c-toggle-selection-button--selected":t});return Object(r.useEffect)((function(){window.eZ.helpers.tooltips.hideAll(window.document.querySelector(".c-udw-tab")),a.current.getAttribute("data-original-title")&&a.current.removeAttribute("title"),a.current.setAttribute("data-original-title",v)}),[t]),m&&!t&&d.length>=b&&0!==b?null:o.a.createElement("button",{ref:a,className:g,onClick:n,title:v,"data-tooltip-container-selector":".c-udw-tab"},o.a.createElement(c.a,{name:h,extraClasses:"ez-icon--small"}))};f.propTypes={isSelected:i.a.object.isRequired,toggleSelection:i.a.func.isRequired},t.a=f},MnjE:function(e,t,n){"use strict";var r=n("cDcd"),o=n.n(r),a=n("rf6O"),i=n.n(a),c=n("/A22"),s=n("uHg5"),l=n("oOVF"),u=n("nLu2"),d=n("CgFf");function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){return e.target.closest(".c-toggle-selection-button")},p=function(e){var t=e.location,n=e.version,a=f(Object(r.useContext)(d.MarkedLocationIdContext),2),i=a[0],s=a[1],m=f(Object(r.useContext)(d.LoadedLocationsMapContext),2),p=(m[0],m[1]),y=Object(r.useContext)(d.ContentTypesMapContext),v=f(Object(r.useContext)(d.SelectedLocationsContext),2),h=(v[0],v[1]),g=f(Object(r.useContext)(d.MultipleConfigContext),2),C=g[0],O=(g[1],Object(r.useContext)(d.ContainersOnlyContext)),w=Object(r.useContext)(d.AllowedContentTypesContext),E=y[t.ContentInfo.Content.ContentType._href],j=E.isContainer,_=O&&!j||w&&!w.includes(E.identifier),S=Object(u.a)({"c-grid-item":!0,"c-grid-item--marked":i===t.id,"c-grid-item--not-selectable":_});return o.a.createElement("div",{className:S,onClick:function(e){var n=e.nativeEvent;b(n)||(s(t.id),C||_||(h({type:"CLEAR_SELECTED_LOCATIONS"}),h({type:"ADD_SELECTED_LOCATION",location:t})))},onDoubleClick:function(e){var n=e.nativeEvent;b(n)||O&&!j||p({type:"UPDATE_LOCATIONS",data:{parentLocationId:t.id,subitems:[]}})}},o.a.createElement("div",{className:"c-grid-item__preview"},o.a.createElement(l.a,{thumbnailData:n.Thumbnail,iconExtraClasses:"ez-icon--extra-large",contentTypeIconPath:y[t.ContentInfo.Content.ContentType._href].thumbnail})),o.a.createElement("div",{className:"c-grid-item__name"},t.ContentInfo.Content.TranslatedName),!C||_?null:o.a.createElement(c.a,{location:t}))};p.propTypes={location:i.a.object.isRequired,version:i.a.object},p.defaultProps={version:{}};var y=p;function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(){var e=v(Object(r.useContext)(d.LoadedLocationsMapContext),2),t=e[0],n=e[1],a=v(Object(r.useState)(!1),2),i=a[0],c=a[1],l=Object(r.useMemo)((function(){return t.reduce((function(e,n,r){return t.length-3<=r?e.visibleItems.push(n):e.hiddenItems.push(n),e}),{visibleItems:[],hiddenItems:[]})}),[t]),f=l.visibleItems,m=l.hiddenItems,b=function(e){var r=t.findIndex((function(t){return t.parentLocationId===e})),o=t.slice(0,r+1);o[o.length-1].subitems=[],n({type:"SET_LOCATIONS",data:o})},p=Object(r.useCallback)((function(){c(!i)}),[c,i]);return Object(r.useEffect)((function(){return i?window.document.body.addEventListener("click",p,!1):window.document.body.removeEventListener("click",p,!1),function(){return window.document.body.removeEventListener("click",p,!1)}}),[i,p]),t.some((function(e){return 1!==e.parentLocationId&&!e.location}))?null:o.a.createElement("div",{className:"c-breadcrumbs"},function(){if(!m.length)return null;var e=Object(u.a)({"c-breadcrumbs__hidden-list":!0,"c-breadcrumbs__hidden-list--visible":i}),t=Object(u.a)({"c-breadcrumbs__hidden-list-toggler":!0,"c-breadcrumbs__hidden-list-toggler--active":i});return o.a.createElement("div",{className:"c-breadcrumbs__hidden-list-wrapper"},o.a.createElement("button",{className:t,onClick:p},o.a.createElement(s.a,{name:"options",extraClasses:"ez-icon--small-medium"})),o.a.createElement("ul",{className:e},m.map((function(e){var t=e.parentLocationId,n=1===t?Translator.trans("breadcrumbs.root_location",{},"universal_discovery_widget"):e.location.ContentInfo.Content.TranslatedName,r=b.bind(void 0,t);return o.a.createElement("li",{key:t,onClick:r,className:"c-breadcrumbs__hidden-list-item"},n)}))))}(),o.a.createElement("div",{className:"c-breadcrumbs__list-wrapper"},o.a.createElement("ul",{className:"c-breadcrumbs__list"},f.map((function(e,t){var n=e.parentLocationId,r=1===n?Translator.trans("breadcrumbs.root_location",{},"universal_discovery_widget"):e.location.ContentInfo.Content.TranslatedName,a=t===f.length-1,i=b.bind(void 0,n),c=Object(u.a)({"c-breadcrumbs__list-item":!0,"c-breadcrumbs__list-item--last":a});return o.a.createElement("li",{key:n,onClick:i,className:c},o.a.createElement("span",{className:"c-breadcrumbs__list-item-text"},r),!a&&o.a.createElement("span",{className:"c-breadcrumbs__list-item-separator"},"/"))})))))},C=n("ONuQ");function O(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T=function(e){var t=e.itemsPerPage,n=_(Object(r.useState)(0),2),a=n[0],i=n[1],c=_(Object(r.useContext)(d.LoadedLocationsMapContext),2),s=c[0],l=c[1],u=_(Object(r.useContext)(d.SortingContext),2),f=u[0],m=(u[1],_(Object(r.useContext)(d.SortOrderContext),2)),b=m[0],p=(m[1],d.SORTING_OPTIONS.find((function(e){return e.sortClause===f}))),v=s.length?s[s.length-1]:{subitems:[]},h=_(Object(C.a)(v,{sortClause:p.sortClause,sortOrder:b},t,a,!0),2),w=h[0],j=h[1];return Object(r.useEffect)((function(){if(!j&&w.subitems){var e=E(E(E({},v),w),{},{subitems:[].concat(O(v.subitems),O(w.subitems))});i(0),l({type:"UPDATE_LOCATIONS",data:e})}}),[w,l,j]),o.a.createElement("div",{className:"c-grid"},o.a.createElement(g,null),o.a.createElement("div",{className:"c-grid__items-wrapper",onScroll:function(e){var n=e.target,r=v.subitems.length>=w.totalCount,o=n.scrollHeight-n.clientHeight-n.scrollTop<200;r||!o||j||i(a+t)}},v.subitems.map((function(e){return e.version?o.a.createElement(y,{key:e.location.id,location:e.location,version:e.version}):null}))))};T.propTypes={itemsPerPage:i.a.number},T.defaultProps={itemsPerPage:50};t.a=T},MqzM:function(e,t,n){"use strict";var r=n("cDcd"),o=n.n(r),a=n("rf6O"),i=n.n(a),c=n("uHg5"),s=n("qM4U"),l=n("xI8+"),u=n("CgFf");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(e){var t=e.version,n=e.location,a=e.isDisabled,i=Object(r.useContext)(u.RestInfoContext),d=Object(r.useContext)(u.AllowRedirectsContext),m=b(Object(r.useContext)(u.EditOnTheFlyDataContext),2),p=(m[0],m[1]),y=b(Object(r.useContext)(u.ActiveTabContext),2),v=(y[0],y[1]),h=Object(r.useContext)(u.ContentTypesMapContext),g=b(Object(r.useState)(!1),2),C=g[0],O=g[1],w=h[n.ContentInfo.Content.ContentType._href],E=window.eZ.adminUiConfig.userContentTypes.includes(w.identifier),j=Translator.trans("meta_preview.edit",{},"universal_discovery_widget");Object(r.useEffect)((function(){O(!1)}),[t]);var _=function(){O(!1)},S=function(e,t,n,r){if(d){var o=E?window.Routing.generate("ezplatform.user.update",{contentId:e,versionNo:t,language:n},!0):window.Routing.generate("ezplatform.content.draft.edit",{contentId:e,versionNo:t,language:n,locationId:r},!0);window.location.href=o}else p({contentId:e,versionNo:t,languageCode:n,locationId:r}),v("content-edit")},I=function(e){var r=n.ContentInfo.Content._id;E?S(r,t.VersionInfo.versionNo,e,n.id):Object(l.b)(f(f({},i),{},{contentId:r}),(function(t){return S(r,t.Version.VersionInfo.versionNo,e,n.id)}))};return o.a.createElement("div",{className:"c-content-edit-button"},o.a.createElement("button",{className:"c-content-edit-button__btn btn btn-icon",disabled:!t||a,onClick:function(){var e=t.VersionInfo.languageCodes.split(",");1===e.length?I(e[0]):O(!0)},"data-tooltip-container-selector":".c-udw-tab",title:j},o.a.createElement(c.a,{name:"edit",extraClasses:"ez-icon--small-medium ez-icon--secondary"})),o.a.createElement(s.a,{hideTranslationSelector:_,selectTranslation:I,version:t,isOpen:C&&t}))};y.propTypes={location:i.a.object.isRequired,version:i.a.object.isRequired,isDisabled:i.a.bool.isRequired},t.a=y},ONuQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("cDcd"),o=n("xI8+"),a=n("CgFf");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d={dataFetched:!1,data:{}},f=function(e,t){switch(t.type){case"FETCH_START":return d;case"FETCH_END":return{data:t.data,dataFetched:!0};default:throw new Error}},m=function(e,t,n,i){var s=t.sortClause,u=t.sortOrder,m=arguments.length>4&&void 0!==arguments[4]&&arguments[4],b=Object(r.useContext)(a.RestInfoContext),p=Object(r.useReducer)(f,d),y=l(p,2),v=y[0],h=y[1];return Object(r.useEffect)((function(){var t=!1;if(!(!e.parentLocationId||e.collapsed||e.subitems.length>=e.totalCount||e.subitems.length>=n+i))return h({type:"FETCH_START"}),Object(o.d)(c(c({},b),{},{parentLocationId:e.parentLocationId,sortClause:s,sortOrder:u,limit:n,offset:i,gridView:m}),(function(e){t||h({type:"FETCH_END",data:e})})),function(){t=!0};h({type:"FETCH_END",data:{}})}),[b,s,u,e.parentLocationId,e.subitems.length,n,i,m,e.collapsed]),[v.data,!v.dataFetched]}},PFI1:function(e,t,n){"use strict";n.r(t);var r=n("cDcd"),o=n.n(r),a=n("CgFf"),i=n("xI8+"),c=n("AJkD"),s=n("nLu2");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(){var e=f(Object(r.useState)(!0),2),t=e[0],n=e[1],l=Object(r.useContext)(a.RestInfoContext),d=Object(r.useContext)(a.TabsContext),m=f(Object(r.useContext)(a.ActiveTabContext),2),b=(m[0],m[1]),p=f(Object(r.useContext)(a.LoadedLocationsMapContext),2),y=p[0],v=p[1],h=f(Object(r.useContext)(a.SelectedLocationsContext),2),g=h[0],C=h[1],O=f(Object(r.useContext)(a.EditOnTheFlyDataContext),2),w=O[0],E=O[1],j=Translator.trans("content_edit.cancel.label",{},"universal_discovery_widget"),_=Translator.trans("content_edit.confirm.label",{},"universal_discovery_widget"),S=Object(r.useRef)(),I=function(){b(d[0].id),E({})},T=function(){return n(!1)},x=function(){return n(!0)},L=window.Routing.generate("ezplatform.content_on_the_fly.edit",{contentId:w.contentId,versionNo:w.versionNo,languageCode:w.languageCode,locationId:w.locationId},!0),A=Object(s.a)({"c-content-edit":!0,"c-content-edit--footer-visible":t});return Object(r.useEffect)((function(){return window.document.body.addEventListener("ez-udw-hide-footer",T,!1),window.document.body.addEventListener("ez-udw-show-footer",x,!1),function(){window.document.body.removeEventListener("ez-udw-hide-footer",T,!1),window.document.body.removeEventListener("ez-udw-show-footer",x,!1)}})),o.a.createElement("div",{className:A},o.a.createElement("iframe",{src:L,className:"c-content-edit__iframe",ref:S,onLoad:function(){var e=S.current.contentWindow.document.querySelector('meta[name="LocationID"]');e&&function(e){var t=Object(c.a)(y),n=!1;Object(i.d)(u(u({},l),{},{parentLocationId:e}),(function(t){var n=Object(c.a)(g),r=n.findIndex((function(t){return t.location.id===e}));-1!==r&&(n[r].location=t.location,C({type:"REPLACE_SELECTED_LOCATIONS",locations:n})),v({type:"UPDATE_LOCATIONS",data:t})})),t.forEach((function(t){t.subitems.find((function(t){return t.location.id===e}))&&(t.subitems=[],n=!0)})),n&&v({type:"SET_LOCATIONS",data:t}),I()}(parseInt(e.content,10)),S.current.contentWindow.document.body.addEventListener("ez-udw-opened",T,!1),S.current.contentWindow.document.body.addEventListener("ez-udw-closed",x,!1)}}),o.a.createElement("div",{className:"c-content-edit__actions"},o.a.createElement("button",{className:"c-content-edit__cancel-button btn btn-gray",onClick:I},j),o.a.createElement("button",{className:"c-content-edit__confirm-button btn btn-primary",onClick:function(){var e=S.current.contentWindow.document.body.querySelector('[data-action="publish"]');e&&e.click()}},_)))};eZ.addConfig("adminUiConfig.universalDiscoveryWidget.tabs",[{id:"content-edit",component:b,label:Translator.trans("content_edit.label",{},"universal_discovery_widget"),isHiddenOnList:!0}],!0),t.default=b},S6d5:function(e,t,n){"use strict";n.r(t),n.d(t,"getLocationData",(function(){return p}));var r=n("cDcd"),o=n.n(r),a=n("uHg5"),i=n("oOVF"),c=(n("qM4U"),n("MqzM")),s=n("xI8+"),l=n("CgFf");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e,t){return e.find((function(e){return e.parentLocationId===t}))||e.length&&e[e.length-1].subitems.find((function(e){return e.location.id===t}))},y=function(){var e=Object(r.useRef)(null),t=m(Object(r.useContext)(l.MarkedLocationIdContext),2),n=t[0],u=(t[1],m(Object(r.useContext)(l.LoadedLocationsMapContext),2)),f=u[0],b=u[1],y=Object(r.useContext)(l.ContentTypesMapContext),v=Object(r.useContext)(l.RestInfoContext),h=Object(r.useContext)(l.AllowRedirectsContext),g=window.eZ.helpers.timezone.formatShortDateTime,C=Object(r.useMemo)((function(){return p(f,n)}),[n,f]),O=Translator.trans("meta_preview.bookmark",{},"universal_discovery_widget"),w=Translator.trans("meta_preview.preview",{},"universal_discovery_widget");if(Object(r.useEffect)((function(){window.eZ.helpers.tooltips.parse(e.current)})),!C||!C.location||!C.version||1===n)return null;var E,j,_=C.bookmarked,S=C.location,I=C.version,T=C.permissions,x=_?"bookmark-active":"bookmark",L=function(){window.location.href=window.Routing.generate("_ez_content_view",{contentId:S.ContentInfo.Content._id,locationId:S.id},!0)},A=Translator.trans("meta_preview.last_modified",{},"universal_discovery_widget"),P=Translator.trans("meta_preview.creation_date",{},"universal_discovery_widget"),N=Translator.trans("meta_preview.translations",{},"universal_discovery_widget");return o.a.createElement("div",{className:"c-content-meta-preview",ref:e},o.a.createElement("div",{className:"c-content-meta-preview__preview"},o.a.createElement(i.a,{thumbnailData:I.Thumbnail,iconExtraClasses:"ez-icon--extra-large"})),o.a.createElement("div",{className:"c-content-meta-preview__header"},o.a.createElement("span",{className:"c-content-meta-preview__content-name"},S.ContentInfo.Content.TranslatedName),o.a.createElement("button",{className:"c-content-meta-preview__toggle-bookmark-button btn btn-icon",onClick:function(){(_?s.k:s.a)(d(d({},v),{},{locationId:S.id}),(function(){b({type:"UPDATE_LOCATIONS",data:d(d({},C),{},{bookmarked:!_})})}))},title:O,"data-placement":"left","data-tooltip-container-selector":".c-content-meta-preview"},o.a.createElement(a.a,{name:x,extraClasses:"ez-icon--small ez-icon--secondary"}))),(E=h?o.a.createElement("button",{className:"c-content-meta-preview__preview-button btn btn-icon",onClick:L,"data-tooltip-container-selector":".c-udw-tab",title:w},o.a.createElement(a.a,{name:"view",extraClasses:"ez-icon--small-medium ez-icon--secondary"})):null,j=T&&T.edit.hasAccess,o.a.createElement("div",{className:"c-content-meta-preview__actions"},o.a.createElement(c.a,{location:S,version:I,isDisabled:!j}),E)),o.a.createElement("div",{className:"c-content-meta-preview__info"},o.a.createElement("div",{className:"c-content-meta-preview__content-type-name"},y[S.ContentInfo.Content.ContentType._href].name),o.a.createElement("div",{className:"c-content-meta-preview__details"},o.a.createElement("div",{className:"c-content-meta-preview__details-item"},o.a.createElement("span",null,A),o.a.createElement("span",null,g(new Date(S.ContentInfo.Content.lastModificationDate)))),o.a.createElement("div",{className:"c-content-meta-preview__details-item"},o.a.createElement("span",null,P),o.a.createElement("span",null,g(new Date(S.ContentInfo.Content.publishedDate)))),o.a.createElement("div",{className:"c-content-meta-preview__details-item"},o.a.createElement("span",null,N),o.a.createElement("div",{className:"c-content-meta-preview__translations-wrapper"},I.VersionInfo.languageCodes.split(",").map((function(e){return o.a.createElement("span",{key:e,className:"c-content-meta-preview__translation"},window.eZ.adminUiConfig.languages.mappings[e].name)})))))))};eZ.addConfig("adminUiConfig.universalDiscoveryWidget.contentMetaPreview",y),t.default=y},Y1Nf:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=function(e){var t=new CustomEvent("ez-notify",{detail:e});document.body.dispatchEvent(t)},o=function(e){var t=e instanceof Error?e.message:e;r({message:t,label:"error"})}},cDcd:function(e,t){e.exports=React},eVcW:function(e,t,n){"use strict";n.r(t);var r=n("cDcd"),o=n.n(r),a=n("zZ4q"),i=n("rf6O"),c=n.n(i),s=n("uHg5"),l=n("/A22"),u=n("nLu2"),d=n("xI8+"),f=n("CgFf");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=function(e){var t=e.location,n=Object(r.useContext)(f.RestInfoContext),a=y(Object(r.useContext)(f.CurrentViewContext),2),i=a[0],c=(a[1],y(Object(r.useContext)(f.SortingContext),2)),m=c[0],p=(c[1],y(Object(r.useContext)(f.SortOrderContext),2)),v=p[0],h=(p[1],y(Object(r.useContext)(f.LoadedLocationsMapContext),2)),g=(h[0],h[1]),C=y(Object(r.useContext)(f.MarkedLocationIdContext),2),O=C[0],w=C[1],E=Object(r.useContext)(f.ContentTypesMapContext),j=y(Object(r.useContext)(f.SelectedLocationsContext),2),_=(j[0],j[1]),S=y(Object(r.useContext)(f.MultipleConfigContext),2),I=S[0],T=(S[1],Object(r.useContext)(f.RootLocationIdContext)),x=window.eZ.helpers.timezone.formatShortDateTime,L=Object(r.useContext)(f.AllowedContentTypesContext),A=E[t.ContentInfo.Content.ContentType._href],P=Object(r.useContext)(f.ContainersOnlyContext),N=A.isContainer,k=P&&!N||L&&!L.includes(A.identifier),R=Object(u.a)({"c-content-table-item":!0,"c-content-table-item--marked":O===t.id,"c-content-table-item--not-selectable":k});return o.a.createElement("tr",{className:R,onClick:function(e){e.nativeEvent.target.closest(".c-toggle-selection-button")||(w(t.id),Object(d.f)(b(b({},n),{},{parentLocationId:t.id,sortClause:m,sortOrder:v,gridView:"grid"===i,rootLocationId:T}),(function(e){g({type:"SET_LOCATIONS",data:e})})),I||k||(_({type:"CLEAR_SELECTED_LOCATIONS"}),_({type:"ADD_SELECTED_LOCATION",location:t})))}},o.a.createElement("td",{className:"c-content-table-item__icon-wrapper"},o.a.createElement(s.a,{extraClasses:"ez-icon--small",customPath:A.thumbnail})),o.a.createElement("td",null,t.ContentInfo.Content.TranslatedName),o.a.createElement("td",null,x(new Date(t.ContentInfo.Content.lastModificationDate))),o.a.createElement("td",null,A.name),o.a.createElement("td",{className:"c-content-table-item__toggle-button-wrapper"},!I||k?null:o.a.createElement(l.a,{location:t})))};h.propTypes={location:c.a.object.isRequired};var g=h,C=n("tw3r"),O=function(e){var t=e.count,n=e.itemsPerPage,a=e.items,i=e.activePageIndex,c=e.title,s=e.onPageChange,l=Object(r.useRef)(null),u=Translator.trans("content_table.name",{},"universal_discovery_widget"),d=Translator.trans("content_table.modified",{},"universal_discovery_widget"),f=Translator.trans("content_table.content_type",{},"universal_discovery_widget");return Object(r.useEffect)((function(){window.eZ.helpers.tooltips.parse(l.current)}),[]),o.a.createElement("div",{className:"c-content-table",ref:l},o.a.createElement("div",{className:"c-content-table__title"},c),o.a.createElement("div",{className:"c-content-table__items"},o.a.createElement("table",{className:"table table-hover"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null),o.a.createElement("th",null,u),o.a.createElement("th",null,d),o.a.createElement("th",null,f),o.a.createElement("th",null))),o.a.createElement("tbody",null,a.map((function(e){return o.a.createElement(g,{key:e.id,location:e})}))))),o.a.createElement("div",{className:"c-content-table__pagination"},o.a.createElement(C.a,{proximity:1,itemsPerPage:n,activePageIndex:i,totalCount:t,onPageChange:s,disabled:!1})))};O.propTypes={count:c.a.number.isRequired,itemsPerPage:c.a.number.isRequired,activePageIndex:c.a.number.isRequired,items:c.a.array.isRequired,title:c.a.string.isRequired,onPageChange:c.a.func.isRequired};var w=O,E=n("faye"),j=n.n(E);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L=function(){var e=window.eZ.adminUiConfig.contentTypes,t=Object(r.useContext)(f.AllowedContentTypesContext),n=T(Object(r.useContext)(X),2),a=n[0],i=n[1],c=T(Object(r.useState)((function(){return Object.keys(e).reduce((function(e,t,n){return S(S({},e),{},I({},t,!!n))}),{})})),2),s=c[0],l=c[1],d=function(e){var t=e.nativeEvent.target.dataset.id;l((function(e){return S(S({},e),{},I({},t,!e[t]))}))},m=function(e){var t=e.nativeEvent.target.dataset.contentTypeIdentifier,n={contentTypeIdentifier:t};n.type=a.includes(t)?"REMOVE_CONTENT_TYPE":"ADD_CONTENT_TYPE",i(n)};return o.a.createElement("div",{className:"ez-content-type-selector c-content-type-selector"},Object.entries(e).map((function(e){var n=T(e,2),r=n[0],i=n[1];if(i.every((function(e){return t&&!t.includes(e.identifier)})))return null;var c=Object(u.a)({"ez-content-type-selector__group":!0,"ez-content-type-selector__group--collapsed":s[r]});return o.a.createElement("div",{key:r,className:c},o.a.createElement("span",{className:"ez-content-type-selector__group-title","data-id":r,onClick:d},r),o.a.createElement("ul",{className:"ez-content-type-selector__list"},i.map((function(e){return t&&!t.includes(e.identifier)?null:o.a.createElement("li",{key:e.identifier,className:"ez-content-type-selector__item"},o.a.createElement("div",{className:"form-check form-check-inline"},o.a.createElement("input",{type:"checkbox",id:"ez-search-content-type-".concat(e.identifier),className:"ez-input ez-input--checkbox",value:e.identifier,"data-content-type-identifier":e.identifier,onChange:m,checked:a.includes(e.identifier)}),o.a.createElement("label",{className:"checkbox-inline form-check-label",htmlFor:"ez-search-content-type-".concat(e.identifier)},e.name)))}))))})))};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=function(e){var t=e.isCollapsed,n=e.search,a=k(Object(r.useContext)(X),2),i=a[0],c=a[1],l=k(Object(r.useContext)(J),2),m=l[0],b=l[1],p=k(Object(r.useContext)(G),2),y=p[0],v=p[1],h=k(Object(r.useState)(""),2),g=h[0],C=h[1],O=k(Object(r.useState)(!1),2),w=O[0],E=O[1],_=Object(r.useContext)(f.RestInfoContext),S=function(){v(""),C("")},I=Object(u.a)({"c-filters":!0,"ez-filters":!0,"ez-filters--collapsed":t}),T=function(){var e=window.document.createElement("div"),t=JSON.parse(window.document.querySelector("#react-udw").dataset.filterSubtreeUdwConfig),n=function(){j.a.unmountComponentAtNode(e),e.remove()};window.document.body.append(e);var r=P({onConfirm:function(e){var t=e[0].pathString,r=t.split("/").filter((function(e){return e})),o=r.splice(1,r.length-1).join();Object(d.c)(P(P({},_),{},{id:o}),(function(e){var t=e.map((function(e){return e.ContentInfo.Content.TranslatedName})).join(" / ");C(t)})),v(t),n()},onCancel:n,tabs:window.eZ.adminUiConfig.universalDiscoveryWidget.tabs,title:"Browsing content"},t);j.a.render(o.a.createElement(eZ.modules.UniversalDiscovery,r),e)},x=Object(r.useCallback)((function(){return n(0)}),[n]),A=!!i.length||!!m||!!y,N=Translator.trans("filters.content_type",{},"universal_discovery_widget"),R=Translator.trans("filters.section",{},"universal_discovery_widget"),D=Translator.trans("filters.any_section",{},"universal_discovery_widget"),z=Translator.trans("filters.subtree",{},"universal_discovery_widget"),M=Translator.trans("filters.clear",{},"universal_discovery_widget"),q=Translator.trans("filters.apply",{},"universal_discovery_widget");return Object(r.useEffect)((function(){w&&(E(!1),x())}),[w,x]),o.a.createElement("div",{className:I},o.a.createElement("div",{className:"ez-filters__row"},o.a.createElement("div",{className:"ez-filters__item ez-filters__item--content-type"},o.a.createElement("label",{className:"ez-label"},N),o.a.createElement(L,null))),o.a.createElement("div",{className:"ez-filters__row"},o.a.createElement("div",{className:"ez-filters__item ez-filters__item--section"},o.a.createElement("label",{className:"ez-label"},R),o.a.createElement("select",{className:"ez-filters__select form-control",onChange:function(e){var t=e.target.value;b(t)},value:m},o.a.createElement("option",{value:""},D),Object.entries(window.eZ.adminUiConfig.sections).map((function(e){var t=k(e,2),n=t[0],r=t[1];return o.a.createElement("option",{key:n,value:n},r)})))),o.a.createElement("div",{className:"ez-filters__item ez-filters__item--subtree"},o.a.createElement("label",{className:"ez-label"},z,":"),o.a.createElement("div",null,y?null:o.a.createElement("button",{className:"btn btn-secondary ez-btn--udw-select-location",type:"button",onClick:T},"Select content"),g?o.a.createElement("div",{className:"ez-tag"},o.a.createElement("div",{className:"ez-tag__content"},g),o.a.createElement("button",{type:"button",className:"ez-tag__remove-btn",onClick:S},o.a.createElement(s.a,{name:"discard",extraClasses:"ez-icon--small ez-icon--dark"}))):null))),o.a.createElement("div",{className:"ez-filters__btns"},o.a.createElement("button",{type:"submit",className:"btn btn-primary ez-btn-apply",onClick:x,disabled:!A},q),o.a.createElement("button",{className:"ez-btn ez-btn--no-border",onClick:function(){c({type:"CLEAR_CONTENT_TYPES"}),b(""),S(),E(!0)}},M)))};D.propTypes={isCollapsed:c.a.bool.isRequired,search:c.a.func.isRequired};var z=D;function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W=function(e,t){switch(t.type){case"SEARCH_START":return{isLoading:!0,data:{}};case"SEARCH_END":return{isLoading:!1,data:t.response};default:throw new Error}};function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||$(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=Object(r.createContext)(),J=Object(r.createContext)(),G=Object(r.createContext)(),Y=function(e,t){switch(t.type){case"ADD_CONTENT_TYPE":return[].concat(H(e),[t.contentTypeIdentifier]);case"REMOVE_CONTENT_TYPE":return e.filter((function(e){return e!==t.contentTypeIdentifier}));case"CLEAR_CONTENT_TYPES":return[];default:throw new Error}},Q=Object.values(window.eZ.adminUiConfig.languages.mappings),K=function(e){var t,n,a,i,c,s,l,u,m=e.itemsPerPage,b=Translator.trans("search.filters",{},"universal_discovery_widget"),p=Translator.trans("search.search",{},"universal_discovery_widget"),y=Object(r.useContext)(f.AllowedContentTypesContext),v=V(Object(r.useState)(""),2),h=v[0],g=v[1],C=V(Object(r.useState)(0),2),O=C[0],E=C[1],j=V(Object(r.useState)(!0),2),_=j[0],S=j[1],I=V(Object(r.useReducer)(Y,[]),2),T=I[0],x=I[1],L=V(Object(r.useState)(""),2),A=L[0],P=L[1],N=V(Object(r.useState)(""),2),k=N[0],R=N[1],D=Q.length?Q[0].languageCode:"",M=V(Object(r.useState)(D),2),U=M[0],Z=M[1],$=function(e){return Z(e.target.value)},B=V(function(){var e=Object(r.useContext)(f.RestInfoContext),t=F(Object(r.useReducer)(W,{isLoading:!1,data:{}}),2),n=t[0],o=n.isLoading,a=n.data,i=t[1];return[o,a,Object(r.useCallback)((function(t,n,r,o,a,c,s){var l={FullTextCriterion:"".concat(t,"*")};n&&n.length&&(l.ContentTypeIdentifierCriterion=n),r&&(l.SectionIdentifierCriterion=r),o&&(l.SubtreeCriterion=o),i({type:"SEARCH_START"}),Object(d.e)(q(q({},e),{},{query:l,limit:a,offset:c,languageCode:s}),(function(e){i({type:"SEARCH_END",response:e})}))}),[e,i])]}(),3),K=(B[0],B[1]),ee=B[2],te=function(e){if(h)if(void 0===e||e===O){var t=T.length?H(T):y;ee(h,t,A,k,m,O,U)}else E(e)},ne=function(e){return E(e*m)};return Object(r.useEffect)(te,[O]),o.a.createElement("div",{className:"c-search"},o.a.createElement("div",{className:"c-search__tools-wrapper"},o.a.createElement("div",{className:"c-search__input-wrapper"},o.a.createElement("input",{type:"search",className:"c-search__input form-control",onChange:function(e){var t=e.target.value;return g(t)},onKeyPress:function(e){13===e.charCode&&te(0)},value:h})),Q.length>1?o.a.createElement("div",{className:"c-search__selector-wrapper"},o.a.createElement("select",{className:"form-control c-search__select-language",onChange:$,value:U},Q.map((function(e){return e.enabled?o.a.createElement("option",{key:e.id,value:e.languageCode,onChange:$},e.name):null})))):null,o.a.createElement("button",{className:"c-search__search-btn btn btn-primary",onClick:te.bind(void 0,0)},p),o.a.createElement("div",{className:"c-search__filters-btn-wrapper"},o.a.createElement("button",{className:"c-search__toggle-filters-btn btn btn-secondary",onClick:function(){return S((function(e){return!e}))}},b))),o.a.createElement(X.Provider,{value:[T,x]},o.a.createElement(J.Provider,{value:[A,P]},o.a.createElement(G.Provider,{value:[k,R]},o.a.createElement(z,{isCollapsed:_,search:te})))),(t=Translator.trans("search.search_results",{},"universal_discovery_widget"),n=Translator.trans("search.no_results",{},"universal_discovery_widget"),a=Translator.trans("search.tips",{},"universal_discovery_widget"),i=Translator.trans("search.check_spelling",{},"universal_discovery_widget"),c=Translator.trans("search.different_keywords",{},"universal_discovery_widget"),s=Translator.trans("search.more_general",{},"universal_discovery_widget"),l=Translator.trans("search.fewer_keywords",{},"universal_discovery_widget"),u="".concat(t," (").concat(K.count,")"),K.count?o.a.createElement(w,{count:K.count,items:K.items,itemsPerPage:m,activePageIndex:O?O/m:0,title:u,onPageChange:ne}):K.items?o.a.createElement("div",{className:"c-search__no-results"},o.a.createElement("div",{className:"c-search__no-results-title"},u),o.a.createElement("table",{className:"table table-hover"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("span",null,"".concat(n,' "').concat(h,'".')))))),o.a.createElement("h6",null,a,":"),o.a.createElement("ul",null,o.a.createElement("li",null,i),o.a.createElement("li",null,c),o.a.createElement("li",null,s),o.a.createElement("li",null,l))):void 0))};K.propTypes={itemsPerPage:c.a.number},K.defaultProps={itemsPerPage:50};var ee=K,te=function(){var e=Object(r.useContext)(f.TabsConfigContext);return o.a.createElement("div",{className:"m-search-tab"},o.a.createElement(a.a,{actionsDisabledMap:{"content-create-button":!0,"sort-switcher":!0,"view-switcher":!0}},o.a.createElement(ee,{itemsPerPage:e.search.itemsPerPage})))};eZ.addConfig("adminUiConfig.universalDiscoveryWidget.tabs",[{id:"search",component:te,label:Translator.trans("search.label",{},"universal_discovery_widget"),icon:window.eZ.helpers.icon.getIconPath("search")}],!0);t.default=te},faye:function(e,t){e.exports=ReactDOM},iRWG:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=function(e){if(!e.ok)throw Error(e.statusText);return e},o=function(e){return r(e).json()},a=function(e){return r(e).status}},kqHN:function(e,t,n){"use strict";n.r(t);var r=n("cDcd"),o=n.n(r),a=n("zZ4q"),i=n("rf6O"),c=n.n(i),s=n("uHg5"),l=n("nLu2"),u=n("xI8+"),d=n("CgFf");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v={dataFetched:!1,data:{}},h=function(e,t){switch(t.type){case"FETCH_START":return v;case"FETCH_END":return{data:t.data,dataFetched:!0};default:throw new Error}};function g(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t=e.setBookmarkedLocationMarked,n=e.itemsPerPage,a=C(Object(r.useState)(0),2),i=a[0],c=a[1],f=C(Object(r.useState)([]),2),b=f[0],y=f[1],O=C(Object(r.useContext)(d.MarkedLocationIdContext),2),w=O[0],E=(O[1],C(Object(r.useContext)(d.LoadedLocationsMapContext),2)),j=(E[0],E[1]),_=C(Object(r.useContext)(d.SelectedLocationsContext),2),S=(_[0],_[1]),I=C(Object(r.useContext)(d.MultipleConfigContext),2),T=I[0],x=(I[1],Object(r.useContext)(d.AllowedContentTypesContext)),L=Object(r.useContext)(d.ContentTypesMapContext),A=Object(r.useContext)(d.ContainersOnlyContext),P=C(function(e,t){var n=Object(r.useContext)(d.RestInfoContext),o=p(Object(r.useReducer)(h,v),2),a=o[0],i=o[1];return Object(r.useEffect)((function(){var r=!1;return i({type:"FETCH_START"}),Object(u.g)(m(m({},n),{},{limit:e,offset:t}),(function(e){r||i({type:"FETCH_END",data:e})})),function(){r=!0}}),[n,e,t]),[a.data,!a.dataFetched]}(n,i),2),N=P[0],k=P[1];return Object(r.useEffect)((function(){k||y((function(e){return[].concat(g(e),g(N.items))}))}),[N.items,k]),b.length?o.a.createElement("div",{className:"c-bookmarks-list",onScroll:function(e){var t=e.target,r=b.length>=N.count,o=t.scrollHeight-t.clientHeight-t.scrollTop<200;r||!o||k||c(i+n)}},b.map((function(e){var n=e.id===w,r=L[e.ContentInfo.Content.ContentType._href],a=r.isContainer,i=A&&!a||x&&!x.includes(r.identifier),c=Object(l.a)({"c-bookmarks-list__item":!0,"c-bookmarks-list__item--marked":n,"c-bookmarks-list__item--not-selectable":i});return o.a.createElement("div",{key:e.id,className:c,onClick:function(){n||(j({type:"CLEAR_LOCATIONS"}),t(e.id),T||i||(S({type:"CLEAR_SELECTED_LOCATIONS"}),S({type:"ADD_SELECTED_LOCATION",location:e})))}},o.a.createElement(s.a,{extraClasses:"ez-icon--small",customPath:r.thumbnail}),o.a.createElement("span",{className:"c-bookmarks-list__item-name"},e.ContentInfo.Content.TranslatedName))})),k?o.a.createElement("div",{className:"c-bookmarks-list__spinner-wrapper"},o.a.createElement(s.a,{name:"spinner",extraClasses:"m-sub-items__spinner ez-icon--medium ez-spin"})):null):null};E.propTypes={setBookmarkedLocationMarked:c.a.func.isRequired,itemsPerPage:c.a.number},E.defaultProps={itemsPerPage:50};var j=E,_=n("MnjE"),S=n("3obH"),I=n("BZDO");function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=function(){var e=Object(r.useContext)(d.RestInfoContext),t=Object(r.useContext)(d.TabsConfigContext),n=A(Object(r.useContext)(d.CurrentViewContext),2),i=n[0],c=(n[1],A(Object(r.useContext)(d.MarkedLocationIdContext),2)),s=c[0],l=c[1],f=A(Object(r.useContext)(d.SortingContext),2),m=f[0],b=(f[1],A(Object(r.useContext)(d.SortOrderContext),2)),p=b[0],y=(b[1],Object(r.useContext)(d.RootLocationIdContext)),v=A(Object(r.useContext)(d.LoadedLocationsMapContext),2),h=(v[0],v[1]),g=A(Object(r.useState)(null),2),C=g[0],O=g[1],w={grid:o.a.createElement(_.a,{itemsPerPage:t.bookmarks.itemsPerPage}),finder:o.a.createElement(S.a,{itemsPerPage:t.bookmarks.itemsPerPage}),tree:o.a.createElement(I.a,{itemsPerPage:t.bookmarks.itemsPerPage})};return Object(r.useEffect)((function(){C&&(l(C),Object(u.f)(x(x({},e),{},{parentLocationId:C,sortClause:m,sortOrder:p,gridView:"grid"===i,rootLocationId:y}),(function(e){h({type:"SET_LOCATIONS",data:e})})))}),[C,i,e,h,l]),Object(r.useEffect)((function(){s!==C&&(h({type:"CUT_LOCATIONS",locationId:s}),O(null))}),[s,O,C,h]),o.a.createElement("div",{className:"m-bookmarks-tab"},o.a.createElement(a.a,null,o.a.createElement(j,{itemsPerPage:t.bookmarks.itemsPerPage,setBookmarkedLocationMarked:O}),s?w[i]:null))};eZ.addConfig("adminUiConfig.universalDiscoveryWidget.tabs",[{id:"bookmarks",component:N,label:Translator.trans("bookmarks.label",{},"universal_discovery_widget"),icon:window.eZ.helpers.icon.getIconPath("bookmark")}],!0);t.default=N},nLu2:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return a}));var a=function(e){return"[object Object]"!==Object.prototype.toString.call(e)?"":Object.entries(e).reduce((function(e,t){var n=r(t,2),o=n[0],a=n[1];return"".concat(e," ").concat(a?o:"")}),"").trim()}},oOVF:function(e,t,n){"use strict";var r=n("cDcd"),o=n.n(r),a=n("rf6O"),i=n.n(a),c=n("uHg5"),s=function(e){var t=e.thumbnailData,n=e.iconExtraClasses,r=e.contentTypeIconPath;return"image/svg+xml"===t.mimeType?o.a.createElement("div",{className:"c-thumbnail"},o.a.createElement(c.a,{extraClasses:n,customPath:t.resource})):o.a.createElement("div",{className:"c-thumbnail"},r?o.a.createElement("div",{className:"c-thumbnail__icon-wrapper"},o.a.createElement(c.a,{extraClasses:"ez-icon--small",customPath:r})):null,o.a.createElement("img",{src:t.resource}))};s.propTypes={thumbnailData:i.a.shape({mimeType:i.a.string.isRequired,resource:i.a.string.isRequired}).isRequired,iconExtraClasses:i.a.string,contentTypeIconPath:i.a.string},s.defaultProps={iconExtraClasses:null,contentTypeIconPath:null},t.a=s},qM4U:function(e,t,n){"use strict";var r=n("cDcd"),o=n.n(r),a=n("rf6O"),i=n.n(a),c=n("nLu2"),s=n("uHg5"),l=function(e){var t=e.hideTranslationSelector,n=e.selectTranslation,r=e.version,a=e.isOpen,i=r?r.VersionInfo.languageCodes.split(","):[],l=Translator.trans("meta_preview.edit_translation",{},"universal_discovery_widget"),u=Object(c.a)({"c-translation-selector":!0,"c-translation-selector--hidden":!a});return o.a.createElement("div",{className:u},o.a.createElement("div",{className:"c-translation-selector__header"},o.a.createElement("span",{className:"c-translation-selector__title"},"".concat(l," (").concat(i.length,")")),o.a.createElement("button",{className:"c-translation-selector__close-button btn",onClick:t},o.a.createElement(s.a,{name:"discard",extraClasses:"ez-icon--small"}))),o.a.createElement("div",{className:"c-translation-selector__languages-wrapper"},i.map((function(e){return o.a.createElement("div",{key:e,className:"c-translation-selector__language",onClick:n.bind(void 0,e)},window.eZ.adminUiConfig.languages.mappings[e].name)}))))};l.propTypes={hideTranslationSelector:i.a.func.isRequired,selectTranslation:i.a.func.isRequired,version:i.a.object.isRequired,isOpen:i.a.bool.isRequired},t.a=l},rf6O:function(e,t){e.exports=PropTypes},tw3r:function(e,t,n){"use strict";var r=n("cDcd"),o=n.n(r),a=n("rf6O"),i=n.n(a),c=function(e){var t=e.label,n=e.disabled,r=e.additionalClasses,a=e.buttonAdditionalClasses,i=e.onPageChange,c=e.pageIndex,s="c-pagination-button page-item ".concat(r);return s=n?"".concat(s," disabled"):s,o.a.createElement("li",{className:s},o.a.createElement("button",{className:"page-link ".concat(a),onClick:function(){!n&&Number.isInteger(c)&&i(c)},type:"button"},t))};c.propTypes={label:i.a.string.isRequired,disabled:i.a.bool,onPageChange:i.a.func,pageIndex:i.a.number.isRequired,additionalClasses:i.a.string,buttonAdditionalClasses:i.a.string},c.defaultProps={disabled:!1,additionalClasses:"",buttonAdditionalClasses:"",onPageChange:function(){}};var s=c,l=function(e){var t=e.totalCount,n=e.itemsPerPage,r=e.proximity,a=e.activePageIndex,i=e.onPageChange,c=e.disabled,l=Math.ceil(t/n);if(l<=1)return null;var u=Translator.trans("pagination.back",{},"sub_items"),d=Translator.trans("pagination.next",{},"sub_items"),f=a-1,m=a+1,b=0===a,p=a+1===l,y=function(e){for(var t=e.proximity,n=e.activePageIndex,r=e.pagesCount,o=e.separator,a=[],i=!1,c=1;c<=r;c++){1===c||c===r||c>=n+1-t&&c<=n+1+t?(a.push(c),i=!1):i||(a.push(o),i=!0)}return a}({proximity:r,activePageIndex:a,pagesCount:l,separator:"..."}).map((function(e,t){if("..."===e)return o.a.createElement(s,{key:"dots-".concat(t),label:"...",disabled:!0});var n=e===a+1?"active":"",r=""+e;return o.a.createElement(s,{key:e,pageIndex:e-1,label:r,additionalClasses:n,onPageChange:i,disabled:c})}));return o.a.createElement("ul",{className:"c-pagination pagination"},o.a.createElement(s,{pageIndex:f,label:u,additionalClasses:"prev",disabled:b||c,onPageChange:i}),y,o.a.createElement(s,{pageIndex:m,label:d,additionalClasses:"next",disabled:p||c,onPageChange:i}))};l.propTypes={proximity:i.a.number.isRequired,itemsPerPage:i.a.number.isRequired,activePageIndex:i.a.number.isRequired,totalCount:i.a.number.isRequired,onPageChange:i.a.func.isRequired,disabled:i.a.bool.isRequired};t.a=l},uHg5:function(e,t,n){"use strict";var r=n("cDcd"),o=n.n(r),a=n("rf6O"),i=n.n(a),c=function(e){var t=e.customPath?e.customPath:window.eZ.helpers.icon.getIconPath(e.name),n="ez-icon";return e.extraClasses&&(n="".concat(n," ").concat(e.extraClasses)),o.a.createElement("svg",{className:n},o.a.createElement("use",{xlinkHref:t}))};c.propTypes={extraClasses:i.a.string,name:i.a.string,customPath:i.a.string},c.defaultProps={customPath:null,name:null,extraClasses:null},t.a=c},"xI8+":function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"g",(function(){return b})),n.d(t,"a",(function(){return y})),n.d(t,"k",(function(){return v})),n.d(t,"i",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"h",(function(){return C})),n.d(t,"j",(function(){return O}));var r=n("Y1Nf"),o=n("iRWG");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={Accept:"application/vnd.ez.api.View+json; version=1.1","Content-Type":"application/vnd.ez.api.ViewInput+json; version=1.1"},l=function(e){return e.locations.map((function(t){var n={location:t.Location};if(e.versions){var r=e.versions.find((function(e){return e.Version.VersionInfo.Content._href===t.Location.Content._href}));n.version=r.Version}return n}))},u=function(e,t){var n=e.token,a=e.parentLocationId,i=e.limit,c=void 0===i?50:i,s=e.offset,u=void 0===s?0:s,d=e.sortClause,f=void 0===d?"DatePublished":d,m=e.sortOrder,b=void 0===m?"ascending":m,p=e.gridView,y=void 0!==p&&p?"ezplatform.udw.location_gridview.data":"ezplatform.udw.location.data",v=window.Routing.generate(y,{locationId:a}),h=new Request("".concat(v,"?limit=").concat(c,"&offset=").concat(u,"&sortClause=").concat(f,"&sortOrder=").concat(b),{method:"GET",headers:{"X-CSRF-Token":n},mode:"same-origin",credentials:"same-origin"});fetch(h).then(o.a).then((function(e){var n=e.bookmarked,r=e.location,o=e.permissions,i=e.subitems,c=e.version,s=l(i),u={location:r?r.Location:null,version:c?c.Version:null,totalCount:i.totalCount,subitems:s,bookmarked:n,permissions:o,parentLocationId:a};t(u)})).catch(r.a)},d=function(e,t){var n=e.token,a=e.parentLocationId,i=e.limit,c=void 0===i?50:i,s=e.sortClause,u=void 0===s?"DatePublished":s,d=e.sortOrder,f=void 0===d?"ascending":d,m=e.gridView,b=void 0!==m&&m,p=e.rootLocationId,y=void 0===p?1:p,v=b?"ezplatform.udw.accordion_gridview.data":"ezplatform.udw.accordion.data",h=window.Routing.generate(v,{locationId:a}),g=new Request("".concat(h,"?limit=").concat(c,"&sortClause=").concat(u,"&sortOrder=").concat(f,"&rootLocationId=").concat(y),{method:"GET",headers:{"X-CSRF-Token":n},mode:"same-origin",credentials:"same-origin"});fetch(g).then(o.a).then((function(e){var n=e.breadcrumb.map((function(t){var n=t.Location,r=e.columns[n.id];return{location:n,totalCount:r?r.subitems.totalCount:void 0,subitems:r?l(r.subitems):[],parentLocationId:n.id,collapsed:!e.columns[n.id]}})),r=e.columns[1],o=e.columns[a];r&&n.unshift({totalCount:r?r.subitems.totalCount:void 0,subitems:r?l(r.subitems):[],parentLocationId:1,collapsed:!1}),n.push({location:o.location.Location,version:o.version.Version,totalCount:o?o.subitems.totalCount:void 0,subitems:o?l(o.subitems):[],bookmarked:o.bookmarked,permissions:o.permissions,parentLocationId:a}),t(n)})).catch(r.a)},f=function(e,t){var n=e.token,a=e.siteaccess,c=e.query,l=e.limit,u=void 0===l?50:l,d=e.offset,f=void 0===d?0:d,m=e.languageCode,b=void 0===m?null:m,p=JSON.stringify({ViewInput:{identifier:"udw-locations-by-search-query-".concat(c.FullTextCriterion),public:!1,languageCode:b,useAlwaysAvailable:!0,LocationQuery:{FacetBuilders:{},SortClauses:{},Query:c,limit:u,offset:f}}}),y=new Request("/api/ezp/v2/views",{method:"POST",headers:i(i({},s),{},{"X-Siteaccess":a,"X-CSRF-Token":n}),body:p,mode:"same-origin",credentials:"same-origin"});fetch(y).then(o.a).then((function(e){var n=e.View.Result,r=n.count,o=n.searchHits.searchHit.map((function(e){return e.value.Location}));t({items:o,count:r})})).catch(r.a)},m=function(e,t){var n=e.token,a=e.siteaccess,c=e.id,l=e.limit,u=void 0===l?50:l,d=e.offset,f=void 0===d?0:d,m=JSON.stringify({ViewInput:{identifier:"udw-locations-by-id-".concat(c),public:!1,LocationQuery:{FacetBuilders:{},SortClauses:{SectionIdentifier:"ascending"},Filter:{LocationIdCriterion:c},limit:u,offset:f}}}),b=new Request("/api/ezp/v2/views",{method:"POST",headers:i(i({},s),{},{"X-Siteaccess":a,"X-CSRF-Token":n}),body:m,mode:"same-origin",credentials:"same-origin"});fetch(b).then(o.a).then((function(e){var n=e.View.Result.searchHits.searchHit.map((function(e){return e.value.Location}));t(n)})).catch(r.a)},b=function(e,t){var n=e.token,a=e.siteaccess,i=e.limit,c=e.offset,s=new Request("".concat("/api/ezp/v2/bookmark","?limit=").concat(i,"&offset=").concat(c),{method:"GET",headers:{"X-Siteaccess":a,"X-CSRF-Token":n,Accept:"application/vnd.ez.api.ContentTypeInfoList+json"},mode:"same-origin",credentials:"same-origin"});fetch(s).then(o.a).then((function(e){var n=e.BookmarkList.count,r=e.BookmarkList.items.map((function(e){return e.Location}));t({count:n,items:r})})).catch(r.a)},p=function(e,t,n){var a=e.siteaccess,i=e.token,c=e.locationId,s=new Request("".concat("/api/ezp/v2/bookmark","/").concat(c),{method:n,headers:{"X-Siteaccess":a,"X-CSRF-Token":i},mode:"same-origin",credentials:"same-origin"});fetch(s).then(o.b).then(t).catch(r.a)},y=function(e,t){p(e,t,"POST")},v=function(e,t){p(e,t,"DELETE")},h=function(e,t){var n=e.token,a=e.siteaccess,i=new Request("/api/ezp/v2/content/types",{method:"GET",headers:{Accept:"application/vnd.ez.api.ContentTypeInfoList+json","X-Siteaccess":a,"X-CSRF-Token":n},mode:"same-origin",credentials:"same-origin"});fetch(i).then(o.a).then(t).catch(r.a)},g=function(e,t){var n=e.token,a=e.siteaccess,i=e.contentId,c=new Request("/api/ezp/v2/content/objects/".concat(i,"/currentversion"),{method:"COPY",headers:{Accept:"application/vnd.ez.api.VersionUpdate+json","X-Siteaccess":a,"X-CSRF-Token":n},mode:"same-origin",credentials:"same-origin"});fetch(c).then(o.a).then(t).catch(r.a)},C=function(e,t){var n=e.token,a=e.siteaccess,i=e.contentId,c=e.limit,l=void 0===c?50:c,u=e.offset,d=void 0===u?0:u,f=JSON.stringify({ViewInput:{identifier:"udw-load-content-info-".concat(i),public:!1,ContentQuery:{FacetBuilders:{},SortClauses:{},Filter:{ContentIdCriterion:"".concat(i)},limit:l,offset:d}}}),m=new Request("/api/ezp/v2/views",{method:"POST",headers:Object.assign({},s,{"X-Siteaccess":a,"X-CSRF-Token":n}),body:f,mode:"same-origin",credentials:"same-origin"});fetch(m).then(o.a).then((function(e){var n=e.View.Result.searchHits.searchHit.map((function(e){return e.value.Content}));t(n)})).catch(r.a)},O=function(e,t){var n=e.locationIds,a=window.Routing.generate("ezplatform.udw.locations.data"),i=new Request("".concat(a,"?locationIds=").concat(n),{method:"GET",mode:"same-origin",credentials:"same-origin"});fetch(i).then(o.a).then(t).catch(r.a)}},zZ4q:function(e,t,n){"use strict";var r=n("cDcd"),o=n.n(r),a=n("rf6O"),i=n.n(a),c=n("uHg5"),s=n("CgFf");function l(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){var t=e.actionsDisabledMap,n=Object(r.useContext)(s.TitleContext),a=Object(r.useContext)(s.CancelContext),i=Object(r.useMemo)((function(){return l(window.eZ.adminUiConfig.universalDiscoveryWidget.topMenuActions).sort((function(e,t){return t.priority-e.priority}))}),[]),u=Translator.trans("back.label",{},"universal_discovery_widget");return o.a.createElement("div",{className:"c-top-menu"},o.a.createElement("span",{className:"c-top-menu__cancel-btn-wrapper"},o.a.createElement("button",{className:"c-top-menu__cancel-btn btn btn-icon",type:"button",onClick:a,title:u,"data-tooltip-container-selector":".c-top-menu__cancel-btn-wrapper"},o.a.createElement(c.a,{name:"caret-back",extraClasses:"ez-icon--secondary ez-icon--small"}))),o.a.createElement("span",{className:"c-top-menu__title-wrapper"},n),o.a.createElement("div",{className:"c-top-menu__actions-wrapper"},i.map((function(e){var n=e.component;return o.a.createElement(n,{key:e.id,isDisabled:t[e.id]})}))))};d.propTypes={actionsDisabledMap:i.a.object},d.defaultProps={actionsDisabledMap:{"content-create-button":!1,"sort-switcher":!1,"view-switcher":!1}};var f=d,m=n("nLu2");function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(){var e=Object(r.useContext)(s.TabsContext),t=Object(r.useContext)(s.TabsConfigContext),n=b(Object(r.useContext)(s.ActiveTabContext),2),a=n[0],i=n[1],l=Object(r.useMemo)((function(){return e.sort((function(e,n){return t[n.id]&&t[e.id]?t[n.id].priority-t[e.id].priority:0}))}),[e,t]);return o.a.createElement("div",{className:"c-tab-selector"},l.map((function(e){if(e.isHiddenOnList||t[e.id]&&t[e.id].hidden)return null;var n=Object(m.a)({"c-tab-selector__item":!0,"c-tab-selector__item--selected":e.id===a});return o.a.createElement("div",{className:n,key:e.id,onClick:function(){return i(e.id)}},o.a.createElement(c.a,{customPath:e.icon,extraClasses:"ez-icon--small-medium"}),e.label)})))},v=n("oOVF");function h(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){var t=e.location,n=e.permissions,a=Object(r.useRef)(null),i=g(Object(r.useContext)(s.SelectedLocationsContext),2),l=(i[0],i[1]),u=Object(r.useContext)(s.ContentTypesMapContext),d=Translator.trans("selected_locations.clear_selection",{},"universal_discovery_widget"),f=Object(r.useMemo)((function(){var e=window.eZ.adminUiConfig.universalDiscoveryWidget.selectedItemActions;return(e?h(e):[]).sort((function(e,t){return t.priority-e.priority}))}),[]),m=t.ContentInfo.Content.CurrentVersion.Version,b=m?m.Thumbnail:{};return Object(r.useEffect)((function(){window.eZ.helpers.tooltips.parse(a.current)}),[]),o.a.createElement("div",{className:"c-selected-locations-item",ref:a},o.a.createElement("div",{className:"c-selected-locations-item__image-wrapper"},o.a.createElement(v.a,{thumbnailData:b})),o.a.createElement("div",{className:"c-selected-locations-item__info"},o.a.createElement("span",{className:"c-selected-locations-item__info-name"},t.ContentInfo.Content.TranslatedName),o.a.createElement("span",{className:"c-selected-locations-item__info-description"},u[t.ContentInfo.Content.ContentType._href].name)),o.a.createElement("div",{className:"c-selected-locations-item__actions-wrapper"},f.map((function(e){var r=e.component;return o.a.createElement(r,{key:e.id,location:t,permissions:n})})),o.a.createElement("button",{type:"button",className:"c-selected-locations-item__remove-button btn btn-icon",onClick:function(){window.eZ.helpers.tooltips.hideAll(a.current),l({type:"REMOVE_SELECTED_LOCATION",id:t.id})},title:d,"data-tooltip-container-selector":".c-udw-tab"},o.a.createElement(c.a,{name:"trash",extraClasses:"ez-icon--small-medium"}))))};w.propTypes={location:i.a.object.isRequired,permissions:i.a.object.isRequired};var E=w;function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=function(){var e,t=Object(r.useRef)(null),n=Object(r.useRef)(null),a=j(Object(r.useContext)(s.SelectedLocationsContext),2),i=a[0],l=a[1],u=Object(r.useContext)(s.AllowConfirmationContext),d=Object(r.useContext)(s.ConfirmContext),f=j(Object(r.useState)(!1),2),b=f[0],p=f[1],y=Object(m.a)({"c-selected-locations":!0,"c-selected-locations--expanded":b}),v=Translator.trans("selected_locations.expand.sidebar",{},"universal_discovery_widget"),h=Translator.trans("selected_locations.collapse.sidebar",{},"universal_discovery_widget"),g=b?h:v,C=function(){window.eZ.helpers.tooltips.hideAll(t.current),l({type:"CLEAR_SELECTED_LOCATIONS"})},O=function(){p(!b)},w=function(){var e=Translator.trans("selected_locations.selected",{},"universal_discovery_widget");return o.a.createElement("div",{className:"c-selected-locations__selection-counter"},o.a.createElement("span",{className:"c-selected-locations__selection-count"},i.length),o.a.createElement("span",{className:"c-selected-locations__selection-count-label"},e))},_=function(){var e=Translator.trans("selected_locations.confirm_selection",{},"universal_discovery_widget"),t=Translator.trans("selected_locations.clear_all",{},"universal_discovery_widget");return o.a.createElement(r.Fragment,null,o.a.createElement("button",{type:"button",className:"c-selected-locations__confirm-button btn btn-icon",onClick:function(){return d()},title:e,"data-tooltip-container-selector":".c-udw-tab"},o.a.createElement(c.a,{name:"checkmark",extraClasses:"ez-icon--small-medium ez-icon--secondary"})),o.a.createElement("button",{type:"button",className:"c-selected-locations__clear-selection-button btn btn-icon",onClick:C,title:t,"data-tooltip-container-selector":".c-udw-tab"},o.a.createElement(c.a,{name:"trash",extraClasses:"ez-icon--small-medium ez-icon--secondary"})))};return Object(r.useEffect)((function(){window.eZ.helpers.tooltips.parse(t.current),window.eZ.helpers.tooltips.hideAll(),n.current&&(n.current.dataset.originalTitle=g)}),[b]),u?o.a.createElement("div",{className:y,ref:t},o.a.createElement("div",{className:"c-selected-locations__header"},o.a.createElement("div",{className:"c-selected-locations__actions-wrapper"},(e=b?"caret-next":"caret-back",o.a.createElement("button",{ref:n,type:"button",className:"c-selected-locations__toggle-button btn btn-icon",onClick:O,title:g,"data-tooltip-container-selector":".c-udw-tab"},o.a.createElement(c.a,{name:e,extraClasses:"ez-icon--small ez-icon--secondary"}))),!b&&_(),b&&w(),b&&_()),!b&&w()),b?o.a.createElement("div",{className:"c-selected-locations__items-wrapper"},i.map((function(e){return o.a.createElement(E,{key:e.location.id,location:e.location,permissions:e.permissions})}))):null):null};function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=Object.values(window.eZ.adminUiConfig.languages.mappings),L=Object.entries(window.eZ.adminUiConfig.contentTypes),A=function(){var e=Object(r.useRef)(null),t=I(Object(r.useContext)(s.MarkedLocationIdContext),2),n=t[0],a=(t[1],I(Object(r.useContext)(s.LoadedLocationsMapContext),2)),i=a[0],l=(a[1],Object(r.useContext)(s.ContentOnTheFlyConfigContext)),u=l.allowedLanguages,d=l.preselectedLanguage,f=l.preselectedContentType,b=Object(r.useContext)(s.AllowedContentTypesContext),p=i.find((function(e){return e.parentLocationId===n})),y=x.filter((function(e){var t=!p||!p.permissions||!p.permissions.create.restrictedLanguageCodes.length||p.permissions.create.restrictedLanguageCodes.includes(e.languageCode),n=!u||u.includes(e.languageCode);return t&&n&&e.enabled})),v=I(Object(r.useState)(""),2),h=v[0],g=v[1],C=y.length?y[0].languageCode:"",O=I(Object(r.useState)(d||C),2),w=O[0],E=O[1],j=I(Object(r.useState)(f),2),_=j[0],S=j[1],T=I(Object(r.useContext)(s.ActiveTabContext),2),A=(T[0],T[1]),P=I(Object(r.useContext)(s.CreateContentWidgetContext),2),N=P[0],k=P[1],R=I(Object(r.useContext)(s.ContentOnTheFlyDataContext),2),D=(R[0],R[1]),z=function(){k(!1)},M=function(e){return E(e.target.value)},q=!_||!w||1===n,U=Translator.trans("create_content.label",{},"universal_discovery_widget"),F=Translator.trans("create_content.select_language",{},"universal_discovery_widget"),Z=Translator.trans("create_content.select_content_type",{},"universal_discovery_widget"),W=Translator.trans("create_content.create",{},"universal_discovery_widget"),V=Translator.trans("popup.close.label",{},"universal_discovery_widget"),H=Translator.trans("content_create.cancel.label",{},"universal_discovery_widget"),$=Object(m.a)({"c-content-create":!0,"c-content-create--hidden":!N});return Object(r.useEffect)((function(){window.eZ.helpers.tooltips.parse(e.current)}),[]),o.a.createElement("div",{className:$,ref:e},o.a.createElement("div",{className:"c-content-create__header"},o.a.createElement("div",{className:"c-content-create__header-title"},U),o.a.createElement("button",{type:"button",className:"c-content-create__close-button",onClick:z,title:V,"data-tooltip-container-selector":".c-udw-tab"},o.a.createElement(c.a,{name:"discard",extraClasses:"ez-icon--small"}))),o.a.createElement("div",{className:"c-content-create__language-selector-wrapper"},o.a.createElement("div",{className:"c-content-create__language-selector-label"},F),o.a.createElement("select",{className:"form-control",onChange:M,value:w},y.map((function(e){return e.enabled?o.a.createElement("option",{key:e.id,value:e.languageCode,onChange:M},e.name):null})))),o.a.createElement("div",{className:"c-content-create__select-content-type-wrapper"},o.a.createElement("div",{className:"c-content-create__select-content-type-label"},Z),o.a.createElement("input",{autoFocus:!0,className:"form-control",type:"text",placeholder:"Type to refine",onChange:function(e){var t=e.target.value.toLowerCase();g(t)}}),o.a.createElement("div",{className:"c-content-create__content-type-list"},L.map((function(e){var t=I(e,2),n=t[0],r=t[1],a=r.every((function(e){return h&&!e.name.toLowerCase().includes(h)||p&&p.permissions&&p.permissions.create.restrictedContentTypeIds.length&&!p.permissions.create.restrictedContentTypeIds.includes(e.id.toString())||b&&!b.includes(e.identifier)}));return o.a.createElement("div",{className:"c-content-create__group",key:n},o.a.createElement("div",{className:"c-content-create__group-name",hidden:a},n),r.map((function(e){var t=e.name,n=e.thumbnail,r=e.identifier,a=e.id,i=h&&!t.toLowerCase().includes(h)||p&&p.permissions&&p.permissions.create.restrictedContentTypeIds.length&&!p.permissions.create.restrictedContentTypeIds.includes(a.toString())||b&&!b.includes(r),s=Object(m.a)({"c-content-create__group-item":!0,"c-content-create__group-item--selected":r===_});return o.a.createElement("div",{hidden:i,key:r,className:s,onClick:function(){return S(r)}},o.a.createElement("div",{className:"c-content-create__group-item-icon"},o.a.createElement(c.a,{customPath:n,extraClasses:"ez-icon--small"})),o.a.createElement("div",{className:"c-content-create__group-item-name"},t))})))})))),o.a.createElement("div",{className:"c-content-create__confirm-wrapper"},o.a.createElement("button",{className:"c-content-create__confirm-button btn btn-primary",onClick:function(){D({locationId:n,languageCode:w,contentTypeIdentifier:_}),A("content-create")},disabled:q},W),o.a.createElement("button",{className:"ez-btn ez-btn--no-border",onClick:z},H)))};function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t=e.children,n=e.actionsDisabledMap,a=window.eZ.adminUiConfig.universalDiscoveryWidget.contentMetaPreview,i=P(Object(r.useContext)(s.SelectedLocationsContext),2),c=i[0],l=(i[1],c.length?o.a.createElement(S,null):null);return o.a.createElement("div",{className:"c-udw-tab"},o.a.createElement("div",{className:"c-udw-tab__top-bar"},o.a.createElement(f,{actionsDisabledMap:n})),o.a.createElement("div",{className:"c-udw-tab__left-sidebar"},o.a.createElement(A,null),o.a.createElement(y,null)),o.a.createElement("div",{className:"c-udw-tab__main"},t),o.a.createElement("div",{className:"c-udw-tab__right-sidebar"},a&&o.a.createElement(a,null),l))};k.propTypes={children:i.a.any.isRequired,actionsDisabledMap:i.a.object},k.defaultProps={actionsDisabledMap:{"content-create-button":!1,"sort-switcher":!1,"view-switcher":!1}};t.a=k}},[[32,"runtime"]]]);